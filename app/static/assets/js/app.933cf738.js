(function(){var e={46700:function(e,t,a){var l={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=i,e.exports=s,s.id=46700},69405:function(e,t,a){"use strict";a(96577);var l=a(70473),s=(a(76751),a(61446)),i=(a(25904),a(97139)),o=(a(88411),a(45542)),n=(a(63295),a(70031)),r=(a(776),a(98704)),d=(a(37462),a(40058)),u=(a(26540),a(2287)),c=(a(26650),a(81699)),m=(a(9139),a(29937)),p=(a(9067),a(72191)),w=(a(75887),a(54701)),h=(a(30383),a(48051)),f=(a(75311),a(96461)),g=(a(54632),a(24871)),y=(a(25577),a(65494)),v=(a(6814),a(66900)),k=(a(91739),a(16987)),b=(a(95029),a(55873)),_=(a(53839),a(72616)),x=(a(1557),a(31533)),W=(a(69157),a(2586)),U=(a(46238),a(99230)),C=(a(60753),a(81690)),z=(a(21186),a(45949)),$=(a(88674),a(17727),a(33948),a(21703),a(9669)),I=a.n($);const S=async e=>{try{const t=await I().get(e,{validateStatus:()=>!0});if(!t.data.success)throw new Error(t.data.message);return t.data}catch(t){throw new Error(t.message)}},R=async(e,t)=>{try{const a=await I().post(e,t,{validateStatus:()=>!0});if(!a.data.success)throw new Error(a.data.message);return a.data}catch(a){throw new Error(a.message)}};var D=a(86367),j=a.n(D),q={login:async(e,t,a)=>{const l="/api/user/login",s={username:e,password:j()(t),otpPw:a};return await R(l,s)},get:async()=>{const e="/api/user/get";return await S(e)}},M={list:async()=>{const e="/api/server/list";return await S(e)},modify:async e=>{const t="/api/server/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/server/delete";return await R(t,{id:e})},reload:async e=>{const t="/api/server/reload?id="+e;return await S(t)},netSpeed:async()=>{const e="/api/server/netSpeed?_="+Math.random();return await S(e)},cpuUse:async()=>{const e="/api/server/cpuUse?_="+Math.random();return await S(e)},vnstat:async e=>{const t="/api/server/vnstat?id="+e+"&_="+Math.random();return await S(t)}},P=(a(38862),{list:async()=>{const e="/api/site/list";return await S(e)},listRecord:async()=>{const e="/api/site/listRecord";return await S(e)},modify:async e=>{const t="/api/site/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/site/delete";return await R(t,{name:e})},refresh:async e=>{const t="/api/site/refresh"+(e?"?name="+e:"");return await S(t)},search:async(e,t)=>{const a=`/api/site/search?keyword=${e}&sites=${encodeURIComponent(JSON.stringify(t))}`;return await S(a)},pushTorrent:async e=>{const t="/api/site/pushTorrent";return await R(t,e)},listSite:async e=>{const t=Object.keys(e).filter((t=>e[t])).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/site/listSite?${t}`;return await S(a)}}),T={get:async()=>{const e="/api/setting/get";return await S(e)},modify:async e=>{const t="/api/setting/modify";return await R(t,e)},getTrackerFlowHistory:async()=>{const e="/api/setting/getTrackerFlowHistory";return await S(e)},getRunInfo:async()=>{const e="/api/setting/getRunInfo?_="+Math.random();return await S(e)},getHosts:async()=>{const e="/api/setting/getHosts";return await S(e)},save:async e=>{const t="/api/setting/save";return await R(t,e)},export:async()=>{const e="/api/setting/export";return await S(e)},import:async()=>{const e="/api/setting/import";return await S(e)},loginMTeam:async e=>{const t="/api/setting/loginMTeam";return await R(t,e)},networkTest:async e=>{const t="/api/setting/networkTest";return await R(t,e)},getProxy:async()=>{const e="/api/setting/getProxy";return await S(e)},saveProxy:async e=>{const t="/api/setting/saveProxy";return await R(t,e)}},H={list:async()=>{const e="/api/notification/list";return await S(e)},modify:async e=>{const t="/api/notification/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/notification/delete";return await R(t,{id:e})}},A={list:async()=>{const e="/api/downloader/list";return await S(e)},listMainInfo:async()=>{const e="/api/downloader/listMainInfo?_="+Math.random();return await S(e)},modify:async e=>{const t="/api/downloader/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/downloader/delete";return await R(t,{id:e})},getLogs:async e=>{const t=`/api/downloader/getLogs?client=${e}&_=`+Math.random();return await S(t)}},O={list:async()=>{const e="/api/deleteRule/list";return await S(e)},modify:async e=>{const t="/api/deleteRule/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/deleteRule/delete";return await R(t,{id:e})}},Y={list:async()=>{const e="/api/linkRule/list";return await S(e)},modify:async e=>{const t="/api/linkRule/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/linkRule/delete";return await R(t,{id:e})}},L={list:async()=>{const e="/api/rssRule/list";return await S(e)},modify:async e=>{const t="/api/rssRule/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/rssRule/delete";return await R(t,{id:e})}},K={list:async()=>{const e="/api/selectRule/list";return await S(e)},modify:async e=>{const t="/api/selectRule/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/selectRule/delete";return await R(t,{id:e})}},B={list:async()=>{const e="/api/rss/list";return await S(e)},modify:async e=>{const t="/api/rss/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/rss/delete";return await R(t,{id:e})},delRecord:async e=>{const t="/api/rss/deleteRecord";return await R(t,e)},dryrun:async e=>{const t="/api/rss/dryrun";return await R(t,e)},mikanSearch:async e=>{const t="/api/rss/mikanSearch";return await R(t,e)},mikanPush:async e=>{const t="/api/rss/mikanPush";return await R(t,e)}},N={list:async()=>{const e="/api/script/list";return await S(e)},modify:async e=>{const t="/api/script/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/script/delete";return await R(t,{id:e})},run:async e=>{const t="/api/script/run";return await R(t,e)}},Z={list:async()=>{const e="/api/watch/list";return await S(e)},listHistory:async()=>{const e="/api/watch/listHistory";return await S(e)},modify:async e=>{const t="/api/watch/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/watch/delete";return await R(t,{id:e})},delRecord:async e=>{const t="/api/watch/deleteRecord";return await R(t,e)}},E={list:async()=>{const e="/api/subscribe/list";return await S(e)},modify:async e=>{const t="/api/subscribe/"+(e.id?"modify":"add");return await R(t,e)},delete:async e=>{const t="/api/subscribe/delete";return await R(t,{id:e})},refreshSubscribe:async e=>{const t="/api/subscribe/refresh";return await R(t,{id:e})},listSubscribeItem:async()=>{const e="/api/subscribe/listWishes?length=9999&page=1";return await S(e)},getItem:async(e,t)=>{const a=`/api/subscribe/getWish?wishId=${e}&doubanId=${t}`;return await S(a)},refreshItem:async(e,t)=>{const a=`/api/subscribe/refreshWish?id=${e}&douban=${t}`;return await S(a)},deleteItem:async(e,t)=>{const a=`/api/subscribe/deleteWish?id=${e}&douban=${t}`;return await S(a)},editItem:async e=>{const t="/api/subscribe/editWish";return await R(t,e)},relink:async e=>{const t=Object.keys(e).filter((t=>e[t])).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/subscribe/relink?${t}`;return await S(a)},delRecord:async e=>{const t=Object.keys(e).filter((t=>e[t])).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/subscribe/deleteRecord?${t}`;return await S(a)},search:async e=>{const t=Object.keys(e).filter((t=>e[t])).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/subscribe/search?${t}`;return await S(a)},addWish:async e=>{const t="/api/subscribe/addWish";return await R(t,e)}},F={info:async e=>{const t="/api/torrent/info?hash="+e;return await S(t)},link:async e=>{const t="/api/torrent/link";return await R(t,e)},list:async e=>{const t=Object.keys(e).filter((t=>e[t])).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/torrent/list?${t}`;return await S(a)},getBulkLinkList:async(e,t)=>{const a=`/api/torrent/getBulkLinkList?keyword=${e||""}&client=${t||""}`;return await S(a)},scrapeName:async(e,t)=>{const a=`/api/torrent/scrapeName?name=${e||""}&type=${t||""}`;return await S(a)},listHistory:async e=>{const t=Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/torrent/listHistory?${t}`;return await S(a)},getDelInfo:async e=>{const t=Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),a=`/api/torrent/getDelInfo?${t}`;return await S(a)},deleteTorrent:async e=>{const t="/api/torrent/deleteTorrent";return await R(t,e)}},V={get:async e=>{const t=`/api/log/get?type=${e}&_=${Math.random()}`;return await S(t)},clear:async()=>{const e="/api/log/clear";return await S(e)}};const G={user:q,setting:T,downloader:A,server:M,site:P,notification:H,deleteRule:O,linkRule:Y,rssRule:L,selectRule:K,rss:B,script:N,subscribe:E,torrent:F,log:V,watch:Z};var J=()=>G,X=a(30381),Q=a.n(X),ee=(a(56111),a(49963)),te=a(66252),ae=a(2262);const le={id:"app"};function se(e,t,a,l,s,i){const o=(0,te.up)("router-view");return(0,te.wg)(),(0,te.iD)("div",le,[(0,te._)("div",null,[(0,te.Wm)(o)])])}var ie={name:"App",components:{},data(){return{}},methods:{}},oe=a(83744);const ne=(0,oe.Z)(ie,[["render",se]]);var re=ne,de=a(78947),ue=a(51436),ce=a(51417),me=a(57810),pe=a(68023),we=a(91416),he=a(54858),fe=a(85299),ge=a(47956),ye=a(8690),ve=a(82739),ke=a(76395),be=a(67740),_e=a(29636),xe=a(13765),We=a(46038),Ue=a(61985),Ce=(a(94113),a(32326)),ze=a(22201);function $e(e,t,a,l,s,i){const o=(0,te.up)("router-view");return(0,te.wg)(),(0,te.j4)(o)}var Ie={data(){return{}},methods:{}};const Se=(0,oe.Z)(Ie,[["render",$e]]);var Re=Se,De=a(3577);const je=e=>((0,te.dD)("data-v-dc6e738e"),e=e(),(0,te.Cn)(),e),qe=je((()=>(0,te._)("div",{style:{width:"32px",float:"left"}},[(0,te._)("img",{src:"/assets/images/logo.svg"})],-1))),Me=je((()=>(0,te._)("span",{style:{"font-size":"28px","line-height":"32px","padding-left":"12px"}}," Vertex ",-1))),Pe=[qe,Me],Te=je((()=>(0,te._)("div",{class:"logo"},[(0,te._)("div",{style:{width:"32px",float:"left"}},[(0,te._)("img",{src:"/assets/images/logo.svg"})]),(0,te._)("span",{style:{"font-size":"22px","line-height":"32px","padding-left":"12px"}}," Vertex ")],-1))),He=je((()=>(0,te._)("div",{style:{margin:"0 auto",width:"calc(100% - 32px)",position:"absolute",display:"inline-block"}},[(0,te._)("div",{style:{margin:"0 auto",width:"144px"}},[(0,te._)("div",{style:{width:"24px",float:"left"}},[(0,te._)("img",{style:{background:"rgba(255,255,255,0.2)","border-radius":"4px"},src:"/assets/images/logo.svg"})]),(0,te._)("span",{style:{"font-size":"22px","padding-left":"6px","line-height":"68px"}}," Vertex ")])],-1)));function Ae(e,t,a,l,s,i){const o=(0,te.up)("fa"),n=(0,te.up)("a-menu-item"),r=(0,te.up)("a-sub-menu"),d=(0,te.up)("a-menu"),u=(0,te.up)("a-layout-sider"),c=(0,te.up)("a-drawer"),m=(0,te.up)("a-layout-header"),p=(0,te.up)("router-view"),w=(0,te.up)("a-layout-content"),h=(0,te.up)("a-layout");return(0,te.wg)(),(0,te.j4)(h,{class:"dashboard"},{default:(0,te.w5)((()=>[i.isMobile()?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(u,{key:0,theme:"light"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{selectedKeys:s.selectedKeys,"onUpdate:selectedKeys":t[1]||(t[1]=e=>s.selectedKeys=e),openKeys:s.openKeys,"onUpdate:openKeys":t[2]||(t[2]=e=>s.openKeys=e),mode:"inline",style:{height:"calc(var(--vh, 1vh) * 100)",overflow:"auto","overflow-x":"hidden"}},{default:(0,te.w5)((()=>[(0,te._)("div",{class:"logo",onClick:t[0]||(t[0]=(...e)=>i.gotoWiki&&i.gotoWiki(...e))},Pe),((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.menu,(e=>((0,te.wg)(),(0,te.iD)(te.HY,null,[e.hidden||e.sub?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:e.path,onClick:t=>i.goto(e.path)},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),default:(0,te.w5)((()=>[(0,te.Uk)(" "+(0,De.zw)(e.title),1)])),_:2},1032,["onClick"])),!e.hidden&&e.sub?((0,te.wg)(),(0,te.j4)(r,{key:e.path},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),title:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.title),1)])),default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(e.sub,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.path},[e.hidden?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{onClick:t=>i.goto(e.path),key:e.path},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),default:(0,te.w5)((()=>[(0,te.Uk)(" "+(0,De.zw)(e.title),1)])),_:2},1032,["onClick"]))],64)))),128))])),_:2},1024)):(0,te.kq)("",!0)],64)))),256))])),_:1},8,["selectedKeys","openKeys"])])),_:1})),i.isMobile()?((0,te.wg)(),(0,te.j4)(c,{key:1,visible:s.visible,"onUpdate:visible":t[5]||(t[5]=e=>s.visible=e),closable:!1,placement:"left",width:"272"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{selectedKeys:s.selectedKeys,"onUpdate:selectedKeys":t[3]||(t[3]=e=>s.selectedKeys=e),openKeys:s.openKeys,"onUpdate:openKeys":t[4]||(t[4]=e=>s.openKeys=e),mode:"inline",style:{width:"220px","font-size":"14px","min-height":"calc(var(--vh, 1vh) * 100 - 48px)"}},{default:(0,te.w5)((()=>[Te,((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.menu,(e=>((0,te.wg)(),(0,te.iD)(te.HY,null,[e.hidden||e.sub?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:e.path,onClick:t=>{i.goto(e.path),s.visible=!1}},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),default:(0,te.w5)((()=>[(0,te.Uk)(" "+(0,De.zw)(e.title),1)])),_:2},1032,["onClick"])),!e.hidden&&e.sub?((0,te.wg)(),(0,te.j4)(r,{key:e.path},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),title:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.title),1)])),default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(e.sub,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.path},[e.hidden?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{onClick:t=>{i.goto(e.path),s.visible=!1},key:e.path},{icon:(0,te.w5)((()=>[(0,te.Wm)(o,{icon:e.icon,style:{width:"32px"}},null,8,["icon"])])),default:(0,te.w5)((()=>[(0,te.Uk)(" "+(0,De.zw)(e.title),1)])),_:2},1032,["onClick"]))],64)))),128))])),_:2},1024)):(0,te.kq)("",!0)],64)))),256))])),_:1},8,["selectedKeys","openKeys"])])),_:1},8,["visible"])):(0,te.kq)("",!0),(0,te.Wm)(h,null,{default:(0,te.w5)((()=>[i.isMobile()?((0,te.wg)(),(0,te.j4)(m,{key:0,style:{padding:"0"},theme:"light"},{default:(0,te.w5)((()=>[s.visible?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(o,{key:0,icon:["fas","bars"],onClick:t[6]||(t[6]=e=>s.visible=!s.visible),style:{"font-size":"16px","padding-left":"16px"}})),He])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(w,{style:(0,De.j5)({padding:"16px","overflow-y":"auto",height:"calc(var(--vh, 1vh) * 100 - 67px)"})},{default:(0,te.w5)((()=>[(0,te.Wm)(p)])),_:1},8,["style"])])),_:1})])),_:1})}a(74916);var Oe={data(){return{selectedKeys:[],openKeys:[],visible:!1,menu:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async goto(e){this.$goto(e,this.$router),setTimeout((()=>{this.selectedKeys=[this.$route.path];const e=[];for(const t of this.menu.filter((e=>e.sub)))this.$route.path.startsWith(t.path)&&e.push(t.path);this.openKeys=e}),100)},async gotoWiki(){window.open("https://Wiki.vertex.icu")}},async mounted(){this.selectedKeys=[this.$route.path];try{const e=await this.$api().user.get();this.$message().success("欢迎回来"),this.menu=e.data.menu;const t=[];for(const a of this.menu.filter((e=>e.sub)))this.$route.path.startsWith(a.path)&&t.push(a.path);this.openKeys=t}catch(e){this.$message().error(e.message)}}};const Ye=(0,oe.Z)(Oe,[["render",Ae],["__scopeId","data-v-dc6e738e"]]);var Le=Ye;const Ke=e=>((0,te.dD)("data-v-20f69813"),e=e(),(0,te.Cn)(),e),Be={class:"index"},Ne={style:{margin:"24px auto","text-align":"center","max-width":"1440px"}},Ze={class:"data-rect-1 highlight-1"},Ee={style:{"font-size":"14px","font-weight":"bold",color:"#e0f0e9"}},Fe=Ke((()=>(0,te._)("div",null,"今日上传",-1))),Ve=Ke((()=>(0,te._)("div",null,"UPLOAD",-1))),Ge={style:{margin:"initial","font-size":"18px"}},Je={class:"data-rect-1",style:{background:"#eff"}},Xe={style:{"font-size":"14px","font-weight":"bold"}},Qe=Ke((()=>(0,te._)("div",null,"今日下载",-1))),et=Ke((()=>(0,te._)("div",null,"DOWNLOAD",-1))),tt={style:{margin:"initial","font-size":"18px"}},at={class:"data-rect-1",style:{background:"#eff"}},lt={style:{"font-size":"14px","font-weight":"bold"}},st=Ke((()=>(0,te._)("div",null,"今日添加",-1))),it=Ke((()=>(0,te._)("div",null,"ACCEPT",-1))),ot={style:{margin:"initial","font-size":"18px"}},nt={class:"data-rect-1",style:{background:"#eff"}},rt={style:{"font-size":"14px","font-weight":"bold"}},dt=Ke((()=>(0,te._)("div",null,"今日拒绝",-1))),ut=Ke((()=>(0,te._)("div",null,"REJECT",-1))),ct={style:{margin:"initial","font-size":"18px"}},mt={style:{margin:"24px auto","text-align":"center","max-width":"1440px"}},pt={class:"data-rect-1 highlight-2"},wt={style:{"font-size":"14px","font-weight":"bold"}},ht=Ke((()=>(0,te._)("div",null,"累计上传",-1))),ft=Ke((()=>(0,te._)("div",null,"UPLOAD",-1))),gt={style:{margin:"initial","font-size":"18px"}},yt={class:"data-rect-1",style:{background:"#eff"}},vt={style:{"font-size":"14px","font-weight":"bold"}},kt=Ke((()=>(0,te._)("div",null,"累计下载",-1))),bt=Ke((()=>(0,te._)("div",null,"DOWNLOAD",-1))),_t={style:{margin:"initial","font-size":"18px"}},xt={class:"data-rect-1",style:{background:"#eff"}},Wt={style:{"font-size":"14px","font-weight":"bold"}},Ut=Ke((()=>(0,te._)("div",null,"累计添加",-1))),Ct=Ke((()=>(0,te._)("div",null,"ACCEPT",-1))),zt={style:{margin:"initial","font-size":"18px"}},$t={class:"data-rect-1",style:{background:"#eff"}},It={style:{"font-size":"14px","font-weight":"bold"}},St=Ke((()=>(0,te._)("div",null,"累计拒绝",-1))),Rt=Ke((()=>(0,te._)("div",null,"REJECT",-1))),Dt={style:{margin:"initial","font-size":"18px"}},jt={key:0,style:{margin:"24px auto","text-align":"center","max-width":"1440px"}},qt=["onClick"],Mt={style:{"font-size":"14px","font-weight":"bold",color:"#fff",padding:"16px 16px"}},Pt={style:{margin:"initial","font-size":"12px"}},Tt={style:{margin:"initial","font-size":"16px"}},Ht=["onClick"],At={style:{"font-size":"14px","font-weight":"bold",padding:"16px 16px"}},Ot={style:{margin:"initial","font-size":"12px"}},Yt={style:{margin:"initial","font-size":"16px"}},Lt={key:1,style:{margin:"24px auto","text-align":"center","max-width":"1440px"}},Kt={style:{"font-size":"14px","font-weight":"bold",color:"#fff",padding:"16px 16px"}},Bt=Ke((()=>(0,te._)("div",{style:{margin:"initial","font-size":"12px"}},null,-1))),Nt={style:{margin:"initial","font-size":"16px"}},Zt={style:{"font-size":"14px","font-weight":"bold",padding:"16px 16px"}},Et=Ke((()=>(0,te._)("div",{style:{margin:"initial","font-size":"12px"}},null,-1))),Ft={style:{margin:"initial","font-size":"16px"}},Vt={key:2,style:{margin:"24px auto","text-align":"center","max-width":"1440px"}};function Gt(e,t,a,l,s,i){const o=(0,te.up)("v-chart"),n=(0,te.up)("a-col"),r=(0,te.up)("a-row");return(0,te.wg)(),(0,te.iD)("div",Be,[(0,te.Wm)(r,{type:"flex",justify:"center",align:"middle",style:{"min-height":"100%"}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{span:(i.isMobile(),24)},{default:(0,te.w5)((()=>[(0,te._)("div",Ne,[(0,te._)("div",Ze,[(0,te._)("div",Ee,[Fe,Ve,(0,te._)("div",Ge,(0,De.zw)(e.$formatSize(s.runInfo.uploadedToday)),1)])]),(0,te._)("div",Je,[(0,te._)("div",Xe,[Qe,et,(0,te._)("div",tt,(0,De.zw)(e.$formatSize(s.runInfo.downloadedToday)),1)])]),(0,te._)("div",at,[(0,te._)("div",lt,[st,it,(0,te._)("div",ot,(0,De.zw)(s.runInfo.addCountToday),1)])]),(0,te._)("div",nt,[(0,te._)("div",rt,[dt,ut,(0,te._)("div",ct,(0,De.zw)(s.runInfo.rejectCountToday),1)])])]),(0,te._)("div",mt,[(0,te._)("div",pt,[(0,te._)("div",wt,[ht,ft,(0,te._)("div",gt,(0,De.zw)(e.$formatSize(s.runInfo.uploaded)),1)])]),(0,te._)("div",yt,[(0,te._)("div",vt,[kt,bt,(0,te._)("div",_t,(0,De.zw)(e.$formatSize(s.runInfo.downloaded)),1)])]),(0,te._)("div",xt,[(0,te._)("div",Wt,[Ut,Ct,(0,te._)("div",zt,(0,De.zw)(s.runInfo.addCount),1)])]),(0,te._)("div",$t,[(0,te._)("div",It,[St,Rt,(0,te._)("div",Dt,(0,De.zw)(s.runInfo.rejectCount),1)])])]),s.runInfo.dashboardContent.filter((e=>"downloader"===e))[0]?((0,te.wg)(),(0,te.iD)("div",jt,[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,((t,a)=>((0,te.wg)(),(0,te.iD)(te.HY,{key:t.id},[0===a?((0,te.wg)(),(0,te.iD)("div",{key:0,onClick:e=>i.gotoClient(`/proxy/client/${t.id}/`),class:"data-rect-pointer data-rect-2 highlight-3",style:(0,De.j5)(1===s.downloaders.length?"width: "+(i.isMobile()?"336px":"688px"):"")},[(0,te._)("div",Mt,[(0,te._)("div",null,(0,De.zw)(t.alias),1),(0,te._)("div",Pt,"累计数据: "+(0,De.zw)(e.$formatSize(t.allTimeUpload))+" ↑ / "+(0,De.zw)(e.$formatSize(t.allTimeDownload))+" ↓",1),(0,te._)("div",Tt,(0,De.zw)(e.$formatSize(t.uploadSpeed))+"/s ↑ / "+(0,De.zw)(e.$formatSize(t.downloadSpeed))+"/s ↓",1)])],12,qt)):(0,te.kq)("",!0),0!==a?((0,te.wg)(),(0,te.iD)("div",{key:1,onClick:e=>i.gotoClient(`/proxy/client/${t.id}/`),class:"data-rect-pointer data-rect-2",style:(0,De.j5)(s.downloaders.length===a+1&&s.downloaders.length%2===1?"background: #eff; width: "+(i.isMobile()?"336px":"688px"):"background: #eff;")},[(0,te._)("div",At,[(0,te._)("div",null,(0,De.zw)(t.alias),1),(0,te._)("div",Ot,"累计数据: "+(0,De.zw)(e.$formatSize(t.allTimeUpload))+" ↑ / "+(0,De.zw)(e.$formatSize(t.allTimeDownload))+" ↓",1),(0,te._)("div",Yt,(0,De.zw)(e.$formatSize(t.uploadSpeed))+"/s ↑ / "+(0,De.zw)(e.$formatSize(t.downloadSpeed))+"/s ↓",1)])],12,Ht)):(0,te.kq)("",!0)],64)))),128))])):(0,te.kq)("",!0),s.runInfo.dashboardContent.filter((e=>"server"===e))[0]?((0,te.wg)(),(0,te.iD)("div",Lt,[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.servers,((t,a)=>((0,te.wg)(),(0,te.iD)(te.HY,{key:t.id},[0===a?((0,te.wg)(),(0,te.iD)("div",{key:0,class:"data-rect-2 highlight-4",style:(0,De.j5)(1===s.servers.length?"width: "+(i.isMobile()?"336px":"688px"):"")},[(0,te._)("div",Kt,[(0,te._)("div",null,(0,De.zw)(t.alias),1),Bt,(0,te._)("div",Nt,(0,De.zw)(e.$formatSize(t.netSpeed.upload))+"/s ↑ / "+(0,De.zw)(e.$formatSize(t.netSpeed.download))+"/s ↓",1)])],4)):(0,te.kq)("",!0),0!==a?((0,te.wg)(),(0,te.iD)("div",{key:1,class:"data-rect-2",style:(0,De.j5)(s.servers.length===a+1&&s.servers.length%2===1?"background: #eff; width: "+(i.isMobile()?"336px":"688px"):"background: #eff;")},[(0,te._)("div",Zt,[(0,te._)("div",null,(0,De.zw)(t.alias),1),Et,(0,te._)("div",Ft,(0,De.zw)(e.$formatSize(t.netSpeed.upload))+"/s ↑ / "+(0,De.zw)(e.$formatSize(t.netSpeed.download))+"/s ↓",1)])],4)):(0,te.kq)("",!0)],64)))),128))])):(0,te.kq)("",!0),s.runInfo.dashboardContent.filter((e=>"tracker"===e))[0]?((0,te.wg)(),(0,te.iD)("div",Vt,[(0,te._)("div",{class:(0,De.C_)("data-rect-3-"+(i.isMobile()?"mobile":"pc")),style:{background:"#eff",height:"400px"}},[(0,te.Wm)(o,{option:s.trackerChart,autoresize:""},null,8,["option"])],2)])):(0,te.kq)("",!0)])),_:1},8,["span"])])),_:1})])}var Jt=a(95082),Xt=(a(2707),a(65069),a(41817),{data(){return{trackerChart:{title:{text:"Tracker 速度",left:"center",textStyle:{fontFamily:"consolas"}},grid:{top:20,left:this.isMobile()?0:90,right:0,bottom:90},legend:{show:!1},textStyle:{fontFamily:"consolas"},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}],tooltip:{trigger:"axis",position:function(e,t,a,l,s){const i={top:60};return i[["left","right"][+(e[0]<s.viewSize[0]/2)]]=5,i},formatter:e=>{let t=e[0].axisValue+"</br>";e=e.sort(((e,t)=>t.value-e.value)).filter((e=>e.value));for(const a of e){const e=this.$formatSize(a.value)+"/s";t+=`${a.seriesName.slice(0,20)}: ${"&nbsp;".repeat(40-e.length-a.seriesName.slice(0,20).length||1)}${e}<br>`}return t}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLabel:{show:!this.isMobile(),formatter:e=>this.$formatSize(e)+"/s"}},graphic:[{type:"image",id:"logo",right:20,top:20,z:-1,bounding:"raw",origin:[125,125],style:{image:"/assets/images/logo.svg",width:64,height:64,opacity:.8}}],series:[]},speedChart:{grid:{left:0,right:0,top:0,bottom:0,z:0},xAxis:{type:"category",show:!1,boundaryGap:!1,data:[]},yAxis:{type:"value",show:!1},series:[{data:[],type:"line",symbol:"none",smooth:!0,areaStyle:{opacity:.2,color:"#BEC23F"},lineStyle:{opacity:0,color:"#BEC23F"}},{data:[],type:"line",symbol:"none",smooth:!0,areaStyle:{opacity:0,color:"#C46243"},lineStyle:{opacity:0,color:"#C46243"}}]},runInfo:{dashboardContent:[]},trackerInfo:{},servers:[],downloaders:[],loading:!0}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listTrackerHistory(){try{const e=await this.$api().setting.getTrackerFlowHistory();this.trackerInfo=e,this.loadTracker()}catch(e){await this.$message().error(e.message)}},async getRunInfo(){try{const e=await this.$api().setting.getRunInfo();this.runInfo=e.data;for(const t of this.runInfo.errors.reverse())await this.$notification().error({message:"存在错误信息, 请检查日志",description:t.map((e=>"object"===typeof e?e.message||e.code||e.description:e)).join(", "),duration:0})}catch(e){await this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.listMainInfo();this.downloaders=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias))).map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{speedChart:JSON.parse(JSON.stringify(this.speedChart))})))}catch(e){await this.$message().error(e.message)}},async listDownloaderInfo(){try{const a=await this.$api().downloader.listMainInfo();for(const l of this.downloaders){var e,t;const s=(null===(e=a.data.filter((e=>e.id===l.id))[0])||void 0===e?void 0:e.uploadSpeed)||0,i=(null===(t=a.data.filter((e=>e.id===l.id))[0])||void 0===t?void 0:t.downloadSpeed)||0;l.uploadSpeed=s,l.downloadSpeed=i}}catch(a){await this.$message().error(a.message)}},async listServer(){try{const e=await this.$api().server.list();this.servers=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias))).map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{netSpeed:{upload:0,download:0},speedChart:JSON.parse(JSON.stringify(this.speedChart))})))}catch(e){await this.$message().error(e.message)}},async getNetSpeed(){try{this.netSpeed=(await this.$api().server.netSpeed()).data;for(const a of this.servers){var e,t;const l=(null===(e=this.netSpeed[a.id])||void 0===e?void 0:e.sort(((e,t)=>t.txBytes-e.txBytes))[0].txBytes)||0,s=(null===(t=this.netSpeed[a.id])||void 0===t?void 0:t.sort(((e,t)=>t.txBytes-e.txBytes))[0].rxBytes)||0;a.netSpeed={upload:l,download:s},a.speedChart.xAxis.data.push(""),a.speedChart.series[0].data.push(l)}}catch(a){await this.$message().error(a.message)}},loadTracker(){const e=this.trackerInfo.data.trackers,t={name:"",type:"line",data:[],symbol:"none",sampling:"lttb",areaStyle:{opacity:.2},lineStyle:{opacity:.7},smooth:!0};this.trackerChart.series=[];const a=this.trackerInfo.data.timeGroup;for(const l of Object.keys(e)){const a=e[l],s=(0,Jt.Z)({},t);s.data=Object.keys(a).map((e=>Math.max(a[e].upload,0))),s.name=l,this.trackerChart.series.push(s)}if(this.trackerChart.series[0]){const e=[];for(const[t]of this.trackerChart.series[0].data.entries())for(const a of this.trackerChart.series)e[t]?e[t]+=Math.max(a.data[t],0):e[t]=Math.max(a.data[t],0);const a=(0,Jt.Z)({},t);a.name="Total",a.data=e,this.trackerChart.series.push(a)}this.trackerChart.xAxis.data=a.map((e=>this.$moment(1e3*e).format("YYYY-MM-DD HH:mm")))},async gotoClient(e){window.open(e)}},async mounted(){await this.getRunInfo();const e=!!this.runInfo.dashboardContent.filter((e=>"downloader"===e))[0],t=!!this.runInfo.dashboardContent.filter((e=>"server"===e))[0],a=!!this.runInfo.dashboardContent.filter((e=>"tracker"===e))[0];e&&(this.listDownloader(),this.listDownloaderInfo()),t&&(this.listServer(),this.getNetSpeed()),a&&this.listTrackerHistory(),this.interval=setInterval((()=>{e&&this.listDownloaderInfo(),t&&this.getNetSpeed()}),3e3)},beforeUnmount(){clearInterval(this.interval)}});const Qt=(0,oe.Z)(Xt,[["render",Gt],["__scopeId","data-v-20f69813"]]);var ea=Qt;const ta=e=>((0,te.dD)("data-v-6787533e"),e=e(),(0,te.Cn)(),e),aa=ta((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"服务器",-1))),la={class:"server"},sa=ta((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"服务器列表",-1))),ia=(0,te.Uk)("启用"),oa=(0,te.Uk)("禁用"),na=(0,te.Uk)("正常"),ra=(0,te.Uk)("异常"),da={key:2},ua=["onClick"],ca=(0,te.Uk)(" 操作 "),ma=["onClick"],pa=["onClick"],wa=(0,te.Uk)("删除"),ha=ta((()=>(0,te._)("a",null,"删除",-1))),fa=ta((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑服务器",-1))),ga={style:{"text-align":"left"}},ya=(0,te.Uk)("启用"),va=(0,te.Uk)("应用 | 完成"),ka=(0,te.Uk)("清空");function ba(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-tag"),r=(0,te.up)("fa"),d=(0,te.up)("a-menu-item"),u=(0,te.up)("a-button"),c=(0,te.up)("a-popover"),m=(0,te.up)("a-menu"),p=(0,te.up)("a-dropdown"),w=(0,te.up)("a-table"),h=(0,te.up)("a-input"),f=(0,te.up)("a-form-item"),g=(0,te.up)("a-checkbox"),y=(0,te.up)("a-textarea"),v=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[aa,(0,te.Wm)(o),(0,te._)("div",la,[(0,te.Wm)(w,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.servers,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[sa])),bodyCell:(0,te.w5)((({column:e,record:a})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[a.enable?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[ia])),_:1})):(0,te.kq)("",!0),a.enable?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[oa])),_:1}))],64)):(0,te.kq)("",!0),"status"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[a.status?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[na])),_:1})):(0,te.kq)("",!0),a.status?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[ra])),_:1}))],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",da,[(0,te._)("a",{onClick:e=>i.goto(a)},"shell",8,ua),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(p,null,{overlay:(0,te.w5)((()=>[(0,te.Wm)(m,null,{default:(0,te.w5)((()=>[(0,te.Wm)(d,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.modifyClick(a)},"编辑",8,ma)])),_:2},1024),(0,te.Wm)(d,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.reloadServer(a)},"重连",8,pa)])),_:2},1024),(0,te.Wm)(d,{danger:""},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(u,{type:"primary",danger:"",onClick:e=>i.deleteServer(a),size:"small"},{default:(0,te.w5)((()=>[wa])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[ha])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:(0,te.w5)((()=>[(0,te._)("a",{class:"ant-dropdown-link",onClick:t[0]||(t[0]=(0,ee.iM)((()=>{}),["prevent"]))},[ca,(0,te.Wm)(r,{icon:["fas","chevron-down"]})])])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),fa,(0,te._)("div",ga,[(0,te.Wm)(v,{labelAlign:"right",labelWrap:!0,model:s.server,size:"small",onFinish:i.modifyServer,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{label:"别名",name:"alias",extra:"给服务器取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.alias,"onUpdate:value":t[1]||(t[1]=e=>s.server.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"启用",name:"enable",extra:"选择是否启用服务器",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{disabled:s.server.used,checked:s.server.enable,"onUpdate:checked":t[2]||(t[2]=e=>s.server.enable=e)},{default:(0,te.w5)((()=>[ya])),_:1},8,["disabled","checked"])])),_:1}),(0,te.Wm)(f,{label:"域名/IP",name:"host",extra:"服务器的 IP: 192.168.1.1 或域名: my.seed.box",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.host,"onUpdate:value":t[3]||(t[3]=e=>s.server.host=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"用户名",name:"username",extra:"填写 ssh 登录服务器所需的用户名",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.username,"onUpdate:value":t[4]||(t[4]=e=>s.server.username=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"密码",name:"password",extra:"填写 ssh 登录服务器所需的密码, 密码与密钥二选一即可。",rules:[{validator:async(e,t)=>{if(!s.server.password&&!s.server.privateKey)throw"密码和密钥至少填写一个!"}}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.password,"onUpdate:value":t[5]||(t[5]=e=>s.server.password=e)},null,8,["value"])])),_:1},8,["rules"]),(0,te.Wm)(f,{label:"密钥",name:"privateKey",extra:"填写 ssh 登录服务器所需的密钥, 密码与密钥二选一即可。",rules:[{validator:async(e,t)=>{if(!s.server.password&&!s.server.privateKey)throw"密码和密钥至少填写一个!"}}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:s.server.privateKey,"onUpdate:value":t[6]||(t[6]=e=>s.server.privateKey=e),type:"textarea",rows:10},null,8,["value"])])),_:1},8,["rules"]),(0,te.Wm)(f,{label:"端口",name:"port",extra:"填写 ssh 登录服务器所需的端口",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.port,"onUpdate:value":t[7]||(t[7]=e=>s.server.port=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"固定网卡",name:"fixedInterface",extra:"填写希望显示速度信息的网卡接口, 例: enp1s0"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.server.fixedInterface,"onUpdate:value":t[8]||(t[8]=e=>s.server.fixedInterface=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[va])),_:1}),(0,te.Wm)(u,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[9]||(t[9]=e=>i.clearServer())},{default:(0,te.w5)((()=>[ka])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var _a={data(){const e=[{title:"ID",dataIndex:"id",width:18,sorter:(e,t)=>e.id.localeCompare(t.id),fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),defaultSortOrder:"ascend",width:30},{title:"域名/IP",dataIndex:"host",width:30},{title:"启用",dataIndex:"enable",width:15},{title:"状态",dataIndex:"status",width:15},{title:"操作",width:24}];return{columns:e,servers:[],server:{},defaultServer:{id:"",alias:"",host:"",username:"",password:"",port:"",enable:!0},loading:!0}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listServer(){try{const e=await this.$api().server.list();this.servers=e.data}catch(e){this.$message().error(e.message)}},async modifyServer(){try{await this.$api().server.modify((0,Jt.Z)({},this.server)),this.$message().success((this.server.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listServer()),1e3),this.clearServer()}catch(e){this.$message().error(e.message)}},async reloadServer(e){try{const t=await this.$api().server.reload(e.id);this.$message().success(t.message),this.listServer()}catch(t){this.$message().error(t.message)}},async clearServer(){this.server=(0,Jt.Z)({},this.defaultServer)},modifyClick(e){this.server=(0,Jt.Z)({},e)},async deleteServer(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().server.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listServer()}catch(t){this.$message().error(t.message)}},goto(e){window.open("/tool/shell/"+e.id)}},async mounted(){this.clearServer(),await this.listServer()}};const xa=(0,oe.Z)(_a,[["render",ba],["__scopeId","data-v-6787533e"]]);var Wa=xa;const Ua=e=>((0,te.dD)("data-v-2368822e"),e=e(),(0,te.Cn)(),e),Ca=Ua((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"下载器",-1))),za={class:"downloader"},$a=Ua((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"下载器列表",-1))),Ia=(0,te.Uk)("启用"),Sa=(0,te.Uk)("禁用"),Ra=(0,te.Uk)("正常"),Da=(0,te.Uk)("异常"),ja={key:3},qa=["onClick"],Ma=(0,te.Uk)(" 操作 "),Pa=["onClick"],Ta=["onClick"],Ha=["onClick"],Aa=(0,te.Uk)("删除"),Oa=Ua((()=>(0,te._)("a",null,"删除",-1))),Ya=Ua((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑下载器",-1))),La={style:{"text-align":"left"}},Ka=(0,te.Uk)("启用"),Ba=(0,te.Uk)("qBittorrent"),Na=(0,te.Uk)("Transmission"),Za=(0,te.Uk)("启用"),Ea=(0,te.Uk)("启用"),Fa=(0,te.Uk)("自动汇报"),Va=(0,te.Uk)("先下载首尾文件块"),Ga=(0,te.Uk)("空间警告"),Ja=(0,te.Uk)("KiB"),Xa=(0,te.Uk)("MiB"),Qa=(0,te.Uk)("GiB"),el=(0,te.Uk)("KiB/s"),tl=(0,te.Uk)("MiB/s"),al=(0,te.Uk)("GiB/s"),ll=(0,te.Uk)("KiB/s"),sl=(0,te.Uk)("MiB/s"),il=(0,te.Uk)("GiB/s"),ol=(0,te.Uk)("KiB"),nl=(0,te.Uk)("MiB"),rl=(0,te.Uk)("GiB"),dl=(0,te.Uk)("自动删种"),ul=(0,te.Uk)("应用 | 完成"),cl=(0,te.Uk)("清空");function ml(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-switch"),r=(0,te.up)("a-tag"),d=(0,te.up)("fa"),u=(0,te.up)("a-menu-item"),c=(0,te.up)("a-button"),m=(0,te.up)("a-popover"),p=(0,te.up)("a-menu"),w=(0,te.up)("a-dropdown"),h=(0,te.up)("a-table"),f=(0,te.up)("a-input"),g=(0,te.up)("a-form-item"),y=(0,te.up)("a-checkbox"),v=(0,te.up)("a-select-option"),k=(0,te.up)("a-select"),b=(0,te.up)("a-col"),_=(0,te.up)("a-row"),x=(0,te.up)("a-checkbox-group"),W=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Ca,(0,te.Wm)(o),(0,te._)("div",za,[(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.downloaders,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[$a])),bodyCell:(0,te.w5)((({column:e,record:a})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.j4)(n,{key:0,onChange:e=>i.enableDownloader(a),disabled:a.used,checked:a.enable,"onUpdate:checked":e=>a.enable=e,"checked-children":"启用","un-checked-children":"禁用"},null,8,["onChange","disabled","checked","onUpdate:checked"])):(0,te.kq)("",!0),"autoDelete"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[a.autoDelete?((0,te.wg)(),(0,te.j4)(r,{key:0,color:"success"},{default:(0,te.w5)((()=>[Ia])),_:1})):(0,te.kq)("",!0),a.autoDelete?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(r,{key:1,color:"error"},{default:(0,te.w5)((()=>[Sa])),_:1}))],64)):(0,te.kq)("",!0),"status"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[a.status?((0,te.wg)(),(0,te.j4)(r,{key:0,color:"success"},{default:(0,te.w5)((()=>[Ra])),_:1})):(0,te.kq)("",!0),a.status?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(r,{key:1,color:"error"},{default:(0,te.w5)((()=>[Da])),_:1}))],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",ja,[(0,te._)("a",{onClick:e=>i.goto(a)},"打开",8,qa),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(w,null,{overlay:(0,te.w5)((()=>[(0,te.Wm)(p,null,{default:(0,te.w5)((()=>[(0,te.Wm)(u,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.modifyClick(a)},"编辑",8,Pa)])),_:2},1024),(0,te.Wm)(u,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.cloneClick(a)},"克隆",8,Ta)])),_:2},1024),(0,te.Wm)(u,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.gotoLog(a)},"日志",8,Ha)])),_:2},1024),(0,te.Wm)(u,{danger:""},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary",danger:"",onClick:e=>i.deleteDownloader(a),size:"small"},{default:(0,te.w5)((()=>[Aa])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[Oa])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:(0,te.w5)((()=>[(0,te._)("a",{class:"ant-dropdown-link",onClick:t[0]||(t[0]=(0,ee.iM)((()=>{}),["prevent"]))},[Ma,(0,te.Wm)(d,{icon:["fas","chevron-down"]})])])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),Ya,(0,te._)("div",La,[(0,te.Wm)(W,{labelAlign:"right",labelWrap:!0,model:s.downloader,size:"small",onFinish:i.modifyDownloader,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{label:"别名",name:"alias",extra:"给下载器取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.alias,"onUpdate:value":t[1]||(t[1]=e=>s.downloader.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"启用",name:"enable",extra:"选择是否启用下载器",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{disabled:s.downloader.used,checked:s.downloader.enable,"onUpdate:checked":t[2]||(t[2]=e=>s.downloader.enable=e)},{default:(0,te.w5)((()=>[Ka])),_:1},8,["disabled","checked"])])),_:1}),(0,te.Wm)(g,{label:"下载器类型",name:"type",extra:"下载器类型, 目前仅支持 qBittorrent 与 Transmission",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.type,"onUpdate:value":t[3]||(t[3]=e=>s.downloader.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{value:"qBittorrent"},{default:(0,te.w5)((()=>[Ba])),_:1}),(0,te.Wm)(v,{value:"Transmission"},{default:(0,te.w5)((()=>[Na])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(g,{label:"用户名",name:"username",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.username,"onUpdate:value":t[4]||(t[4]=e=>s.downloader.username=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"密码",name:"password",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.password,"onUpdate:value":t[5]||(t[5]=e=>s.downloader.password=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"URL",name:"clientUrl",extra:"下载器的链接, 最后的 / 需要删除",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.clientUrl,"onUpdate:value":t[6]||(t[6]=e=>s.downloader.clientUrl=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"推送通知",name:"pushNotify",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.pushNotify,"onUpdate:checked":t[7]||(t[7]=e=>s.downloader.pushNotify=e)},{default:(0,te.w5)((()=>[Za])),_:1},8,["checked"])])),_:1}),s.downloader.pushNotify?((0,te.wg)(),(0,te.j4)(g,{key:0,label:"通知方式",name:"notify",extra:"通知方式, 用于推送删种等信息, 在通知工具页面创建",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.notify,"onUpdate:value":t[8]||(t[8]=e=>s.downloader.notify=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(v,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(g,{label:"监控频道",name:"pushMonitor",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.pushMonitor,"onUpdate:checked":t[9]||(t[9]=e=>s.downloader.pushMonitor=e)},{default:(0,te.w5)((()=>[Ea])),_:1},8,["checked"])])),_:1}),s.downloader.pushMonitor?((0,te.wg)(),(0,te.j4)(g,{key:1,label:"监控频道",name:"monitor",extra:"下载器状态频道, 仅支持 Telegram! 在推送工具页面创建",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.monitor,"onUpdate:value":t[10]||(t[10]=e=>s.downloader.monitor=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(v,{disabled:"telegram"!==e.type,value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["disabled","value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(g,{label:"信息更新周期",name:"cron",extra:"下载器信息更新 Cron 表达式, 默认为 4s 更新一次, 种子量过多请考虑 一分钟 一次甚至 五分钟 一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.cron,"onUpdate:value":t[11]||(t[11]=e=>s.downloader.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"自动汇报",name:"autoReannounce",extra:"自动在种子添加后的第 5 分钟时汇报一次, 获取更多 Peers",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.autoReannounce,"onUpdate:checked":t[12]||(t[12]=e=>s.downloader.autoReannounce=e)},{default:(0,te.w5)((()=>[Fa])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(g,{label:"先下载首尾文件块",name:"firstLastPiecePrio",extra:"先下载首尾文件块, 同 qBittorrent 右键菜单 - 先下载首尾文件块"},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.firstLastPiecePrio,"onUpdate:checked":t[13]||(t[13]=e=>s.downloader.firstLastPiecePrio=e)},{default:(0,te.w5)((()=>[Va])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(g,{label:"空间警告",name:"spaceAlarm",extra:"下载器剩余空间小于一定值时推送警告通知, 15 分钟一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.spaceAlarm,"onUpdate:checked":t[14]||(t[14]=e=>s.downloader.spaceAlarm=e)},{default:(0,te.w5)((()=>[Ga])),_:1},8,["checked"])])),_:1}),s.downloader.spaceAlarm?((0,te.wg)(),(0,te.j4)(g,{key:2,label:"空间",name:"alarmSpace",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.alarmSpace,"onUpdate:value":t[16]||(t[16]=e=>s.downloader.alarmSpace=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.alarmSpaceUnit,"onUpdate:value":t[15]||(t[15]=e=>s.downloader.alarmSpaceUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{value:"KiB"},{default:(0,te.w5)((()=>[Ja])),_:1}),(0,te.Wm)(v,{value:"MiB"},{default:(0,te.w5)((()=>[Xa])),_:1}),(0,te.Wm)(v,{value:"GiB"},{default:(0,te.w5)((()=>[Qa])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(g,{label:"上限上传速度",name:"maxUploadSpeed",extra:"若下载器的上传速度在此速度之上时, 不再添加种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.maxUploadSpeed,"onUpdate:value":t[18]||(t[18]=e=>s.downloader.maxUploadSpeed=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.maxUploadSpeedUnit,"onUpdate:value":t[17]||(t[17]=e=>s.downloader.maxUploadSpeedUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{value:"KiB"},{default:(0,te.w5)((()=>[el])),_:1}),(0,te.Wm)(v,{value:"MiB"},{default:(0,te.w5)((()=>[tl])),_:1}),(0,te.Wm)(v,{value:"GiB"},{default:(0,te.w5)((()=>[al])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(g,{label:"上限下载速度",name:"maxDownloadSpeed",extra:"若下载器的下载速度在此速度之上时, 不再添加种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.maxDownloadSpeed,"onUpdate:value":t[20]||(t[20]=e=>s.downloader.maxDownloadSpeed=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.maxDownloadSpeedUnit,"onUpdate:value":t[19]||(t[19]=e=>s.downloader.maxDownloadSpeedUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{value:"KiB"},{default:(0,te.w5)((()=>[ll])),_:1}),(0,te.Wm)(v,{value:"MiB"},{default:(0,te.w5)((()=>[sl])),_:1}),(0,te.Wm)(v,{value:"GiB"},{default:(0,te.w5)((()=>[il])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(g,{label:"最小剩余空间",name:"minFreeSpace",extra:"若下载器的剩余空间在此空间之下时, 不再添加种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.minFreeSpace,"onUpdate:value":t[22]||(t[22]=e=>s.downloader.minFreeSpace=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(k,{size:"small",value:s.downloader.minFreeSpaceUnit,"onUpdate:value":t[21]||(t[21]=e=>s.downloader.minFreeSpaceUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{value:"KiB"},{default:(0,te.w5)((()=>[ol])),_:1}),(0,te.Wm)(v,{value:"MiB"},{default:(0,te.w5)((()=>[nl])),_:1}),(0,te.Wm)(v,{value:"GiB"},{default:(0,te.w5)((()=>[rl])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(g,{label:"最大下载数量",name:"maxLeechNum",extra:"最大的下载活动种子数量, 在超过此数量时, 将不会添加种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.maxLeechNum,"onUpdate:value":t[23]||(t[23]=e=>s.downloader.maxLeechNum=e)},null,8,["value"])])),_:1}),(0,te.Wm)(g,{label:"自动删种",name:"autoDelete",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{checked:s.downloader.autoDelete,"onUpdate:checked":t[24]||(t[24]=e=>s.downloader.autoDelete=e)},{default:(0,te.w5)((()=>[dl])),_:1},8,["checked"])])),_:1}),s.downloader.autoDelete?((0,te.wg)(),(0,te.j4)(g,{key:3,label:"删种周期",name:"autoDeleteCron",extra:"删种周期 Cron 表达式, 默认为 1 分钟更新一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.downloader.autoDeleteCron,"onUpdate:value":t[25]||(t[25]=e=>s.downloader.autoDeleteCron=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),s.downloader.autoDelete?((0,te.wg)(),(0,te.j4)(g,{key:4,label:"拒绝删种规则",name:"rejectDeleteRules",extra:"拒绝删种规则, 种子状态符合其中一个时该种子不会被删除"},{default:(0,te.w5)((()=>[(0,te.Wm)(x,{style:{width:"100%"},value:s.downloader.rejectDeleteRules,"onUpdate:value":t[26]||(t[26]=e=>s.downloader.rejectDeleteRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(_,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.deleteRules,(e=>((0,te.wg)(),(0,te.j4)(b,{span:8,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),s.downloader.autoDelete?((0,te.wg)(),(0,te.j4)(g,{key:5,label:"删种规则",name:"deleteRules",extra:"删种规则, 种子状态符合其中一个时即触发删除种子操作",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(x,{style:{width:"100%"},value:s.downloader.deleteRules,"onUpdate:value":t[27]||(t[27]=e=>s.downloader.deleteRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(_,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.deleteRules,(e=>((0,te.wg)(),(0,te.j4)(b,{span:8,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(g,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[ul])),_:1}),(0,te.Wm)(c,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[28]||(t[28]=e=>i.clearDownloader())},{default:(0,te.w5)((()=>[cl])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var pl={data(){const e=[{title:"ID",dataIndex:"id",width:18,sorter:(e,t)=>e.id.localeCompare(t.id),fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),defaultSortOrder:"ascend",width:20},{title:"启用",dataIndex:"enable",width:15},{title:"URL",dataIndex:"clientUrl",width:40},{title:"自动删种",dataIndex:"autoDelete",width:15},{title:"状态",dataIndex:"status",width:15},{title:"操作",width:28}];return{columns:e,downloaders:[],notifications:[],deleteRules:[],downloader:{},defaultDownloader:{id:"",alias:"",host:"",username:"",password:"",port:"",enable:!0,pushNotify:!1,pushMonitor:!1,spaceAlarm:!1,firstLastPiecePrio:!0,cron:"*/4 * * * * *",autoDeleteCron:"* * * * *",autoReannounce:!0,autoDelete:!0,deleteRules:[]},loading:!0,registCode:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data}catch(e){this.$message().error(e.message)}},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data}catch(e){this.$message().error(e.message)}},async listDeleteRule(){try{const e=await this.$api().deleteRule.list();this.deleteRules=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},async modifyDownloader(){try{await this.$api().downloader.modify((0,Jt.Z)({},this.downloader)),this.$message().success((this.downloader.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listDownloader()),1e3),this.clearDownloader()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.downloader=(0,Jt.Z)({},e)},cloneClick(e){this.downloader=(0,Jt.Z)((0,Jt.Z)({},e),{},{deleteRules:[...e.deleteRules]}),this.downloader.id=null,this.downloader.alias=this.downloader.alias+"-克隆"},async deleteDownloader(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().downloader.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listDownloader()}catch(t){this.$message().error(t.message)}},async enableDownloader(e){try{await this.$api().downloader.modify((0,Jt.Z)({},e)),this.$message().success("修改成功, 列表正在刷新..."),setTimeout((()=>this.listDownloader()),1e3),this.clearDownloader()}catch(t){this.$message().error(t.message)}},goto(e){window.open(`/proxy/client/${e.id}/`)},gotoLog(e){window.open(`/tool/clientLog?id=${e.id}`)},clearDownloader(){this.downloader=(0,Jt.Z)((0,Jt.Z)({},this.defaultDownloader),{},{deleteRules:[]})}},async mounted(){this.clearDownloader(),this.listDeleteRule(),this.listNotification(),this.listDownloader()}};const wl=(0,oe.Z)(pl,[["render",ml],["__scopeId","data-v-2368822e"]]);var hl=wl;const fl=e=>((0,te.dD)("data-v-66c04a91"),e=e(),(0,te.Cn)(),e),gl=fl((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"站点",-1))),yl={class:"site"},vl=fl((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"站点列表",-1))),kl=(0,te.Uk)(" 操作 "),bl=["src"],_l={style:{}},xl=fl((()=>(0,te._)("span",{style:{color:"green","font-weight":"bold"}},"↑",-1))),Wl=fl((()=>(0,te._)("br",null,null,-1))),Ul=fl((()=>(0,te._)("span",{style:{color:"red","font-weight":"bold"}},"↓",-1))),Cl=fl((()=>(0,te._)("span",{style:{color:"green","font-weight":"bold"}},"↑",-1))),zl=fl((()=>(0,te._)("br",null,null,-1))),$l=fl((()=>(0,te._)("span",{style:{color:"red","font-weight":"bold"}},"↓",-1))),Il=fl((()=>(0,te._)("span",{style:{color:"green","font-weight":"bold"}},"↑",-1))),Sl=fl((()=>(0,te._)("br",null,null,-1))),Rl={key:6},Dl=["onClick"],jl=["onClick"],ql=(0,te.Uk)(" 操作 "),Ml=["onClick"],Pl=(0,te.Uk)("删除"),Tl=fl((()=>(0,te._)("a",null,"删除",-1))),Hl=fl((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑站点",-1))),Al={style:{"text-align":"left"}},Ol=(0,te.Uk)("启用"),Yl=(0,te.Uk)("拉取远程种子"),Ll=(0,te.Uk)("搜索 R18 分区"),Kl=(0,te.Uk)("应用 | 完成"),Bl=(0,te.Uk)("清空");function Nl(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("fa"),r=(0,te.up)("a-menu-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-popover"),c=(0,te.up)("a-menu"),m=(0,te.up)("a-dropdown"),p=(0,te.up)("a-table"),w=(0,te.up)("a-select-option"),h=(0,te.up)("a-select"),f=(0,te.up)("a-form-item"),g=(0,te.up)("a-checkbox"),y=(0,te.up)("a-input"),v=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[gl,(0,te.Wm)(o),(0,te._)("div",yl,[(0,te.Wm)(p,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.siteList,pagination:!1,scroll:{x:1440}},{title:(0,te.w5)((()=>[vl])),headerCell:(0,te.w5)((({column:e})=>["操作"===e.title?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[kl,(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{onClick:t[0]||(t[0]=e=>i.refresh())},"刷新所有")],64)):(0,te.kq)("",!0)])),bodyCell:(0,te.w5)((({column:a,record:l})=>["name"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te._)("img",{src:`/assets/icons/${l.name}.ico`,style:{width:"32px",height:"32px","border-radius":"16px"}},null,8,bl),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("span",_l,(0,De.zw)(l.name),1)],64)):(0,te.kq)("",!0),"data"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[xl,(0,te.Uk)(" "+(0,De.zw)(e.$formatSize(l.upload))+" ",1),Wl,Ul,(0,te.Uk)(" "+(0,De.zw)(e.$formatSize(l.download)),1)],64)):(0,te.kq)("",!0),"conn"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[Cl,(0,te.Uk)(" "+(0,De.zw)(l.seeding)+" ",1),zl,$l,(0,te.Uk)(" "+(0,De.zw)(l.leeching),1)],64)):(0,te.kq)("",!0),"seedingSize"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:3},[Il,(0,te.Uk)(" "+(0,De.zw)(e.$formatSize(l.seedingSize)),1)],64)):(0,te.kq)("",!0),"updateTime"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:4},[(0,te.Uk)((0,De.zw)(e.$moment(1e3*l.updateTime).format("MM-DD HH:mm:ss")),1)],64)):(0,te.kq)("",!0),"username"===a.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:5},[(0,te.Uk)((0,De.zw)(l.username)+" ",1),Sl,(0,te.Uk)(" "+(0,De.zw)(l.uid),1)],64)):(0,te.kq)("",!0),"操作"===a.title?((0,te.wg)(),(0,te.iD)("span",Rl,[(0,te._)("a",{onClick:e=>i.goto(l)},"打开",8,Dl),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{onClick:e=>i.refresh(l)},"刷新",8,jl),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(m,null,{overlay:(0,te.w5)((()=>[(0,te.Wm)(c,null,{default:(0,te.w5)((()=>[(0,te.Wm)(r,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.modifyClick(l)},"编辑",8,Ml)])),_:2},1024),(0,te.Wm)(r,{danger:""},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary",danger:"",onClick:e=>i.deleteSite(l),size:"small"},{default:(0,te.w5)((()=>[Pl])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[Tl])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:(0,te.w5)((()=>[(0,te._)("a",{class:"ant-dropdown-link",onClick:t[1]||(t[1]=(0,ee.iM)((()=>{}),["prevent"]))},[ql,(0,te.Wm)(n,{icon:["fas","chevron-down"]})])])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),Hl,(0,te._)("div",Al,[(0,te.Wm)(v,{labelAlign:"right",labelWrap:!0,model:s.site,size:"small",onFinish:i.modifySite,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{label:"站点",name:"name",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.site.name,"onUpdate:value":t[2]||(t[2]=e=>s.site.name=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites,(e=>((0,te.wg)(),(0,te.j4)(w,{disabled:s.siteList.filter((t=>t.name===e))[0],key:e,value:e},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e),1)])),_:2},1032,["disabled","value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(f,{label:"启用",name:"enable",extra:"选择是否启用站点",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{disabled:s.site.used,checked:s.site.enable,"onUpdate:checked":t[3]||(t[3]=e=>s.site.enable=e)},{default:(0,te.w5)((()=>[Ol])),_:1},8,["disabled","checked"])])),_:1}),(0,te.Wm)(f,{label:"更新周期",name:"cron",extra:"Crontab 表达式, 默认每天的 11:55 与 23:55 各更新一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{size:"small",value:s.site.cron,"onUpdate:value":t[4]||(t[4]=e=>s.site.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"优先级",name:"priority",extra:"选种规则内的站点优先级, 默认为 0"},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{size:"small",value:s.site.priority,"onUpdate:value":t[5]||(t[5]=e=>s.site.priority=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{label:"拉取远程种子",name:"pullRemoteTorrent",extra:"豆瓣任务启动超级模式时, 将使用本站点拉取远程种子",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{checked:s.site.pullRemoteTorrent,"onUpdate:checked":t[6]||(t[6]=e=>s.site.pullRemoteTorrent=e)},{default:(0,te.w5)((()=>[Yl])),_:1},8,["checked"])])),_:1}),"MTeam"===s.site.name?((0,te.wg)(),(0,te.j4)(f,{key:0,label:"搜索 R18 分区",name:"adult",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{checked:s.site.adult,"onUpdate:checked":t[7]||(t[7]=e=>s.site.adult=e)},{default:(0,te.w5)((()=>[Ll])),_:1},8,["checked"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(f,{label:"Cookie",name:"cookie",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{size:"small",value:s.site.cookie,"onUpdate:value":t[8]||(t[8]=e=>s.site.cookie=e)},null,8,["value"])])),_:1}),(0,te.Wm)(f,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Kl])),_:1}),(0,te.Wm)(d,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[9]||(t[9]=e=>i.clearSite())},{default:(0,te.w5)((()=>[Bl])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Zl={data(){const e=[{title:"站点",dataIndex:"name",width:24,sorter:(e,t)=>e.name.localeCompare(t.name),fixed:!0},{title:"用户名 / UID",dataIndex:"username",sorter:(e,t)=>e.username.localeCompare(t.username),width:20},{title:"数据",dataIndex:"data",sorter:(e,t)=>e.upload-t.upload,width:20},{title:"做种体积",dataIndex:"seedingSize",sorter:(e,t)=>e.seedingSize-t.seedingSize,width:20},{title:"连接",dataIndex:"conn",sorter:(e,t)=>e.seeding-t.seeding,width:16},{title:"优先级",dataIndex:"priority",sorter:(e,t)=>+e.priority-+t.priority,width:12},{title:"上次刷新时间",dataIndex:"updateTime",sorter:(e,t)=>e.updateTime-t.updateTime,width:40},{title:"操作",width:40}];return{refreshState:"刷新全部站点",columns:e,defaultSite:{name:"",cookie:"",cron:"55 11,23 * * *",enable:!0,priority:"0",adult:!1,pullRemoteTorrent:!1},site:{},sites:[],siteInfo:{},displayAll:!0,loading:!0,siteList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listSite(){try{const e=await this.$api().site.list();this.siteInfo=e,this.loadSite()}catch(e){this.$message().error(e.message)}},async listSupportSite(){try{const e=await this.$api().site.listSite({support:1});this.sites=e.data.sort()}catch(e){this.$message().error(e.message)}},loadSite(){this.siteList=[];const e=this.siteInfo.data.siteList;for(const t of e)t.id=t.name,t.display=void 0===t.display||t.display,t.priority=t.priority||0,this.siteList.push((0,Jt.Z)({},t))},goto(e){window.open(`/proxy/site/${e.name}/`)},async modifySite(){try{await this.$api().site.modify((0,Jt.Z)({},this.site)),this.$message().success((this.site.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listSite()),1e3),this.clearSite()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.site=(0,Jt.Z)({},e)},async deleteSite(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().site.delete(e.name),this.$message().success("删除成功, 列表正在刷新..."),await this.listSite()}catch(t){this.$message().error(t.message)}},async clearSite(){this.site=(0,Jt.Z)({},this.defaultSite)},async refresh(e){try{await this.$api().site.refresh(null===e||void 0===e?void 0:e.name),this.$message().success("刷新成功, 列表正在刷新..."),setTimeout((()=>this.listSite()),1e3)}catch(t){this.$message().error(t.message)}this.listSite()}},async mounted(){this.site=(0,Jt.Z)({},this.defaultSite),await this.listSupportSite(),await this.listSite()}};const El=(0,oe.Z)(Zl,[["render",Nl],["__scopeId","data-v-66c04a91"]]);var Fl=El;const Vl=e=>((0,te.dD)("data-v-68e1df86"),e=e(),(0,te.Cn)(),e),Gl=Vl((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"通知工具",-1))),Jl={class:"notification"},Xl=Vl((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"通知工具列表",-1))),Ql=(0,te.Uk)("启用"),es=(0,te.Uk)("禁用"),ts=(0,te.Uk)("正常"),as=(0,te.Uk)("异常"),ls={key:2},ss=["onClick"],is=(0,te.Uk)("删除"),os=Vl((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),ns=Vl((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑通知工具",-1))),rs={style:{"text-align":"left"}},ds=(0,te.Uk)("Telegram"),us=(0,te.Uk)("WeChat"),cs=(0,te.Uk)("Slack"),ms=(0,te.Uk)("应用 | 完成"),ps=(0,te.Uk)("清空");function ws(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-tag"),r=(0,te.up)("a-button"),d=(0,te.up)("a-popover"),u=(0,te.up)("a-table"),c=(0,te.up)("a-input"),m=(0,te.up)("a-form-item"),p=(0,te.up)("a-select-option"),w=(0,te.up)("a-select"),h=(0,te.up)("a-checkbox"),f=(0,te.up)("a-col"),g=(0,te.up)("a-row"),y=(0,te.up)("a-checkbox-group"),v=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Gl,(0,te.Wm)(o),(0,te._)("div",Jl,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.notifications,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[Xl])),bodyCell:(0,te.w5)((({column:e,record:t})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[t.enable?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[Ql])),_:1})):(0,te.kq)("",!0),t.enable?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[es])),_:1}))],64)):(0,te.kq)("",!0),"status"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[t.status?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[ts])),_:1})):(0,te.kq)("",!0),t.status?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[as])),_:1}))],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",ls,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,ss),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(d,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.deleteNotification(t),size:"small"},{default:(0,te.w5)((()=>[is])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[os])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),ns,(0,te._)("div",rs,[(0,te.Wm)(v,{labelAlign:"right",labelWrap:!0,model:s.notification,size:"small",onFinish:i.modifyNotification,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{label:"别名",name:"alias",extra:"给通知工具取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.alias,"onUpdate:value":t[0]||(t[0]=e=>s.notification.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"错误推送上限",name:"maxErrorCount",extra:"单个周期内推送错误信息次数上限, 仅计算错误信息推送, 留空为 100"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.maxErrorCount,"onUpdate:value":t[1]||(t[1]=e=>s.notification.maxErrorCount=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"重置周期",name:"clearCountCron",extra:"Crontab 表达式, 在每次触发时重置推送错误信息次数为 0, 留空为 0 * * * *"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.clearCountCron,"onUpdate:value":t[2]||(t[2]=e=>s.notification.clearCountCron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.notification.type,"onUpdate:value":t[3]||(t[3]=e=>s.notification.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{value:"telegram"},{default:(0,te.w5)((()=>[ds])),_:1}),(0,te.Wm)(p,{value:"wechat"},{default:(0,te.w5)((()=>[us])),_:1}),(0,te.Wm)(p,{value:"slack"},{default:(0,te.w5)((()=>[cs])),_:1})])),_:1},8,["value"])])),_:1}),"wechat"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:0,label:"企业 ID",name:"corpid",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.corpid,"onUpdate:value":t[4]||(t[4]=e=>s.notification.corpid=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"wechat"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:1,label:"Agent ID",name:"agentid",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.agentid,"onUpdate:value":t[5]||(t[5]=e=>s.notification.agentid=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"wechat"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:2,label:"Secret",name:"corpsecret",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.corpsecret,"onUpdate:value":t[6]||(t[6]=e=>s.notification.corpsecret=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"wechat"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:3,label:"ProxyKey",name:"proxyKey"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.proxyKey,"onUpdate:value":t[7]||(t[7]=e=>s.notification.proxyKey=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"telegram"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:4,label:"机器人 Token",name:"telegramBotToken",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.telegramBotToken,"onUpdate:value":t[8]||(t[8]=e=>s.notification.telegramBotToken=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"telegram"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:5,label:"频道 ID",name:"telegramChannel",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.telegramChannel,"onUpdate:value":t[9]||(t[9]=e=>s.notification.telegramChannel=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"slack"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:6,label:"Webhook",name:"slackWebhook",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.slackWebhook,"onUpdate:value":t[10]||(t[10]=e=>s.notification.slackWebhook=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),"slack"===s.notification.type?((0,te.wg)(),(0,te.j4)(m,{key:7,label:"Token",name:"slackToken",extra:"如果仅使用推送通知功能，可随意填写内容",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.notification.slackToken,"onUpdate:value":t[11]||(t[11]=e=>s.notification.slackToken=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(m,{label:"推送类型",name:"pushType",extra:"只有已被勾选的项目才会推送",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{style:{width:"100%"},value:s.notification.pushType,"onUpdate:value":t[12]||(t[12]=e=>s.notification.pushType=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(g,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.pushType,(e=>((0,te.wg)(),(0,te.j4)(f,{span:8,key:e.key},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{value:e.key,"onUpdate:value":t=>e.key=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.value),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[ms])),_:1}),(0,te.Wm)(r,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[13]||(t[13]=e=>i.clearNotification())},{default:(0,te.w5)((()=>[ps])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var hs={data(){const e=[{title:"ID",dataIndex:"id",width:18,sorter:(e,t)=>e.id.localeCompare(t.id),fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),defaultSortOrder:"ascend",width:30},{title:"推送类型",dataIndex:"type",width:30},{title:"操作",width:20}];return{columns:e,notifications:[],notification:[],pushType:[{key:"rssError",value:"Rss 失败"},{key:"scrapeError",value:"抓取免费或 HR 失败"},{key:"addTorrent",value:"添加种子"},{key:"addTorrentError",value:"添加种子失败"},{key:"rejectTorrent",value:"拒绝种子"},{key:"deleteTorrent",value:"删除种子"},{key:"deleteTorrentError",value:"删除种子失败"},{key:"reannounceTorrent",value:"重新汇报种子"},{key:"reannounceTorrentError",value:"重新汇报种子失败"},{key:"connectClient",value:"下载器已连接"},{key:"clientLoginError",value:"下载器登陆失败"},{key:"getMaindataError",value:"获取下载器信息失败"},{key:"spaceAlarm",value:"空间警告"},{key:"plexWebhook",value:"Plex 通知"},{key:"embyWebhook",value:"Emby 通知"},{key:"jellyfinWebhook",value:"Jellyfin 通知"},{key:"selectWish",value:"选择想看 (微信交互)"},{key:"addDoubanTorrent",value:"添加追剧种子"},{key:"addDoubanTorrentError",value:"添加追剧种子失败"},{key:"torrentFinish",value:"追剧种子已完成"},{key:"selectTorrentError",value:"追剧搜索种子失败"},{key:"addDouban",value:"添加追剧任务"},{key:"startRefreshWish",value:"刷新追剧任务"},{key:"startRefreshWishError",value:"刷新追剧任务失败"},{key:"addDoubanWish",value:"添加追剧项目"},{key:"scrapeTorrent",value:"识别种子"},{key:"scrapeTorrentFailed",value:"识别种子失败"},{key:"finish",value:"追剧种子完成"},{key:"watch",value:"监控分类"}],defaultNotification:{id:"",pushType:[]},loading:!0,registCode:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data}catch(e){this.$message().error(e.message)}},async modifyNotification(){try{await this.$api().notification.modify((0,Jt.Z)({},this.notification)),this.$message().success((this.notification.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listNotification()),1e3),this.clearNotification()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.notification=(0,Jt.Z)((0,Jt.Z)({},e),{},{pushType:this.pushType.map((e=>e.key)).filter((t=>-1!==e.pushType.indexOf(t)))})},clearNotification(){this.notification=(0,Jt.Z)((0,Jt.Z)({},this.defaultNotification),{},{pushType:[]})},async deleteNotification(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().notification.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listNotification()}catch(t){this.$message().error(t.message)}}},async mounted(){this.clearNotification(),await this.listNotification()}};const fs=(0,oe.Z)(hs,[["render",ws],["__scopeId","data-v-68e1df86"]]);var gs=fs;const ys=e=>((0,te.dD)("data-v-46da918a"),e=e(),(0,te.Cn)(),e),vs=ys((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"服务器数据",-1))),ks={class:"server-metric"},bs=ys((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"服务器数据",-1))),_s=["onClick"],xs=ys((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"历史数据统计",-1))),Ws=(0,te.Uk)("时"),Us=(0,te.Uk)("日"),Cs=(0,te.Uk)("月"),zs=(0,te.Uk)("五分钟");function $s(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-table"),r=(0,te.up)("a-select-option"),d=(0,te.up)("a-select");return(0,te.wg)(),(0,te.iD)(te.HY,null,[vs,(0,te.Wm)(o),(0,te._)("div",ks,[(0,te.Wm)(n,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.servers,scroll:{x:56}},{title:(0,te.w5)((()=>[bs])),bodyCell:(0,te.w5)((({column:t,record:a})=>{var l,s;return["alias"===t.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:0,onClick:e=>i.expandVnstat(a)},(0,De.zw)(a.alias),9,_s)):(0,te.kq)("",!0),"netSpeed"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(e.$formatSize((null===(l=a.netSpeed)||void 0===l?void 0:l.upload)||0))+"/s / "+(0,De.zw)(e.$formatSize((null===(s=a.netSpeed)||void 0===s?void 0:s.download)||0))+"/s ",1)],64)):(0,te.kq)("",!0),"cpuUse"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)((a.cpuUse||0).toFixed(2))+"% ",1)],64)):(0,te.kq)("",!0)]})),_:1},8,["style","columns","loading","data-source"]),s.vnstatData[s.period]?((0,te.wg)(),(0,te.j4)(n,{key:0,style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.vnstatColumns,size:"small",pagination:!1,"data-source":s.vnstatData[s.period],scroll:{x:88}},{title:(0,te.w5)((()=>[xs])),headerCell:(0,te.w5)((({column:e})=>["date"===e.dataIndex?((0,te.wg)(),(0,te.j4)(d,{key:0,size:"small",value:s.period,"onUpdate:value":t[0]||(t[0]=e=>s.period=e),style:{width:"100%"}},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{value:"hour"},{default:(0,te.w5)((()=>[Ws])),_:1}),(0,te.Wm)(r,{value:"day"},{default:(0,te.w5)((()=>[Us])),_:1}),(0,te.Wm)(r,{value:"month"},{default:(0,te.w5)((()=>[Cs])),_:1}),(0,te.Wm)(r,{value:"fiveminute"},{default:(0,te.w5)((()=>[zs])),_:1})])),_:1},8,["value"])):(0,te.kq)("",!0)])),bodyCell:(0,te.w5)((({column:t,record:a})=>["date"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(i.formatTime(a)),1)],64)):(0,te.kq)("",!0),"tx"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.tx||0)),1)],64)):(0,te.kq)("",!0),"rx"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.rx||0)),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"])):(0,te.kq)("",!0)])],64)}var Is={data(){const e=[{title:"服务器",dataIndex:"alias",defaultSortOrder:"ascend",width:12,fixed:!0,sorter:(e,t)=>e.alias.localeCompare(t.alias)},{title:"CPU 占用",dataIndex:"cpuUse",sorter:(e,t)=>e.cpuUse-t.cpuUse,width:12},{title:"实时上传/下载",dataIndex:"netSpeed",sorter:(e,t)=>e.netSpeed.upload-t.netSpeed.upload,width:32}],t=[{title:"日期",dataIndex:"date",width:24,fixed:!0},{title:"上传",dataIndex:"tx",width:32},{title:"下载",dataIndex:"rx",width:32}];return{loading:!0,columns:e,vnstatColumns:t,servers:[],period:"day",vnstatData:{},netSpeed:{},cpuUse:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},formatTime(e){return"string"===typeof e.date?e.date:`${e.date.year}-${e.date.month<10?"0"+e.date.month:e.date.month}`+(e.date.day?`-${e.date.day<10?"0"+e.date.day:e.date.day}`:"")+(e.time?` ${e.time.hour<10?"0"+e.time.hour:e.time.hour}:${e.time.minute<10?"0"+e.time.minute:e.time.minute}`:"")},async listServer(){this.loading=!0;try{this.servers=(await this.$api().server.list()).data}catch(e){await this.$message().error(e.message)}this.loading=!1},async getNetSpeed(){try{this.netSpeed=(await this.$api().server.netSpeed()).data;for(const a of this.servers){var e,t;a.netSpeed={upload:(null===(e=this.netSpeed[a.id])||void 0===e?void 0:e.sort(((e,t)=>t.txBytes-e.txBytes))[0].txBytes)||0,download:(null===(t=this.netSpeed[a.id])||void 0===t?void 0:t.sort(((e,t)=>t.txBytes-e.txBytes))[0].rxBytes)||0}}}catch(a){await this.$message().error(a.message)}},async getCpuUse(){try{this.cpuUse=(await this.$api().server.cpuUse()).data;for(const t of this.servers){var e;t.cpuUse=100-(null===(e=this.cpuUse[t.id])||void 0===e?void 0:e.all.idle)||0}}catch(t){await this.$message().error(t.message)}},async expandVnstat(e){try{this.period="day",this.vnstat=(await this.$api().server.vnstat(e.id)).data}catch(a){return void await this.$message().error(a.message)}for(const l of Object.keys(this.vnstat))this.vnstat[l].interfaces=this.vnstat[l].interfaces.sort(((e,t)=>t.traffic.total.rx-e.traffic.total.rx));this.vnstat.day.interfaces[0].traffic.day=this.vnstat.day.interfaces[0].traffic.day.sort(((e,t)=>this.$moment(this.formatTime(t)).unix()-this.$moment(this.formatTime(e)).unix())),this.vnstat.month.interfaces[0].traffic.month=this.vnstat.month.interfaces[0].traffic.month.sort(((e,t)=>this.$moment(this.formatTime(t)).unix()-this.$moment(this.formatTime(e)).unix())),this.vnstat.fiveminute.interfaces[0].traffic.fiveminute=this.vnstat.fiveminute.interfaces[0].traffic.fiveminute.sort(((e,t)=>this.$moment(this.formatTime(t)).unix()-this.$moment(this.formatTime(e)).unix())),this.vnstat.hour.interfaces[0].traffic.hour=this.vnstat.hour.interfaces[0].traffic.hour.sort(((e,t)=>this.$moment(this.formatTime(t)).unix()-this.$moment(this.formatTime(e)).unix()));const t=this.vnstat.day.interfaces[0].traffic.day[0];if(t){const e=(0,Jt.Z)({},t);e.id+=1,e.date="预计今日",e.rx=parseInt(3600*e.rx*24/this.$moment().diff(this.$moment().startOf("day"),"seconds")),e.tx=parseInt(3600*e.tx*24/this.$moment().diff(this.$moment().startOf("day"),"seconds")),this.vnstat.day.interfaces[0].traffic.day.unshift(e)}this.vnstatData={day:this.vnstat.day.interfaces[0].traffic.day,month:this.vnstat.month.interfaces[0].traffic.month,fiveminute:this.vnstat.fiveminute.interfaces[0].traffic.fiveminute,hour:this.vnstat.hour.interfaces[0].traffic.hour}}},async mounted(){this.listServer(),this.getNetSpeed(),this.getCpuUse(),this.interval=setInterval((()=>{this.getNetSpeed(),this.getCpuUse()}),5e3)},beforeUnmount(){clearInterval(this.interval)}};const Ss=(0,oe.Z)(Is,[["render",$s],["__scopeId","data-v-46da918a"]]);var Rs=Ss;const Ds=e=>((0,te.dD)("data-v-62df2536"),e=e(),(0,te.Cn)(),e),js=Ds((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"下载器数据",-1))),qs={class:"downloader-metric"},Ms=Ds((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"下载器数据",-1))),Ps=Ds((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"今日数据",-1))),Ts=Ds((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"累计统计",-1)));function Hs(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[js,(0,te.Wm)(o),(0,te._)("div",qs,[(0,te.Wm)(n,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.downloaders,scroll:{x:640}},{title:(0,te.w5)((()=>[Ms])),bodyCell:(0,te.w5)((({column:t,record:a})=>["speed"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.uploadSpeed))+"/s / "+(0,De.zw)(e.$formatSize(a.downloadSpeed))+"/s ",1)],64)):(0,te.kq)("",!0),"seedingCount"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(a.seedingCount+" / "+a.leechingCount),1)],64)):(0,te.kq)("",!0),"allTimeUpload"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.allTimeUpload))+" / "+(0,De.zw)(e.$formatSize(a.allTimeDownload)),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source"]),(0,te.Wm)(o),(0,te.Wm)(n,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.trackerColumns,size:"small",loading:s.loading,"data-source":s.runInfo.perTrackerToday.filter((e=>e.tracker)),scroll:{x:320}},{title:(0,te.w5)((()=>[Ps])),bodyCell:(0,te.w5)((({column:t,record:a})=>[-1!==["uploaded","downloaded"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source"]),(0,te.Wm)(o),(0,te.Wm)(n,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.trackerColumns,size:"small",loading:s.loading,"data-source":s.runInfo.perTracker.filter((e=>e.tracker)),scroll:{x:320}},{title:(0,te.w5)((()=>[Ts])),bodyCell:(0,te.w5)((({column:t,record:a})=>[-1!==["uploaded","downloaded"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source"])])],64)}var As={data(){const e=[{title:"别名",dataIndex:"alias",width:32,defaultSortOrder:"ascend",fixed:!0,sorter:(e,t)=>e.alias.localeCompare(t.alias)},{title:"实时速度",dataIndex:"speed",width:48,sorter:(e,t)=>e.uploadSpeed-t.uploadSpeed},{title:"当前任务",dataIndex:"seedingCount",width:48,sorter:(e,t)=>e.seedingCount-t.seedingCount},{title:"累计数据",dataIndex:"allTimeUpload",width:64,sorter:(e,t)=>e.allTimeUpload-t.allTimeUpload}],t=[{title:"tracker",dataIndex:"tracker",width:140,fixed:!0,sorter:(e,t)=>e.tracker.localeCompare(t.tracker)},{title:"上传",dataIndex:"uploaded",width:90,sorter:(e,t)=>e.uploaded-t.uploaded},{title:"下载",dataIndex:"downloaded",width:90,sorter:(e,t)=>e.downloaded-t.downloaded}];return{loading:!1,trackerColumns:t,columns:e,downloaders:[],runInfo:{perTracker:[],perTrackerToday:[]}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getRunInfo(){try{const e=await this.$api().setting.getRunInfo();this.runInfo=e.data}catch(e){await this.$message().error(e.message)}},async listDownloader(){try{const e=(await this.$api().downloader.listMainInfo()).data;this.downloaders=e}catch(e){await this.$message().error(e.message)}}},async mounted(){this.listDownloader(),this.getRunInfo(),this.interval=setInterval((()=>{this.listDownloader()}),5e3)},beforeUnmount(){clearInterval(this.interval)}};const Os=(0,oe.Z)(As,[["render",Hs],["__scopeId","data-v-62df2536"]]);var Ys=Os;const Ls=e=>((0,te.dD)("data-v-f9e5ed80"),e=e(),(0,te.Cn)(),e),Ks={style:{"font-size":"24px","font-weight":"bold"}},Bs=(0,te.Uk)(" 站点数据 "),Ns=(0,te.Uk)("卡片"),Zs=(0,te.Uk)("列表"),Es=(0,te.Uk)("总览"),Fs={key:0,class:"site-metric",style:{"text-align":"center"}},Vs={class:"site-name"},Gs=["src"],Js={style:{}},Xs={key:0,class:"site-user"},Qs={style:{}},ei=Ls((()=>(0,te._)("br",null,null,-1))),ti={style:{}},ai={class:"site-data"},li={style:{"font-weight":"bold",color:"green"}},si=Ls((()=>(0,te._)("span",{style:{}}," 上传",-1))),ii={style:{}},oi=Ls((()=>(0,te._)("br",null,null,-1))),ni={style:{"font-weight":"bold",color:"red"}},ri=Ls((()=>(0,te._)("span",{style:{}}," 下载",-1))),di={style:{}},ui=Ls((()=>(0,te._)("br",null,null,-1))),ci={style:{"font-weight":"bold",color:"green"}},mi=Ls((()=>(0,te._)("span",{style:{}}," 连接",-1))),pi={style:{}},wi=Ls((()=>(0,te._)("br",null,null,-1))),hi={style:{"font-weight":"bold",color:"green"}},fi=Ls((()=>(0,te._)("span",{style:{}}," 做种",-1))),gi={style:{}},yi={class:"site-inc-data"},vi={style:{"font-weight":"bold",color:"green"}},ki=Ls((()=>(0,te._)("span",{style:{}}," 昨日上传",-1))),bi={style:{}},_i=Ls((()=>(0,te._)("br",null,null,-1))),xi={style:{"font-weight":"bold",color:"red"}},Wi=Ls((()=>(0,te._)("span",{style:{}}," 昨日下载",-1))),Ui={style:{}},Ci=Ls((()=>(0,te._)("br",null,null,-1))),zi={style:{"font-weight":"bold",color:"green"}},$i=Ls((()=>(0,te._)("span",{style:{}}," 本周上传",-1))),Ii={style:{}},Si=Ls((()=>(0,te._)("br",null,null,-1))),Ri={style:{"font-weight":"bold",color:"red"}},Di=Ls((()=>(0,te._)("span",{style:{}}," 本周下载",-1))),ji={style:{}},qi=Ls((()=>(0,te._)("br",null,null,-1))),Mi={style:{"font-weight":"bold",color:"green"}},Pi=Ls((()=>(0,te._)("span",{style:{}}," 本月上传",-1))),Ti={style:{}},Hi=Ls((()=>(0,te._)("br",null,null,-1))),Ai={style:{"font-weight":"bold",color:"red"}},Oi=Ls((()=>(0,te._)("span",{style:{}}," 本月下载",-1))),Yi={style:{}},Li={key:1,class:"site-metric"},Ki=Ls((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"站点数据",-1))),Bi=["src"],Ni={style:{}},Zi=Ls((()=>(0,te._)("br",null,null,-1))),Ei={key:2,class:"site-metric",style:{"text-align":"center"}},Fi={style:{"text-align":"left",margin:"24px"}},Vi=(0,te.Uk)("保存"),Gi=["src"];function Ji(e,t,a,l,s,i){const o=(0,te.up)("a-radio"),n=(0,te.up)("a-radio-group"),r=(0,te.up)("a-divider"),d=(0,te.up)("fa"),u=(0,te.up)("a-table"),c=(0,te.up)("a-checkbox"),m=(0,te.up)("a-col"),p=(0,te.up)("a-row"),w=(0,te.up)("a-checkbox-group"),h=(0,te.up)("a-form-item"),f=(0,te.up)("a-input"),g=(0,te.up)("a-button"),y=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[(0,te._)("div",Ks,[Bs,(0,te.Wm)(n,{value:s.siteSetting.theme,"onUpdate:value":t[0]||(t[0]=e=>s.siteSetting.theme=e),onChange:i.handleRatioChange,name:"theme"},{default:(0,te.w5)((()=>[(0,te.Wm)(o,{value:"card"},{default:(0,te.w5)((()=>[Ns])),_:1}),(0,te.Wm)(o,{value:"list"},{default:(0,te.w5)((()=>[Zs])),_:1}),(0,te.Wm)(o,{value:"overview"},{default:(0,te.w5)((()=>[Es])),_:1})])),_:1},8,["value","onChange"])]),(0,te.Wm)(r),"card"===s.siteSetting.theme?((0,te.wg)(),(0,te.iD)("div",Fs,[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites,(t=>((0,te.wg)(),(0,te.iD)("div",{key:t.name,style:(0,De.j5)(`display: inline-block; text-align: left; width: ${i.isMobile()?"calc(100% - 24px)":"400px"}; vertical-align: top; margin: 16px;`)},[(0,te._)("div",{class:(0,De.C_)(("total"===t.name?"highlight-3 ":"highlight-2 ")+(i.isMobile()?"item-class-mobile":"item-class-pc"))},[(0,te._)("div",Vs,[(0,te._)("img",{src:t.icon||`/assets/icons/${t.name}.ico`,style:{width:"40px",height:"40px","border-radius":"20px",background:"rgba(255,255,255,0.6)"}},null,8,Gs),(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Js,(0,De.zw)(t.name),1)]),"总计"!==t.name?((0,te.wg)(),(0,te.iD)("div",Xs,[(0,te._)("span",Qs,(0,De.zw)(t.username),1),ei,(0,te._)("span",ti,(0,De.zw)(t.uid),1)])):(0,te.kq)("",!0),(0,te._)("div",ai,[(0,te._)("span",li,[(0,te.Wm)(d,{style:{width:"16px"},icon:["fas","arrow-up"]})]),si,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",ii,(0,De.zw)(e.$formatSize(t.upload)),1),oi,(0,te._)("span",ni,[(0,te.Wm)(d,{style:{width:"16px"},icon:["fas","arrow-down"]})]),ri,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",di,(0,De.zw)(e.$formatSize(t.download)),1),ui,(0,te._)("span",ci,[(0,te.Wm)(d,{style:{width:"16px"},icon:["fas","network-wired"]})]),mi,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",pi,(0,De.zw)(t.seeding)+" / "+(0,De.zw)(t.leeching),1),wi,(0,te._)("span",hi,[(0,te.Wm)(d,{style:{width:"16px"},icon:["fas","hard-drive"]})]),fi,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",gi,(0,De.zw)(e.$formatSize(t.seedingSize)),1)]),(0,te._)("div",yi,[(0,te._)("span",vi,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-up"]})]),ki,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",bi,(0,De.zw)(e.$formatSize(s.siteIncrease.yesterday[t.name].upload)),1),_i,(0,te._)("span",xi,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-down"]})]),Wi,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Ui,(0,De.zw)(e.$formatSize(s.siteIncrease.yesterday[t.name].download)),1),Ci,(0,te._)("span",zi,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-up"]})]),$i,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Ii,(0,De.zw)(e.$formatSize(s.siteIncrease.week[t.name].upload)),1),Si,(0,te._)("span",Ri,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-down"]})]),Di,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",ji,(0,De.zw)(e.$formatSize(s.siteIncrease.week[t.name].download)),1),qi,(0,te._)("span",Mi,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-up"]})]),Pi,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Ti,(0,De.zw)(e.$formatSize(s.siteIncrease.month[t.name].upload)),1),Hi,(0,te._)("span",Ai,[(0,te.Wm)(d,{style:{width:"12px"},icon:["fas","arrow-down"]})]),Oi,(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Yi,(0,De.zw)(e.$formatSize(s.siteIncrease.month[t.name].download)),1)])],2)],4)))),128))])):(0,te.kq)("",!0),"list"===s.siteSetting.theme?((0,te.wg)(),(0,te.iD)("div",Li,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.sites,pagination:!1,scroll:{x:1440,y:s.scrollHeight}},{title:(0,te.w5)((()=>[Ki])),bodyCell:(0,te.w5)((({column:t,record:a})=>["name"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te._)("img",{src:a.icon||`/assets/icons/${a.name}.ico`,style:{width:"32px",height:"32px","border-radius":"16px"}},null,8,Bi),(0,te.Wm)(r,{type:"vertical"}),(0,te._)("span",Ni,(0,De.zw)(a.name),1)],64)):(0,te.kq)("",!0),-1!==["upload","download"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0),"ratio"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)((a.upload/a.download).toFixed(2)),1)],64)):(0,te.kq)("",!0),-1!==["yesterday","today","week","month"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:3},[(0,te.Uk)(" ↑ "+(0,De.zw)(e.$formatSize(s.siteIncrease[t.dataIndex][a.name].upload))+" ",1),Zi,(0,te.Uk)(" ↓ "+(0,De.zw)(e.$formatSize(s.siteIncrease[t.dataIndex][a.name].download)),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","scroll"])])):(0,te.kq)("",!0),"overview"===s.siteSetting.theme?((0,te.wg)(),(0,te.iD)("div",Ei,[(0,te._)("div",{class:(0,De.C_)("site-overview-"+(i.isMobile()?"mobile":"pc"))},[(0,te._)("div",Fi,[(0,te.Wm)(y,{labelAlign:"right",labelWrap:!0,model:s.setting.siteInfo,size:"small",onFinish:i.modify,labelCol:{span:4},wrapperCol:{span:20},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{label:"隐藏站点",name:"hide",extra:"在图中隐藏选中的站点"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{style:{width:"100%"},value:s.setting.siteInfo.hide,"onUpdate:value":t[1]||(t[1]=e=>s.setting.siteInfo.hide=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(p,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites.filter((e=>"total"!==e.name)),(e=>((0,te.wg)(),(0,te.j4)(m,{span:8,key:e.name},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{value:e.name,"onUpdate:value":t=>e.name=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"隐藏站点名称",name:"hideName",extra:"在图中隐藏选中的站点名称, 仍显示数据信息"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{style:{width:"100%"},value:s.setting.siteInfo.hideName,"onUpdate:value":t[2]||(t[2]=e=>s.setting.siteInfo.hideName=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(p,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites.filter((e=>"total"!==e.name)),(e=>((0,te.wg)(),(0,te.j4)(m,{span:8,key:e.name},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{value:e.name,"onUpdate:value":t=>e.name=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"水印",name:"watermark",extra:"在图中添加水印"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{size:"small",value:s.setting.siteInfo.watermark,"onUpdate:value":t[3]||(t[3]=e=>s.setting.siteInfo.watermark=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{wrapperCol:i.isMobile()?{span:24}:{span:20,offset:4}},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Vi])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])],2),(0,te._)("div",{class:(0,De.C_)("site-overview-"+(i.isMobile()?"mobile":"pc"))},[(0,te._)("img",{src:s.overviewSrc,style:{"max-width":"100%",margin:"0 auto"}},null,8,Gi)],2)])):(0,te.kq)("",!0)],64)}a(85827);var Xi={data(){const e=[{title:"站点",dataIndex:"name",width:48,fixed:!0,sorter:(e,t)=>e.name.localeCompare(t.name)},{title:"上传",dataIndex:"upload",width:48,sorter:(e,t)=>e.upload-t.upload},{title:"下载",dataIndex:"download",width:48,sorter:(e,t)=>e.download-t.download},{title:"分享率",dataIndex:"ratio",width:32,sorter:(e,t)=>e.upload/e.download-t.upload/t.download},{title:"昨日增长",dataIndex:"yesterday",width:48,sorter:(e,t)=>e.yesterday.upload-t.yesterday.upload},{title:"今日增长",dataIndex:"today",width:48,sorter:(e,t)=>e.today.upload-t.today.upload},{title:"周增长",dataIndex:"week",width:48,sorter:(e,t)=>e.week.upload-t.week.upload},{title:"月增长",dataIndex:"month",width:48,sorter:(e,t)=>e.month.upload-t.month.upload}];return{siteSetting:{theme:""},loading:!0,columns:e,overviewSrc:"/api/site/overview",scrollHeight:640,sites:[],siteIncrease:{},setting:{siteInfo:{hide:[],hideName:[],watermark:"vertex"}}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listSite(){this.loading=!0;try{const e=(await this.$api().site.list()).data;this.sites=e.siteList,this.siteIncrease=e.increase,this.sites[1]&&this.sites.unshift({name:"total",icon:"/assets/images/logo.svg",upload:this.sites.map((e=>e.upload)).reduce(((e,t)=>e+t)),download:this.sites.map((e=>e.download)).reduce(((e,t)=>e+t)),seeding:this.sites.map((e=>e.seeding)).reduce(((e,t)=>e+t)),leeching:this.sites.map((e=>e.leeching)).reduce(((e,t)=>e+t)),seedingSize:this.sites.map((e=>e.seedingSize)).reduce(((e,t)=>+e+ +t))});for(const t of this.sites)t.yesterday=this.siteIncrease.yesterday[t.name],t.today=this.siteIncrease.today[t.name],t.week=this.siteIncrease.week[t.name],t.month=this.siteIncrease.month[t.name]}catch(e){await this.$message().error(e.message)}this.loading=!1},async get(){try{const e=(await this.$api().setting.get()).data;this.setting={siteInfo:e.siteInfo||this.setting.siteInfo,trustVertexPanel:e.trustVertexPanel}}catch(e){await this.$message().error(e.message)}},async modify(){try{await this.$api().setting.modify(this.setting),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.overviewSrc="/api/site/overview?_="+Math.random(),this.get()}catch(e){await this.$message().error(e.message)}},async gotoSiteOverview(){window.open("/api/site/overview")},handleRatioChange(){"overview"!==this.siteSetting.theme||this.setting.trustVertexPanel||this.$message().error("未开启信任 Vertex Panel, 总览图可能无法显示")}},async mounted(){this.siteSetting.theme=this.isMobile()?"card":"list",this.listSite(),this.get(),this.scrollHeight=window.innerHeight-32-38-49-41-60-(this.isMobile()?60:0),window.onresize=()=>{this.scrollHeight=window.innerHeight-32-38-49-41-60-(this.isMobile()?60:0)}}};const Qi=(0,oe.Z)(Xi,[["render",Ji],["__scopeId","data-v-f9e5ed80"]]);var eo=Qi;const to=e=>((0,te.dD)("data-v-41e45cbe"),e=e(),(0,te.Cn)(),e),ao=to((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"删种规则",-1))),lo={class:"delete-rule"},so=to((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"删种规则列表",-1))),io={key:1},oo=["onClick"],no=(0,te.Uk)("删除"),ro=to((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),uo=to((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑删种规则",-1))),co={style:{"text-align":"left"}},mo=(0,te.Uk)("暂停种子"),po=(0,te.Uk)("仅删除种子"),wo=(0,te.Uk)("普通"),ho=(0,te.Uk)("JavaScript"),fo=(0,te.Uk)("等于"),go=(0,te.Uk)("大于"),yo=(0,te.Uk)("小于"),vo=(0,te.Uk)("包含"),ko=(0,te.Uk)("包含于"),bo=(0,te.Uk)("不包含"),_o=(0,te.Uk)("不包含于"),xo=(0,te.Uk)("正则匹配"),Wo=(0,te.Uk)("正则不匹配"),Uo=["onClick"],Co=(0,te.Uk)(" 新增条件 "),zo=(0,te.Uk)("应用 | 完成"),$o=(0,te.Uk)("清空"),Io=(0,te.Uk)("上传 / 选中文件大小 的结果"),So=(0,te.Uk)("上传 / 下载 的结果"),Ro=(0,te.Uk)("上传 / 种子总大小 的结果"),Do=(0,te.Uk)("种子的 Tracker 地址的域名部分"),jo=(0,te.Uk)("选项时间到当前时间的差值, 单位为 秒/s"),qo=(0,te.Uk)("单位为 字节 / Byte, 可以使用 * 做乘法运算"),Mo=(0,te.Uk)("单位为 字节/s / Byte/s"),Po=(0,te.Uk)(" 参照 qBittorrent 对种子状态的定义, 主要包含以下几类: "),To=to((()=>(0,te._)("br",null,null,-1))),Ho=(0,te.Uk)(" 上传中: uploading, 下载中: downloading "),Ao=to((()=>(0,te._)("br",null,null,-1))),Oo=(0,te.Uk)(" 等待下载: stalledDL, 做种但无上传: stalledUP "),Yo=to((()=>(0,te._)("br",null,null,-1))),Lo=(0,te.Uk)(" 若想删除等待下载状态下的种子, 应填写 stalledDL "),Ko=to((()=>(0,te._)("br",null,null,-1))),Bo=(0,te.Uk)(" 更多状态请参照 "),No=to((()=>(0,te._)("a",{href:"https://github.com/qbittorrent/qBittorrent/wiki/WebUI-API-(qBittorrent-4.1)#get-torrent-list"},"qBittorrent Wiki",-1))),Zo=(0,te.Uk)("种子 Tracker 列表中由 Tracker 返回的信息"),Eo=(0,te.Uk)(" 当天 0 点到当前时间的秒数, 0 点的时间戳取决于 Vertex 安装环境的时区 "),Fo=to((()=>(0,te._)("br",null,null,-1))),Vo=(0,te.Uk)(" 例: 填写 当前时间大于 8*3600 与 当前时间小于 22*3600, 则只会在当天上午 8 点之后到 22 点之前删种 "),Go=(0,te.Uk)("当前下载器的速度"),Jo=(0,te.Uk)("仅计算已连接上的数量, 也即 qBittorrent WebUI 内括号外的数字"),Xo=(0,te.Uk)("任务的数量, 做种包含上传中状态与做种状态, 下载包含下载中与等待下载状态"),Qo=(0,te.Uk)(" 值部分需以半角逗号 , 为分割符. 如种子分类不包含于 KEEP, KEEP2, KEEP3 三个分类, 则应填写: KEEP,KEEP2,KEEP3 ");function en(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-button"),r=(0,te.up)("a-popover"),d=(0,te.up)("a-table"),u=(0,te.up)("a-input"),c=(0,te.up)("a-form-item"),m=(0,te.up)("a-checkbox"),p=(0,te.up)("a-select-option"),w=(0,te.up)("a-select"),h=(0,te.up)("a-textarea"),f=(0,te.up)("a-form"),g=(0,te.up)("a-descriptions-item"),y=(0,te.up)("a-descriptions");return(0,te.wg)(),(0,te.iD)(te.HY,null,[ao,(0,te.Wm)(o),(0,te._)("div",lo,[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.deleteRuleList,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[so])),bodyCell:(0,te.w5)((({column:e,record:t})=>["type"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)("normal"===t.type?"普通":"JavaScript"),1)],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",io,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,oo),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(r,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary",danger:"",onClick:e=>i.deleteDeleteRule(t),size:"small"},{default:(0,te.w5)((()=>[no])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[ro])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),uo,(0,te._)("div",co,[(0,te.Wm)(f,{labelAlign:"right",labelWrap:!0,model:s.deleteRule,size:"small",onFinish:i.modifyDeleteRule,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{label:"别名",name:"alias",extra:"给删种规则取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.deleteRule.alias,"onUpdate:value":t[0]||(t[0]=e=>s.deleteRule.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"持续时间",name:"fitTime",extra:"符合删种规则的持续时间, 只有到达持续时间之后才会删种, 单位为 秒, 不启用留空, 建议考虑下载器的删种周期一起设置"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.deleteRule.fitTime,"onUpdate:value":t[1]||(t[1]=e=>s.deleteRule.fitTime=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"优先级",name:"priority",extra:"优先级越高的规则越先执行, 默认为 0"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.deleteRule.priority,"onUpdate:value":t[2]||(t[2]=e=>s.deleteRule.priority=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"单次删种数量",name:"deleteNum",extra:"单次删种任务的删除种子的数量, 不同规则间不累计, 留空为单次只删除一个"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.deleteRule.deleteNum,"onUpdate:value":t[3]||(t[3]=e=>s.deleteRule.deleteNum=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"暂停种子",name:"pause",extra:"默认为删除种子，启用该选项后用暂停种子替代，其它流程照旧"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.deleteRule.pause,"onUpdate:checked":t[4]||(t[4]=e=>s.deleteRule.pause=e)},{default:(0,te.w5)((()=>[mo])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(c,{label:"仅删除种子",name:"onlyDeleteTorrent",extra:"仅删除种子，若勾选，删除种子时不删除文件"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.deleteRule.onlyDeleteTorrent,"onUpdate:checked":t[5]||(t[5]=e=>s.deleteRule.onlyDeleteTorrent=e)},{default:(0,te.w5)((()=>[po])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(c,{label:"限制下载速度",name:"limitSpeed",extra:"默认为删除种子，启用该选项后用限制种子下载速度替代, 优先级高于暂停种子及删除种子, 单位为字节每秒 Byte/s, 留空为不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.deleteRule.limitSpeed,"onUpdate:value":t[6]||(t[6]=e=>s.deleteRule.limitSpeed=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.deleteRule.type,"onUpdate:value":t[7]||(t[7]=e=>s.deleteRule.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{value:"normal"},{default:(0,te.w5)((()=>[wo])),_:1}),(0,te.Wm)(p,{value:"javascript"},{default:(0,te.w5)((()=>[ho])),_:1})])),_:1},8,["value"])])),_:1}),"normal"===s.deleteRule.type?((0,te.wg)(),(0,te.j4)(c,{key:0,label:"限制条件",name:"conditions",extra:"关于各个条件的介绍，可以查看下方的说明",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.conditionColumns,size:"small","data-source":s.deleteRule.conditions,pagination:!1,scroll:{x:540}},{bodyCell:(0,te.w5)((({column:e,record:t})=>["key"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:0,size:"small",value:t.key,"onUpdate:value":e=>t.key=e},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.conditionKeys,(e=>((0,te.wg)(),(0,te.j4)(p,{key:e.key,value:e.key},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"compareType"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:1,size:"small",value:t.compareType,"onUpdate:value":e=>t.compareType=e},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{value:"equals"},{default:(0,te.w5)((()=>[fo])),_:1}),(0,te.Wm)(p,{value:"bigger"},{default:(0,te.w5)((()=>[go])),_:1}),(0,te.Wm)(p,{value:"smaller"},{default:(0,te.w5)((()=>[yo])),_:1}),(0,te.Wm)(p,{value:"contain"},{default:(0,te.w5)((()=>[vo])),_:1}),(0,te.Wm)(p,{value:"includeIn"},{default:(0,te.w5)((()=>[ko])),_:1}),(0,te.Wm)(p,{value:"notContain"},{default:(0,te.w5)((()=>[bo])),_:1}),(0,te.Wm)(p,{value:"notIncludeIn"},{default:(0,te.w5)((()=>[_o])),_:1}),(0,te.Wm)(p,{value:"regExp"},{default:(0,te.w5)((()=>[xo])),_:1}),(0,te.Wm)(p,{value:"notRegExp"},{default:(0,te.w5)((()=>[Wo])),_:1})])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"value"===e.dataIndex?((0,te.wg)(),(0,te.j4)(u,{key:2,size:"small",value:t.value,"onUpdate:value":e=>t.value=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"option"===e.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:3,style:{color:"red"},onClick:e=>s.deleteRule.conditions=s.deleteRule.conditions.filter((e=>e!==t))},"删除",8,Uo)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(n,{type:"primary",onClick:t[8]||(t[8]=e=>s.deleteRule.conditions.push((0,Jt.Z)({},s.condition))),size:"small"},{default:(0,te.w5)((()=>[Co])),_:1})])),_:1})):(0,te.kq)("",!0),"javascript"===s.deleteRule.type?((0,te.wg)(),(0,te.j4)(c,{key:1,name:"code",rules:[{required:!0,message:"${label}不可为空! "}],label:"自定义代码"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{value:s.deleteRule.code,"onUpdate:value":t[9]||(t[9]=e=>s.deleteRule.code=e),type:"textarea",rows:10},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(c,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[zo])),_:1}),(0,te.Wm)(n,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[10]||(t[10]=e=>i.clearDeleteRule())},{default:(0,te.w5)((()=>[$o])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"]),(0,te.Wm)(o),(0,te.Wm)(y,{title:"说明",column:1},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{label:"01. 分享率一"},{default:(0,te.w5)((()=>[Io])),_:1}),(0,te.Wm)(g,{label:"02. 分享率二"},{default:(0,te.w5)((()=>[So])),_:1}),(0,te.Wm)(g,{label:"03. 分享率三"},{default:(0,te.w5)((()=>[Ro])),_:1}),(0,te.Wm)(g,{label:"04. 站点域名"},{default:(0,te.w5)((()=>[Do])),_:1}),(0,te.Wm)(g,{label:"05. 各类时间"},{default:(0,te.w5)((()=>[jo])),_:1}),(0,te.Wm)(g,{label:"06. 各类大小"},{default:(0,te.w5)((()=>[qo])),_:1}),(0,te.Wm)(g,{label:"07. 各类速度"},{default:(0,te.w5)((()=>[Mo])),_:1}),(0,te.Wm)(g,{label:"08. 种子状态"},{default:(0,te.w5)((()=>[Po,To,Ho,Ao,Oo,Yo,Lo,Ko,Bo,No])),_:1}),(0,te.Wm)(g,{label:"09. 返回信息"},{default:(0,te.w5)((()=>[Zo])),_:1}),(0,te.Wm)(g,{label:"10. 当前时间"},{default:(0,te.w5)((()=>[Eo,Fo,Vo])),_:1}),(0,te.Wm)(g,{label:"11. 全局速度"},{default:(0,te.w5)((()=>[Go])),_:1}),(0,te.Wm)(g,{label:"12. 做种下载连接"},{default:(0,te.w5)((()=>[Jo])),_:1}),(0,te.Wm)(g,{label:"13. 做种下载任务"},{default:(0,te.w5)((()=>[Xo])),_:1}),(0,te.Wm)(g,{label:"14. 比较类型中的 包含 / 包含于 或 不包含 / 不包含于"},{default:(0,te.w5)((()=>[Qo])),_:1})])),_:1})])])],64)}var tn={data(){const e=[{title:"ID",dataIndex:"id",width:18,sorter:(e,t)=>e.id.localeCompare(t.id),fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),width:30},{title:"持续时间",dataIndex:"fitTime",width:30},{title:"优先级",dataIndex:"priority",width:10},{title:"类型",dataIndex:"type",width:15},{title:"操作",width:20}],t=[{title:"选项",dataIndex:"key",width:18},{title:"比较类型",dataIndex:"compareType",width:18},{title:"值",dataIndex:"value",width:90},{title:"操作",dataIndex:"option",width:30}];return{columns:e,conditionColumns:t,conditionKeys:[{name:"种子名称",key:"name"},{name:"种子进度",key:"progress"},{name:"上传速度",key:"uploadSpeed"},{name:"下载速度",key:"downloadSpeed"},{name:"种子分类",key:"category"},{name:"种子标签",key:"tags"},{name:"选择大小",key:"size"},{name:"种子大小",key:"totalSize"},{name:"种子状态",key:"state"},{name:"站点域名",key:"tracker"},{name:"返回信息",key:"trackerStatus"},{name:"已完成量",key:"completed"},{name:"已下载量",key:"downloaded"},{name:"已上传量",key:"uploaded"},{name:"分享率一",key:"ratio"},{name:"分享率二",key:"trueRatio"},{name:"分享率三",key:"ratio3"},{name:"添加时间",key:"addedTime"},{name:"完成时间",key:"completedTime"},{name:"保存路径",key:"savePath"},{name:"做种连接",key:"seeder"},{name:"下载连接",key:"leecher"},{name:"剩余空间",key:"freeSpace"},{name:"下载任务",key:"leechingCount"},{name:"做种任务",key:"seedingCount"},{name:"全局上传",key:"globalUploadSpeed"},{name:"全局下载",key:"globalDownloadSpeed"},{name:"当前时间",key:"secondFromZero"}],condition:{key:"",compareType:"",value:""},deleteRule:{},defaultDeleteRule:{conditions:[],alias:"",type:"",priority:0,code:"(maindata, torrent) => {\n  return false;\n}"},loading:!0,deleteRuleList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listDeleteRule(){try{const e=await this.$api().deleteRule.list();this.deleteRuleList=e.data}catch(e){this.$message().error(e.message)}},async modifyDeleteRule(){try{await this.$api().deleteRule.modify((0,Jt.Z)({},this.deleteRule)),this.$message().success((this.deleteRule.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listDeleteRule()),1e3),this.clearDeleteRule()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.deleteRule=(0,Jt.Z)({},e)},async deleteDeleteRule(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().deleteRule.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listDeleteRule()}catch(t){this.$message().error(t.message)}},clearDeleteRule(){this.deleteRule=(0,Jt.Z)((0,Jt.Z)({},this.defaultDeleteRule),{},{conditions:[(0,Jt.Z)({},this.condition)]})}},async mounted(){this.clearDeleteRule(),await this.listDeleteRule()}};const an=(0,oe.Z)(tn,[["render",en],["__scopeId","data-v-41e45cbe"]]);var ln=an;const sn=e=>((0,te.dD)("data-v-69df1ea6"),e=e(),(0,te.Cn)(),e),on=sn((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"链接规则",-1))),nn={class:"link-rule"},rn=sn((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"链接规则列表",-1))),dn={key:2},un=["onClick"],cn=(0,te.Uk)("删除"),mn=sn((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),pn=sn((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑链接规则",-1))),wn={style:{"text-align":"left"}},hn=(0,te.Uk)("本地链接"),fn=(0,te.Uk)("启用硬链接"),gn=(0,te.Uk)("保留剧集名"),yn=(0,te.Uk)("保留制作组"),vn=(0,te.Uk)("应用 | 完成"),kn=(0,te.Uk)("清空");function bn(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-button"),r=(0,te.up)("a-popover"),d=(0,te.up)("a-table"),u=(0,te.up)("a-input"),c=(0,te.up)("a-form-item"),m=(0,te.up)("a-checkbox"),p=(0,te.up)("a-select-option"),w=(0,te.up)("a-select"),h=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[on,(0,te.Wm)(o),(0,te._)("div",nn,[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.linkRules,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[rn])),bodyCell:(0,te.w5)((({column:e,record:t})=>["linkMode"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(t.hardlink?"硬链接":"软链接"),1)],64)):(0,te.kq)("",!0),"server"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(t.server?this.serverList.filter((e=>e.id===t.server))[0].alias:"本地"),1)],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",dn,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,un),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(r,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary",danger:"",onClick:e=>i.deleteLinkRule(t),size:"small"},{default:(0,te.w5)((()=>[cn])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[mn])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),pn,(0,te._)("div",wn,[(0,te.Wm)(h,{labelAlign:"right",labelWrap:!0,model:s.linkRule,size:"small",onFinish:i.modifyLinkRule,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{label:"别名",name:"alias",extra:"给链接规则取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.alias,"onUpdate:value":t[0]||(t[0]=e=>s.linkRule.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"本地链接",name:"local",extra:"启用后本地执行链接文件, 需要将对应目录映射进 Docker",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.linkRule.local,"onUpdate:checked":t[1]||(t[1]=e=>s.linkRule.local=e)},{default:(0,te.w5)((()=>[hn])),_:1},8,["checked"])])),_:1}),s.linkRule.local?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(c,{key:0,label:"服务器",name:"server",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{allowClear:!0,size:"small",value:s.linkRule.server,"onUpdate:value":t[2]||(t[2]=e=>s.linkRule.server=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.serverList,(e=>((0,te.wg)(),(0,te.j4)(p,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1})),(0,te.Wm)(c,{label:"启用硬链接",name:"hardlink",extra:"默认为软链接, 勾选后链接文件以硬链接方式进行",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.linkRule.hardlink,"onUpdate:checked":t[3]||(t[3]=e=>s.linkRule.hardlink=e)},{default:(0,te.w5)((()=>[fn])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(c,{label:"链接目标目录替换",name:"targetPath",extra:"格式: A##B, # 为分割符",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.targetPath,"onUpdate:value":t[4]||(t[4]=e=>s.linkRule.targetPath=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"生成链接文件目录",name:"linkFilePath",extra:"标准的目录格式, 应为影视库的顶级目录",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.linkFilePath,"onUpdate:value":t[5]||(t[5]=e=>s.linkRule.linkFilePath=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"UMASK",name:"umask",extra:"用于调整生成文件的权限, 例: 0022, 如果不懂请务必留空!"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.umask,"onUpdate:value":t[6]||(t[6]=e=>s.linkRule.umask=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"保留剧集名",name:"keepSeriesName",extra:"链接时在文件名前添加剧集的名称",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.linkRule.keepSeriesName,"onUpdate:checked":t[7]||(t[7]=e=>s.linkRule.keepSeriesName=e)},{default:(0,te.w5)((()=>[gn])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(c,{label:"保留制作组",name:"group",extra:"链接时在文件名最后保留制作组, 以文件名最后一个 - 符号为标志, 之后的内容被判定为制作组",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{checked:s.linkRule.group,"onUpdate:checked":t[8]||(t[8]=e=>s.linkRule.group=e)},{default:(0,te.w5)((()=>[yn])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(c,{label:"保留关键词",name:"reservedKeys",extra:"链接时保留关键词, 可以用 , 分割多个关键字, 在链接时将按照关键词的顺序检索文件名, 若存在则保留"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.reservedKeys,"onUpdate:value":t[9]||(t[9]=e=>s.linkRule.reservedKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"排除关键词",name:"excludeKeys",extra:"链接时排除关键词, 可以用 , 分割多个关键字, 各个关键字间为 或 的关系"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.excludeKeys,"onUpdate:value":t[10]||(t[10]=e=>s.linkRule.excludeKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"单文件最小体积",name:"minFileSize",extra:"单个文件的最小体积, 若文件体积小于本值, 将不对本文件进行链接操作, 例: 5*1024*1024 表示 5MiB",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkRule.minFileSize,"onUpdate:value":t[11]||(t[11]=e=>s.linkRule.minFileSize=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[vn])),_:1}),(0,te.Wm)(n,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[12]||(t[12]=e=>i.clearLinkRule())},{default:(0,te.w5)((()=>[kn])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var _n={data(){const e=[{title:"ID",dataIndex:"id",width:18,fixed:!0},{title:"别名",dataIndex:"alias",width:30},{title:"服务器",dataIndex:"server",width:30},{title:"链接模式",dataIndex:"linkMode",width:30},{title:"操作",width:20}];return{columns:e,linkRule:{},defaultLinkRule:{hardlink:!1,local:!1,keepSeriesName:!1,group:!1},loading:!0,serverList:[],linkRules:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listLinkRule(){try{const e=await this.$api().linkRule.list();this.linkRules=e.data}catch(e){this.$message().error(e.message)}},async listServer(){try{const e=await this.$api().server.list();this.serverList=e.data}catch(e){this.$message().error(e.message)}},async modifyLinkRule(){try{this.linkRule.local&&(this.linkRule.server=""),await this.$api().linkRule.modify((0,Jt.Z)({},this.linkRule)),this.$message().success((this.linkRule.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listLinkRule()),1e3),this.clearLinkRule()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.linkRule=(0,Jt.Z)({},e)},async deleteLinkRule(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().linkRule.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listLinkRule()}catch(t){this.$message().error(t.message)}},clearLinkRule(){this.linkRule=(0,Jt.Z)({},this.defaultLinkRule)}},async mounted(){this.clearLinkRule(),await this.listServer(),await this.listLinkRule()}};const xn=(0,oe.Z)(_n,[["render",bn],["__scopeId","data-v-69df1ea6"]]);var Wn=xn;const Un=e=>((0,te.dD)("data-v-0aadeed1"),e=e(),(0,te.Cn)(),e),Cn=Un((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"RSS 规则",-1))),zn={class:"rss-rule"},$n=Un((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"RSS 规则列表",-1))),In={key:1},Sn=["onClick"],Rn=(0,te.Uk)("删除"),Dn=Un((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),jn=Un((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑 RSS 规则",-1))),qn={style:{"text-align":"left"}},Mn=(0,te.Uk)("普通"),Pn=(0,te.Uk)("JavaScript"),Tn=(0,te.Uk)("等于"),Hn=(0,te.Uk)("大于"),An=(0,te.Uk)("小于"),On=(0,te.Uk)("包含"),Yn=(0,te.Uk)("包含于"),Ln=(0,te.Uk)("不包含"),Kn=(0,te.Uk)("不包含于"),Bn=(0,te.Uk)("正则匹配"),Nn=(0,te.Uk)("正则不匹配"),Zn=["onClick"],En=(0,te.Uk)(" 新增条件 "),Fn=(0,te.Uk)("应用 | 完成"),Vn=(0,te.Uk)("清空");function Gn(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-button"),u=(0,te.up)("a-popover"),c=(0,te.up)("a-table"),m=(0,te.up)("a-input"),p=(0,te.up)("a-form-item"),w=(0,te.up)("a-textarea"),h=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Cn,(0,te.Wm)(o),(0,te._)("div",zn,[(0,te.Wm)(c,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.rssRuleList,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[$n])),bodyCell:(0,te.w5)((({column:e,record:t})=>["downloader"===e.dataIndex?((0,te.wg)(),(0,te.j4)(r,{key:0,size:"small",allowClear:!0,value:t.client,"onUpdate:value":e=>t.client=e,style:{width:"100%"},onChange:e=>i.modifyRssRuleDownloader(t)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(n,{key:e.id,value:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value","onChange"])):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",In,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,Sn),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(u,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary",danger:"",onClick:e=>i.deleteRssRule(t),size:"small"},{default:(0,te.w5)((()=>[Rn])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[Dn])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),jn,(0,te._)("div",qn,[(0,te.Wm)(h,{labelAlign:"right",labelWrap:!0,model:s.rssRule,size:"small",onFinish:i.modifyRssRule,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{label:"别名",name:"alias",extra:"给 RSS 规则取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rssRule.alias,"onUpdate:value":t[0]||(t[0]=e=>s.rssRule.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"分类",name:"category",extra:"添加种子时下载器内的分类, 留空使用 RSS 任务设置的分类"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rssRule.category,"onUpdate:value":t[1]||(t[1]=e=>s.rssRule.category=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"保存路径",name:"savePath",extra:"添加种子时下载器内的保存路径, 留空使用 RSS 任务设置的保存路径"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rssRule.savePath,"onUpdate:value":t[2]||(t[2]=e=>s.rssRule.savePath=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"下载器",name:"client",extra:"添加种子时选择的下载器, 该选项会直接覆盖 RSS 任务的下载器选择"},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",allowClear:!0,value:s.rssRule.client,"onUpdate:value":t[3]||(t[3]=e=>s.rssRule.client=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(n,{key:e.id,value:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"优先级",name:"priority",extra:"优先级最高的规则最先匹配, 留空则按默认顺序"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rssRule.priority,"onUpdate:value":t[4]||(t[4]=e=>s.rssRule.priority=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.rssRule.type,"onUpdate:value":t[5]||(t[5]=e=>s.rssRule.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"normal"},{default:(0,te.w5)((()=>[Mn])),_:1}),(0,te.Wm)(n,{value:"javascript"},{default:(0,te.w5)((()=>[Pn])),_:1})])),_:1},8,["value"])])),_:1}),"normal"===s.rssRule.type?((0,te.wg)(),(0,te.j4)(p,{key:0,label:"限制条件",name:"conditions",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.conditionColumns,size:"small","data-source":s.rssRule.conditions,pagination:!1,scroll:{x:540}},{bodyCell:(0,te.w5)((({column:e,record:t})=>["key"===e.dataIndex?((0,te.wg)(),(0,te.j4)(r,{key:0,size:"small",value:t.key,"onUpdate:value":e=>t.key=e},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.conditionKeys,(e=>((0,te.wg)(),(0,te.j4)(n,{key:e.key,value:e.key},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"compareType"===e.dataIndex?((0,te.wg)(),(0,te.j4)(r,{key:1,size:"small",value:t.compareType,"onUpdate:value":e=>t.compareType=e},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"equals"},{default:(0,te.w5)((()=>[Tn])),_:1}),(0,te.Wm)(n,{value:"bigger"},{default:(0,te.w5)((()=>[Hn])),_:1}),(0,te.Wm)(n,{value:"smaller"},{default:(0,te.w5)((()=>[An])),_:1}),(0,te.Wm)(n,{value:"contain"},{default:(0,te.w5)((()=>[On])),_:1}),(0,te.Wm)(n,{value:"includeIn"},{default:(0,te.w5)((()=>[Yn])),_:1}),(0,te.Wm)(n,{value:"notContain"},{default:(0,te.w5)((()=>[Ln])),_:1}),(0,te.Wm)(n,{value:"notIncludeIn"},{default:(0,te.w5)((()=>[Kn])),_:1}),(0,te.Wm)(n,{value:"regExp"},{default:(0,te.w5)((()=>[Bn])),_:1}),(0,te.Wm)(n,{value:"notRegExp"},{default:(0,te.w5)((()=>[Nn])),_:1})])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"value"===e.dataIndex?((0,te.wg)(),(0,te.j4)(m,{key:2,size:"small",value:t.value,"onUpdate:value":e=>t.value=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"option"===e.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:3,style:{color:"red"},onClick:e=>s.rssRule.conditions=s.rssRule.conditions.filter((e=>e!==t))},"删除",8,Zn)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(d,{type:"primary",onClick:t[6]||(t[6]=e=>s.rssRule.conditions.push((0,Jt.Z)({},s.condition))),size:"small"},{default:(0,te.w5)((()=>[En])),_:1})])),_:1})):(0,te.kq)("",!0),"javascript"===s.rssRule.type?((0,te.wg)(),(0,te.j4)(p,{key:1,name:"code",rules:[{required:!0,message:"${label}不可为空! "}],label:"自定义代码"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{value:s.rssRule.code,"onUpdate:value":t[7]||(t[7]=e=>s.rssRule.code=e),type:"textarea",rows:10},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(p,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Fn])),_:1}),(0,te.Wm)(d,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[8]||(t[8]=e=>i.clearRssRule())},{default:(0,te.w5)((()=>[Vn])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Jn={data(){const e=[{title:"ID",dataIndex:"id",width:18,sorter:(e,t)=>e.id.localeCompare(t.id),fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),defaultSortOrder:"ascend",width:30},{title:"下载器",dataIndex:"downloader",width:20},{title:"操作",width:20}],t=[{title:"选项",dataIndex:"key",width:18},{title:"比较类型",dataIndex:"compareType",width:18},{title:"值",dataIndex:"value",width:90},{title:"操作",dataIndex:"option",width:30}];return{columns:e,conditionColumns:t,conditionKeys:[{name:"种子名称",key:"name"},{name:"种子大小",key:"size"},{name:"种子简介",key:"description"}],condition:{key:"",compareType:"",value:""},rssRule:{},defaultRssRule:{conditions:[{key:"",compareType:"",value:""}],alias:"",type:"",code:"(torrent) => {\n  return false;\n}"},loading:!0,downloaders:[],rssRuleList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listRssRule(){try{const e=await this.$api().rssRule.list();this.rssRuleList=e.data}catch(e){this.$message().error(e.message)}},async modifyRssRuleDownloader(e){try{await this.$api().rssRule.modify((0,Jt.Z)({},e)),this.$message().success((e.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listRssRule()),1e3),this.clearRssRule()}catch(t){this.$message().error(t.message)}},async modifyRssRule(){try{await this.$api().rssRule.modify((0,Jt.Z)({},this.rssRule)),this.$message().success((this.rssRule.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listRssRule()),1e3),this.clearRssRule()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.rssRule=(0,Jt.Z)({},e)},async deleteRssRule(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().rssRule.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listRssRule()}catch(t){this.$message().error(t.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},clearRssRule(){this.rssRule=(0,Jt.Z)((0,Jt.Z)({},this.defaultRssRule),{},{conditions:[(0,Jt.Z)({},this.condition)]})}},async mounted(){this.clearRssRule(),this.listDownloader(),await this.listRssRule()}};const Xn=(0,oe.Z)(Jn,[["render",Gn],["__scopeId","data-v-0aadeed1"]]);var Qn=Xn;const er=e=>((0,te.dD)("data-v-56795ce6"),e=e(),(0,te.Cn)(),e),tr=er((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"选种规则",-1))),ar={class:"select-rule"},lr=er((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"选种规则列表",-1))),sr={key:1},ir=["onClick"],or=(0,te.Uk)("删除"),nr=er((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),rr=er((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑选种规则",-1))),dr={style:{"text-align":"left"}},ur=(0,te.Uk)("普通"),cr=(0,te.Uk)("JavaScript"),mr=(0,te.Uk)("等于"),pr=(0,te.Uk)("大于"),wr=(0,te.Uk)("小于"),hr=(0,te.Uk)("包含"),fr=(0,te.Uk)("包含于"),gr=(0,te.Uk)("不包含"),yr=(0,te.Uk)("不包含于"),vr=(0,te.Uk)("正则匹配"),kr=(0,te.Uk)("正则不匹配"),br=["onClick"],_r=(0,te.Uk)(" 新增条件 "),xr=(0,te.Uk)("应用 | 完成"),Wr=(0,te.Uk)("清空");function Ur(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-button"),r=(0,te.up)("a-popover"),d=(0,te.up)("a-table"),u=(0,te.up)("a-input"),c=(0,te.up)("a-form-item"),m=(0,te.up)("a-select-option"),p=(0,te.up)("a-select"),w=(0,te.up)("a-form-item-rest"),h=(0,te.up)("a-textarea"),f=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[tr,(0,te.Wm)(o),(0,te._)("div",ar,[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.selectRuleList,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[lr])),bodyCell:(0,te.w5)((({column:e,record:t})=>["sortType"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)((s.conditionKeys.filter((e=>e.key===t.sortBy))[0]||{}).name)+" "+(0,De.zw)(t.sortType?"asc"===t.sortType?"/ 升序":"/ 降序":""),1)],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",sr,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,ir),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(r,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary",danger:"",onClick:e=>i.deleteSelectRule(t),size:"small"},{default:(0,te.w5)((()=>[or])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[nr])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),rr,(0,te._)("div",dr,[(0,te.Wm)(f,{labelAlign:"right",labelWrap:!0,model:s.selectRule,size:"small",onFinish:i.modifySelectRule,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{label:"别名",name:"alias",extra:"给选种规则取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.selectRule.alias,"onUpdate:value":t[0]||(t[0]=e=>s.selectRule.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"优先级",name:"priority",extra:"优先级越高的规则越先执行, 默认为 0",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.selectRule.priority,"onUpdate:value":t[1]||(t[1]=e=>s.selectRule.priority=e)},null,8,["value"])])),_:1}),(0,te.Wm)(c,{label:"排序规则",name:"sortBy",extra:"在使用本规则匹配之前, 按照所选排序规则对种子进行排序, 排序指标默认为种子发布时间, 降序"},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.selectRule.sortBy,"onUpdate:value":t[2]||(t[2]=e=>s.selectRule.sortBy=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.conditionKeys,(e=>((0,te.wg)(),(0,te.j4)(m,{key:e.key,value:e.key},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"]),(0,te.Wm)(w,null,{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.selectRule.sortType,"onUpdate:value":t[3]||(t[3]=e=>s.selectRule.sortType=e)},{default:(0,te.w5)((()=>[((0,te.wg)(),(0,te.iD)(te.HY,null,(0,te.Ko)([{name:"升序",key:"asc"},{name:"降序",key:"desc"}],(e=>(0,te.Wm)(m,{key:e.key,value:e.key},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1})])),_:1}),(0,te.Wm)(c,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.selectRule.type,"onUpdate:value":t[4]||(t[4]=e=>s.selectRule.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{value:"normal"},{default:(0,te.w5)((()=>[ur])),_:1}),(0,te.Wm)(m,{value:"javascript"},{default:(0,te.w5)((()=>[cr])),_:1})])),_:1},8,["value"])])),_:1}),"normal"===s.selectRule.type?((0,te.wg)(),(0,te.j4)(c,{key:0,label:"限制条件",name:"conditions",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,null,{default:(0,te.w5)((()=>[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.conditionColumns,size:"small","data-source":s.selectRule.conditions,pagination:!1,scroll:{x:540}},{bodyCell:(0,te.w5)((({column:e,record:t})=>["key"===e.dataIndex?((0,te.wg)(),(0,te.j4)(p,{key:0,size:"small",value:t.key,"onUpdate:value":e=>t.key=e},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.conditionKeys,(e=>((0,te.wg)(),(0,te.j4)(m,{key:e.key,value:e.key},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"compareType"===e.dataIndex?((0,te.wg)(),(0,te.j4)(p,{key:1,size:"small",value:t.compareType,"onUpdate:value":e=>t.compareType=e},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{value:"equals"},{default:(0,te.w5)((()=>[mr])),_:1}),(0,te.Wm)(m,{value:"bigger"},{default:(0,te.w5)((()=>[pr])),_:1}),(0,te.Wm)(m,{value:"smaller"},{default:(0,te.w5)((()=>[wr])),_:1}),(0,te.Wm)(m,{value:"contain"},{default:(0,te.w5)((()=>[hr])),_:1}),(0,te.Wm)(m,{value:"includeIn"},{default:(0,te.w5)((()=>[fr])),_:1}),(0,te.Wm)(m,{value:"notContain"},{default:(0,te.w5)((()=>[gr])),_:1}),(0,te.Wm)(m,{value:"notIncludeIn"},{default:(0,te.w5)((()=>[yr])),_:1}),(0,te.Wm)(m,{value:"regExp"},{default:(0,te.w5)((()=>[vr])),_:1}),(0,te.Wm)(m,{value:"notRegExp"},{default:(0,te.w5)((()=>[kr])),_:1})])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"value"===e.dataIndex?((0,te.wg)(),(0,te.j4)(u,{key:2,size:"small",value:t.value,"onUpdate:value":e=>t.value=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"option"===e.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:3,style:{color:"red"},onClick:e=>s.selectRule.conditions=s.selectRule.conditions.filter((e=>e!==t))},"删除",8,br)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(n,{type:"primary",onClick:t[5]||(t[5]=e=>s.selectRule.conditions.push((0,Jt.Z)({},s.condition))),size:"small"},{default:(0,te.w5)((()=>[_r])),_:1})])),_:1})])),_:1})):(0,te.kq)("",!0),"javascript"===s.selectRule.type?((0,te.wg)(),(0,te.j4)(c,{key:1,name:"code",rules:[{required:!0,message:"${label}不可为空! "}],label:"自定义代码"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{value:s.selectRule.code,"onUpdate:value":t[6]||(t[6]=e=>s.selectRule.code=e),type:"textarea",rows:10},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(c,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[xr])),_:1}),(0,te.Wm)(n,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Wr])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Cr={data(){const e=[{title:"ID",dataIndex:"id",width:18,fixed:!0},{title:"别名",dataIndex:"alias",sorter:{compare:(e,t)=>e.alias.localeCompare(t.alias),multiple:1},width:30},{title:"优先级",dataIndex:"priority",width:20,sorter:{compare:(e,t)=>+e.priority-+t.priority,multiple:2},defaultSortOrder:"descend"},{title:"排序规则",dataIndex:"sortType",width:30},{title:"操作",width:20}],t=[{title:"选项",dataIndex:"key",width:18},{title:"比较类型",dataIndex:"compareType",width:18},{title:"值",dataIndex:"value",width:90},{title:"操作",dataIndex:"option",width:30}];return{columns:e,conditionColumns:t,conditionKeys:[{name:"站点",key:"sitePriority"},{name:"标题",key:"title"},{name:"副标题",key:"subtitle"},{name:"种子大小",key:"size"},{name:"影视语言",key:"language"},{name:"影视地区",key:"area"},{name:"资源分类",key:"category"},{name:"做种人数",key:"seeders"},{name:"下载人数",key:"leechers"},{name:"完成次数",key:"snatches"},{name:"发布时间",key:"time"},{name:"种子标签",key:"tags"}],condition:{key:"",compareType:"",value:""},selectRule:{},defaultSelectRule:{conditions:[{key:"",compareType:"",value:""}],code:"(torrent) => {\n  return false;\n}"},loading:!0,selectRuleList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listSelectRule(){try{const e=await this.$api().selectRule.list();this.selectRuleList=e.data}catch(e){this.$message().error(e.message)}},async modifySelectRule(){try{await this.$api().selectRule.modify((0,Jt.Z)({},this.selectRule)),this.$message().success((this.selectRule.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listSelectRule()),1e3)}catch(e){this.$message().error(e.message)}},modifyClick(e){this.selectRule=(0,Jt.Z)({},e)},async deleteSelectRule(e){if(e.used)this.$message().error("组件被占用, 取消占用后删除");else try{await this.$api().selectRule.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listSelectRule()}catch(t){this.$message().error(t.message)}},clearSelectRule(){this.selectRule=(0,Jt.Z)((0,Jt.Z)({},this.SelectRule),{},{conditions:[(0,Jt.Z)({},this.condition)]})}},async mounted(){this.clearSelectRule(),await this.listSelectRule()}};const zr=(0,oe.Z)(Cr,[["render",Ur],["__scopeId","data-v-56795ce6"]]);var $r=zr;a(26699);const Ir=e=>((0,te.dD)("data-v-a191d3ac"),e=e(),(0,te.Cn)(),e),Sr=Ir((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"RSS 任务",-1))),Rr={class:"rss"},Dr=Ir((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"RSS 任务列表",-1))),jr=(0,te.Uk)("启用"),qr=(0,te.Uk)("禁用"),Mr={key:3},Pr=["onClick"],Tr=["onClick"],Hr=(0,te.Uk)("删除"),Ar=Ir((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),Or=Ir((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑RSS 任务",-1))),Yr={style:{"text-align":"left"}},Lr=(0,te.Uk)("启用"),Kr=(0,te.Uk)("下载种子数量"),Br=(0,te.Uk)("当前上传速度"),Nr=(0,te.Uk)("当前下载速度"),Zr=(0,te.Uk)("当前剩余空间"),Er=(0,te.Uk)("KiB/s"),Fr=(0,te.Uk)("MiB/s"),Vr=(0,te.Uk)("GiB/s"),Gr=(0,te.Uk)("KiB/s"),Jr=(0,te.Uk)("MiB/s"),Xr=(0,te.Uk)("GiB/s"),Qr=(0,te.Uk)("删除"),ed=(0,te.Uk)(" 新增 "),td=(0,te.Uk)("抓取免费"),ad=(0,te.Uk)("排除 HR"),ld=(0,te.Uk)("启用"),sd=(0,te.Uk)("KiB/s"),id=(0,te.Uk)("MiB/s"),od=(0,te.Uk)("GiB/s"),nd=(0,te.Uk)("KiB/s"),rd=(0,te.Uk)("MiB/s"),dd=(0,te.Uk)("GiB/s"),ud=(0,te.Uk)("添加种子时暂停"),cd=(0,te.Uk)("自动管理"),md=(0,te.Uk)("跳过大小相同种子"),pd=(0,te.Uk)("推送种子文件"),wd=(0,te.Uk)("应用 | 完成"),hd=(0,te.Uk)("清空"),fd=(0,te.Uk)("试运行"),gd={style:{"text-align":"left"}},yd=(0,te.Uk)(" RSS 试运行仅判断是否符合 RSS 规则，不检测种子免费或 HR 状态。 "),vd=Ir((()=>(0,te._)("br",null,null,-1))),kd=Ir((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"种子列表",-1))),bd=(0,te.Uk)("取消");function _d(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-switch"),r=(0,te.up)("a-tag"),d=(0,te.up)("a-button"),u=(0,te.up)("a-popover"),c=(0,te.up)("a-table"),m=(0,te.up)("a-input"),p=(0,te.up)("a-form-item"),w=(0,te.up)("a-checkbox"),h=(0,te.up)("a-col"),f=(0,te.up)("a-row"),g=(0,te.up)("a-checkbox-group"),y=(0,te.up)("a-select-option"),v=(0,te.up)("a-select"),k=(0,te.up)("a-input-group"),b=(0,te.up)("a-form-item-rest"),_=(0,te.up)("a-form"),x=(0,te.up)("a-alert"),W=(0,te.up)("a-modal");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Sr,(0,te.Wm)(o),(0,te._)("div",Rr,[(0,te.Wm)(c,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.rssList,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[Dr])),bodyCell:(0,te.w5)((({column:e,record:t})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.j4)(n,{key:0,onChange:e=>i.enableTask(t),checked:t.enable,"onUpdate:checked":e=>t.enable=e,"checked-children":"启用","un-checked-children":"禁用"},null,8,["onChange","checked","onUpdate:checked"])):(0,te.kq)("",!0),"clientArr"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(s.downloaders.filter((e=>-1!==t.clientArr.indexOf(e.id))).map((e=>e.alias)).join(" / ")),1)],64)):(0,te.kq)("",!0),"pushNotify"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[t.pushNotify?((0,te.wg)(),(0,te.j4)(r,{key:0,color:"success"},{default:(0,te.w5)((()=>[jr])),_:1})):(0,te.kq)("",!0),t.pushNotify?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(r,{key:1,color:"error"},{default:(0,te.w5)((()=>[qr])),_:1}))],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",Mr,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,Pr),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{onClick:e=>i.cloneClick(t)},"克隆",8,Tr),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(u,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary",danger:"",onClick:e=>i.deleteRss(t),size:"small"},{default:(0,te.w5)((()=>[Hr])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[Ar])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),Or,(0,te._)("div",Yr,[(0,te.Wm)(_,{labelAlign:"right",labelWrap:!0,model:s.rss,size:"small",onFinish:i.modifyRss,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{label:"别名",name:"alias",extra:"给 RSS 任务取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.alias,"onUpdate:value":t[0]||(t[0]=e=>s.rss.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"启用",name:"enable",extra:"选择是否启用 RSS 任务",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.enable,"onUpdate:checked":t[1]||(t[1]=e=>s.rss.enable=e)},{default:(0,te.w5)((()=>[Lr])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"下载器",name:"clientArr",extra:"选择下载器, 仅可选择已经启用的下载器",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{style:{width:"100%"},value:s.rss.clientArr,"onUpdate:value":t[2]||(t[2]=e=>s.rss.clientArr=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(f,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(h,{span:8,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{disabled:!e.enable&&!s.rss.clientArr.includes(e.id),value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["disabled","value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"排序规则",name:"clientSortBy",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.clientSortBy,"onUpdate:value":t[3]||(t[3]=e=>s.rss.clientSortBy=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:"leechingCount"},{default:(0,te.w5)((()=>[Kr])),_:1}),(0,te.Wm)(y,{value:"uploadSpeed"},{default:(0,te.w5)((()=>[Br])),_:1}),(0,te.Wm)(y,{value:"downloadSpeed"},{default:(0,te.w5)((()=>[Nr])),_:1}),(0,te.Wm)(y,{value:"freeSpaceOnDisk"},{default:(0,te.w5)((()=>[Zr])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"下载器最高上传速度",name:"maxClientUploadSpeed",extra:"下载器上传速度在此速度之上时, 不添加种子, 留空或 0 不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.maxClientUploadSpeed,"onUpdate:value":t[5]||(t[5]=e=>s.rss.maxClientUploadSpeed=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.maxClientUploadSpeedUnit,"onUpdate:value":t[4]||(t[4]=e=>s.rss.maxClientUploadSpeedUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:"KiB"},{default:(0,te.w5)((()=>[Er])),_:1}),(0,te.Wm)(y,{value:"MiB"},{default:(0,te.w5)((()=>[Fr])),_:1}),(0,te.Wm)(y,{value:"GiB"},{default:(0,te.w5)((()=>[Vr])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"下载器最高下载速度",name:"maxClientDownloadSpeed",extra:"下载器下载速度在此速度之上时, 不添加种子, 留空或 0 不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.maxClientDownloadSpeed,"onUpdate:value":t[7]||(t[7]=e=>s.rss.maxClientDownloadSpeed=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.maxClientDownloadSpeedUnit,"onUpdate:value":t[6]||(t[6]=e=>s.rss.maxClientDownloadSpeedUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:"KiB"},{default:(0,te.w5)((()=>[Gr])),_:1}),(0,te.Wm)(y,{value:"MiB"},{default:(0,te.w5)((()=>[Jr])),_:1}),(0,te.Wm)(y,{value:"GiB"},{default:(0,te.w5)((()=>[Xr])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"下载器下载任务上限",name:"maxClientDownloadCount",extra:"下载器下载任务之上时, 不添加种子, 留空或 0 不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.maxClientDownloadCount,"onUpdate:value":t[8]||(t[8]=e=>s.rss.maxClientDownloadCount=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"RssUrl 列表",name:"rssUrls",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.rss.rssUrls,((e,t)=>((0,te.wg)(),(0,te.j4)(b,{key:t},{default:(0,te.w5)((()=>[(0,te.Wm)(k,{compact:""},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.rssUrls[t],"onUpdate:value":e=>s.rss.rssUrls[t]=e,style:{width:"calc(100% - 64px)"}},null,8,["value","onUpdate:value"]),(0,te.Wm)(d,{type:"danger",size:"small",onClick:()=>s.rss.rssUrls=s.rss.rssUrls.filter((e=>e!==s.rss.rssUrls[t])),style:{width:"64px"}},{default:(0,te.w5)((()=>[Qr])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),(0,te.Wm)(d,{size:"small",type:"primary",onClick:t[9]||(t[9]=e=>s.rss.rssUrls.push(""))},{default:(0,te.w5)((()=>[ed])),_:1})])),_:1}),(0,te.Wm)(p,{label:"抓取免费",name:"scrapeFree",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.scrapeFree,"onUpdate:checked":t[10]||(t[10]=e=>s.rss.scrapeFree=e)},{default:(0,te.w5)((()=>[td])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"排除 HR",name:"scrapeHr",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.scrapeHr,"onUpdate:checked":t[11]||(t[11]=e=>s.rss.scrapeHr=e)},{default:(0,te.w5)((()=>[ad])),_:1},8,["checked"])])),_:1}),s.rss.scrapeHr||s.rss.scrapeFree?((0,te.wg)(),(0,te.j4)(p,{key:0,label:"Cookie",name:"cookie",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.cookie,"onUpdate:value":t[12]||(t[12]=e=>s.rss.cookie=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(p,{label:"Rss 周期",name:"cron",extra:"Rss Cron 表达式, 默认为 1 分钟更新一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.cron,"onUpdate:value":t[13]||(t[13]=e=>s.rss.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"推送通知",name:"pushNotify",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.pushNotify,"onUpdate:checked":t[14]||(t[14]=e=>s.rss.pushNotify=e)},{default:(0,te.w5)((()=>[ld])),_:1},8,["checked"])])),_:1}),s.rss.pushNotify?((0,te.wg)(),(0,te.j4)(p,{key:1,label:"通知方式",name:"notify",extra:"通知方式, 用于推送删种等信息, 在通知工具页面创建",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.notify,"onUpdate:value":t[15]||(t[15]=e=>s.rss.notify=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(y,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(p,{label:"限制上传速度",name:"uploadLimit",extra:"限制种子的上传速度, 0 为不限速",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.uploadLimit,"onUpdate:value":t[17]||(t[17]=e=>s.rss.uploadLimit=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.uploadLimitUnit,"onUpdate:value":t[16]||(t[16]=e=>s.rss.uploadLimitUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:"KiB"},{default:(0,te.w5)((()=>[sd])),_:1}),(0,te.Wm)(y,{value:"MiB"},{default:(0,te.w5)((()=>[id])),_:1}),(0,te.Wm)(y,{value:"GiB"},{default:(0,te.w5)((()=>[od])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"限制下载速度",name:"downloadLimit",extra:"限制种子的下载速度, 0 为不限速",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.downloadLimit,"onUpdate:value":t[19]||(t[19]=e=>s.rss.downloadLimit=e)},{addonAfter:(0,te.w5)((()=>[(0,te.Wm)(v,{size:"small",value:s.rss.downloadLimitUnit,"onUpdate:value":t[18]||(t[18]=e=>s.rss.downloadLimitUnit=e),placeholder:"选择单位",style:{width:"120px"}},{default:(0,te.w5)((()=>[(0,te.Wm)(y,{value:"KiB"},{default:(0,te.w5)((()=>[nd])),_:1}),(0,te.Wm)(y,{value:"MiB"},{default:(0,te.w5)((()=>[rd])),_:1}),(0,te.Wm)(y,{value:"GiB"},{default:(0,te.w5)((()=>[dd])),_:1})])),_:1},8,["value"])])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"保存路径",name:"savePath",extra:"推送种子至下载器时的保存路径"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.savePath,"onUpdate:value":t[20]||(t[20]=e=>s.rss.savePath=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"分类",name:"category",extra:"推送种子至下载器时的分类"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.category,"onUpdate:value":t[21]||(t[21]=e=>s.rss.category=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"每小时上限",name:"addCountPerHour",extra:"每小时向客户端推送种子数量上限, 留空为 20, 编辑 Rss 或重启后重置计数"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.addCountPerHour,"onUpdate:value":t[22]||(t[22]=e=>s.rss.addCountPerHour=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"添加种子时暂停",name:"paused",extra:"向下载器添加种子时暂停种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.paused,"onUpdate:checked":t[23]||(t[23]=e=>s.rss.paused=e)},{default:(0,te.w5)((()=>[ud])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"自动管理",name:"autoTMM",extra:"向下载器添加种子时启用种子的自动管理功能, 不了解请勿勾选"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.autoTMM,"onUpdate:checked":t[24]||(t[24]=e=>s.rss.autoTMM=e)},{default:(0,te.w5)((()=>[cd])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"等待时间",name:"sleepTime",extra:"若在 Rss 时种子是非免费状态, 将在种子发布后的一段时间内重复抓取免费状态, 建议等待时间略小于 Rss 周期"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.sleepTime,"onUpdate:value":t[25]||(t[25]=e=>s.rss.sleepTime=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"最长休眠时间",name:"maxSleepTime",extra:"最长休眠时间, 若上次成功 RSS 在 N 秒以前, 则本次 RSS 拒绝所有种子, 建议为 3-5 倍于 Rss 周期, 单位为秒",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{size:"small",value:s.rss.maxSleepTime,"onUpdate:value":t[26]||(t[26]=e=>s.rss.maxSleepTime=e)},null,8,["value"])])),_:1}),(0,te.Wm)(p,{label:"跳过大小相同种子",name:"skipSameTorrent",extra:"跳过所有下载器内存在大小相同种子的种子",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.skipSameTorrent,"onUpdate:checked":t[27]||(t[27]=e=>s.rss.skipSameTorrent=e)},{default:(0,te.w5)((()=>[md])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"推送种子文件",name:"pushTorrentFile",extra:"是否直接推送种子文件, 默认推送种子下载链接至下载器"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{checked:s.rss.pushTorrentFile,"onUpdate:checked":t[28]||(t[28]=e=>s.rss.pushTorrentFile=e)},{default:(0,te.w5)((()=>[pd])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(p,{label:"拒绝规则",name:"rejectRules",extra:"拒绝规则, 种子状态符合其中一个时即触发拒绝种子操作"},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{style:{width:"100%"},value:s.rss.rejectRules,"onUpdate:value":t[29]||(t[29]=e=>s.rss.rejectRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(f,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.rssRules,(e=>((0,te.wg)(),(0,te.j4)(h,{span:8,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{label:"选择规则",name:"acceptRules",extra:"选择规则, 种子状态符合其中一个时即触发添加种子操作"},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{style:{width:"100%"},value:s.rss.acceptRules,"onUpdate:value":t[30]||(t[30]=e=>s.rss.acceptRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(f,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.rssRules,(e=>((0,te.wg)(),(0,te.j4)(h,{span:8,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(p,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[wd])),_:1}),(0,te.Wm)(d,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[31]||(t[31]=e=>i.clearRss())},{default:(0,te.w5)((()=>[hd])),_:1}),(0,te.Wm)(d,{type:"primary",style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[32]||(t[32]=e=>i.dryrun())},{default:(0,te.w5)((()=>[fd])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])]),(0,te.Wm)(W,{visible:s.modalVisible,"onUpdate:visible":t[34]||(t[34]=e=>s.modalVisible=e),title:"RSS 试运行",width:"1440px",footer:null},{default:(0,te.w5)((()=>[(0,te._)("div",gd,[(0,te.Wm)(x,{message:"注意事项",type:"info"},{description:(0,te.w5)((()=>[yd,vd,(0,te.Uk)(" RSS 链接: "+(0,De.zw)(s.rss.rssUrls[0]),1)])),_:1}),(0,te.Wm)(_,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:6},wrapperCol:{span:18},autocomplete:"off"},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{wrapperCol:{span:24}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.dryrunColumns,size:"small","data-source":e.dryrunResult,pagination:!1,scroll:{x:960}},{title:(0,te.w5)((()=>[kd])),bodyCell:(0,te.w5)((({column:t,record:a})=>["size"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.size)),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"])])),_:1}),(0,te.Wm)(p,{wrapperCol:i.isMobile()?{span:24}:{span:6,offset:18}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{onClick:t[33]||(t[33]=()=>s.modalVisible=!1)},{default:(0,te.w5)((()=>[bd])),_:1})])),_:1},8,["wrapperCol"])])),_:1})])])),_:1},8,["visible"])],64)}var xd={data(){const e=[{title:"ID",dataIndex:"id",width:18,fixed:!0},{title:"别名",dataIndex:"alias",sorter:(e,t)=>e.alias.localeCompare(t.alias),defaultSortOrder:"ascend",width:20},{title:"启用",dataIndex:"enable",width:15},{title:"下载器",dataIndex:"clientArr",width:40},{title:"推送消息",dataIndex:"pushNotify",width:20},{title:"操作",width:28}],t=[{title:"种子标题",dataIndex:"name",width:144},{title:"种子大小",dataIndex:"size",width:14},{title:"结果",dataIndex:"status",width:28}];return{columns:e,dryrunColumns:t,modalVisible:!1,rssList:[],downloaders:[],notifications:[],rssRules:[],rss:{},defaultRss:{clientArr:[],enable:!1,scrapeFree:!1,scrapeHr:!1,autoReseed:!1,onlyReseed:!1,maxSleepTime:600,skipSameTorrent:!0,pushTorrentFile:!0,cron:"* * * * *",addCountPerHour:"",pushNotify:!1,acceptRules:[],rejectRules:[],reseedClients:[],rssUrls:[""]},loading:!0,registCode:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listRss(){try{const e=await this.$api().rss.list();this.rssList=e.data}catch(e){this.$message().error(e.message)}},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},async listRssRule(){try{const e=await this.$api().rssRule.list();this.rssRules=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data.sort(((e,t)=>e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},async modifyRss(){try{await this.$api().rss.modify((0,Jt.Z)({},this.rss)),this.$message().success((this.rss.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listRss()),1e3),this.clearRss()}catch(e){this.$message().error(e.message)}},async dryrun(){try{const e=await this.$api().rss.dryrun((0,Jt.Z)({},this.rss));this.dryrunResult=e.data,this.modalVisible=!0}catch(e){this.$message().error(e.message)}},async enableTask(e){try{await this.$api().rss.modify((0,Jt.Z)({},e)),this.$message().success("修改成功, 列表正在刷新..."),setTimeout((()=>this.listRss()),1e3),this.clearRss()}catch(t){this.$message().error(t.message)}},modifyClick(e){this.rss=(0,Jt.Z)({},e)},cloneClick(e){this.rss=(0,Jt.Z)((0,Jt.Z)({},this.row),{},{acceptRules:[...e.acceptRules],clientArr:[...e.clientArr],rejectRules:[...e.rejectRules],reseedClients:[...e.reseedClients],rssUrls:[...e.rssUrls]}),this.rss.id=null,this.rss.alias=this.rss.alias+"-克隆"},async deleteRss(e){try{await this.$api().rss.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listRss()}catch(t){this.$message().error(t.message)}},clearRss(){this.rss=(0,Jt.Z)((0,Jt.Z)({},this.defaultRss),{},{acceptRules:[],clientArr:[],rejectRules:[],reseedClients:[],rssUrls:[""]})}},async mounted(){this.clearRss(),this.listNotification(),this.listDownloader(),this.listRssRule(),this.listRss()}};const Wd=(0,oe.Z)(xd,[["render",_d],["__scopeId","data-v-a191d3ac"]]);var Ud=Wd;const Cd=e=>((0,te.dD)("data-v-7843e24c"),e=e(),(0,te.Cn)(),e),zd=Cd((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"订阅任务",-1))),$d={class:"subscribe"},Id=Cd((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"订阅任务列表",-1))),Sd={key:0},Rd=["onClick"],Dd=(0,te.Uk)(" 操作 "),jd=["onClick"],qd=["onClick"],Md=(0,te.Uk)("删除"),Pd=Cd((()=>(0,te._)("a",null,"删除",-1))),Td=Cd((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑订阅任务",-1))),Hd={style:{"text-align":"left"}},Ad=(0,te.Uk)("启用"),Od=(0,te.Uk)("电影"),Yd=(0,te.Uk)("剧集"),Ld=(0,te.Uk)("自动管理"),Kd=(0,te.Uk)("添加自动刷新"),Bd=(0,te.Uk)("弹出"),Nd=["onClick"],Zd=(0,te.Uk)("新增条件"),Ed=(0,te.Uk)("启用"),Fd=(0,te.Uk)("启用"),Vd=(0,te.Uk)("启用"),Gd=(0,te.Uk)("应用 | 完成"),Jd=(0,te.Uk)("清空"),Xd={style:{"text-align":"left"}},Qd=(0,te.Uk)("取消限制年份");function eu(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("fa"),r=(0,te.up)("a-menu-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-popover"),c=(0,te.up)("a-menu"),m=(0,te.up)("a-dropdown"),p=(0,te.up)("a-table"),w=(0,te.up)("a-input"),h=(0,te.up)("a-form-item"),f=(0,te.up)("a-checkbox"),g=(0,te.up)("a-col"),y=(0,te.up)("a-row"),v=(0,te.up)("a-checkbox-group"),k=(0,te.up)("a-select-option"),b=(0,te.up)("a-select"),_=(0,te.up)("a-form-item-rest"),x=(0,te.up)("a-form"),W=(0,te.up)("a-modal");return(0,te.wg)(),(0,te.iD)(te.HY,null,[zd,(0,te.Wm)(o),(0,te._)("div",$d,[(0,te.Wm)(p,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.subscribes,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[Id])),bodyCell:(0,te.w5)((({column:e,record:a})=>["操作"===e.title?((0,te.wg)(),(0,te.iD)("span",Sd,[(0,te._)("a",{onClick:e=>i.refreshSubscribe(a)},"刷新",8,Rd),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(m,null,{overlay:(0,te.w5)((()=>[(0,te.Wm)(c,null,{default:(0,te.w5)((()=>[(0,te.Wm)(r,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.modifyClick(a)},"编辑",8,jd)])),_:2},1024),(0,te.Wm)(r,null,{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:e=>i.cloneClick(a)},"克隆",8,qd)])),_:2},1024),(0,te.Wm)(r,{danger:""},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary",danger:"",onClick:e=>i.deleteSubscribe(a),size:"small"},{default:(0,te.w5)((()=>[Md])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[Pd])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:(0,te.w5)((()=>[(0,te._)("a",{class:"ant-dropdown-link",onClick:t[0]||(t[0]=(0,ee.iM)((()=>{}),["prevent"]))},[Dd,(0,te.Wm)(n,{icon:["fas","chevron-down"]})])])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),Td,(0,te._)("div",Hd,[(0,te.Wm)(x,{labelAlign:"right",labelWrap:!0,model:s.subscribe,size:"small",onFinish:i.modifySubscribe,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{label:"别名",name:"alias",extra:"给订阅任务取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.subscribe.alias,"onUpdate:value":t[1]||(t[1]=e=>s.subscribe.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{label:"启用",name:"enable",extra:"选择是否启用订阅任务",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{checked:s.subscribe.enable,"onUpdate:checked":t[2]||(t[2]=e=>s.subscribe.enable=e)},{default:(0,te.w5)((()=>[Ad])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(h,{label:"站点",name:"sites",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{style:{width:"100%"},value:s.subscribe.sites,"onUpdate:value":t[3]||(t[3]=e=>s.subscribe.sites=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites,(e=>((0,te.wg)(),(0,te.j4)(g,{span:8,key:e.name},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{value:e.name,"onUpdate:value":t=>e.name=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"选择规则",name:"raceRules",rules:[{required:!0,message:"${label}不可为空! "}],extra:"选择选种规则, 符合这些规则的种子才会添加, 可前往选种规则分页添加, 仅显示优先级不为 0 的规则"},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{style:{width:"100%"},value:s.subscribe.raceRules,"onUpdate:value":t[4]||(t[4]=e=>s.subscribe.raceRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.selectRules,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.id},["0"!==e.priority?((0,te.wg)(),(0,te.j4)(g,{key:0,span:8},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)):(0,te.kq)("",!0)],64)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"排除规则",name:"rejectRules",extra:"选择排除规则, 符合这些规则的种子都会被拒绝, 可前往选种规则分页添加, 仅显示优先级为 0 的规则"},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{style:{width:"100%"},value:s.subscribe.rejectRules,"onUpdate:value":t[5]||(t[5]=e=>s.subscribe.rejectRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.selectRules,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.id},["0"===e.priority?((0,te.wg)(),(0,te.j4)(g,{key:0,span:8},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)):(0,te.kq)("",!0)],64)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"链接规则",name:"linkRule",extra:"链接规则, 留空则不启用自动链接"},{default:(0,te.w5)((()=>[(0,te.Wm)(b,{size:"small",value:s.subscribe.linkRule,"onUpdate:value":t[6]||(t[6]=e=>s.subscribe.linkRule=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.linkRules,(e=>((0,te.wg)(),(0,te.j4)(k,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"下载器",name:"client",extra:"选择下载器, 仅可选择已经启用的下载器"},{default:(0,te.w5)((()=>[(0,te.Wm)(b,{size:"small",value:s.subscribe.client,"onUpdate:value":t[7]||(t[7]=e=>s.subscribe.client=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(k,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"分类",name:"categories",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(_,null,{default:(0,te.w5)((()=>[(0,te.Wm)(p,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.categoriesColumns,size:"small","data-source":s.subscribe.categories,pagination:!1,scroll:{x:980}},{bodyCell:(0,te.w5)((({column:e,record:t})=>["doubanTag"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:0,size:"small",value:t.doubanTag,"onUpdate:value":e=>t.doubanTag=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"type"===e.dataIndex?((0,te.wg)(),(0,te.j4)(b,{key:1,size:"small",value:t.type,"onUpdate:value":e=>t.type=e},{default:(0,te.w5)((()=>[(0,te.Wm)(k,{value:"movie"},{default:(0,te.w5)((()=>[Od])),_:1}),(0,te.Wm)(k,{value:"series"},{default:(0,te.w5)((()=>[Yd])),_:1})])),_:2},1032,["value","onUpdate:value"])):(0,te.kq)("",!0),"category"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:2,size:"small",value:t.category,"onUpdate:value":e=>t.category=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"libraryPath"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:3,size:"small",value:t.libraryPath,"onUpdate:value":e=>t.libraryPath=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"savePath"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:4,size:"small",value:t.savePath,"onUpdate:value":e=>t.savePath=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"autoTMM"===e.dataIndex?((0,te.wg)(),(0,te.j4)(f,{key:5,checked:t.autoTMM,"onUpdate:checked":e=>t.autoTMM=e},{default:(0,te.w5)((()=>[Ld])),_:2},1032,["checked","onUpdate:checked"])):(0,te.kq)("",!0),"autoSearch"===e.dataIndex?((0,te.wg)(),(0,te.j4)(f,{key:6,checked:t.autoSearch,"onUpdate:checked":e=>t.autoSearch=e},{default:(0,te.w5)((()=>[Kd])),_:2},1032,["checked","onUpdate:checked"])):(0,te.kq)("",!0),"rejectKeys"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:7,size:"small",value:t.rejectKeys,"onUpdate:value":e=>t.rejectKeys=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"rules"===e.dataIndex?((0,te.wg)(),(0,te.j4)(d,{key:8,type:"primary",onClick:e=>i.expandModal(t),size:"small"},{default:(0,te.w5)((()=>[Bd])),_:2},1032,["onClick"])):(0,te.kq)("",!0),"option"===e.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:9,style:{color:"red"},onClick:e=>s.subscribe.categories=s.subscribe.categories.filter((e=>e!==t))},"删除",8,Nd)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(d,{type:"primary",onClick:t[8]||(t[8]=e=>s.subscribe.categories.push((0,Jt.Z)({},s.defaultCategory))),size:"small"},{default:(0,te.w5)((()=>[Zd])),_:1})])),_:1})])),_:1}),(0,te.Wm)(h,{label:"Cookie",name:"cookie",extra:"登录豆瓣账户后获取到的 Cookie",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.subscribe.cookie,"onUpdate:value":t[9]||(t[9]=e=>s.subscribe.cookie=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{label:"附加账号",name:"users",extra:"监视 cookie 自有账号时添加其它人账号 ID, 格式为 'ID1,ID2,ID3', 留空不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.subscribe.users,"onUpdate:value":t[10]||(t[10]=e=>s.subscribe.users=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{label:"刷新周期",name:"cron",extra:"刷新 想看列表 的周期, 默认为每 4 小时刷新一次, 仅刷新想看列表",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.subscribe.cron,"onUpdate:value":t[11]||(t[11]=e=>s.subscribe.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{label:"超级模式",name:"advancedMode",extra:"超级模式, 除了定期搜索站内种子外, 每十分钟向 Vertex Panel 搜索种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{checked:s.subscribe.advancedMode,"onUpdate:checked":t[12]||(t[12]=e=>s.subscribe.advancedMode=e)},{default:(0,te.w5)((()=>[Ed])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(h,{label:"接收微信消息",name:"enableWechatLink",extra:"接收微信消息, 需要在全局设置内设置对应的微信 Token 以及 AesKey"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{checked:s.subscribe.enableWechatLink,"onUpdate:checked":t[13]||(t[13]=e=>s.subscribe.enableWechatLink=e)},{default:(0,te.w5)((()=>[Fd])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(h,{label:"推送通知",name:"push",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{checked:s.subscribe.push,"onUpdate:checked":t[14]||(t[14]=e=>s.subscribe.push=e)},{default:(0,te.w5)((()=>[Vd])),_:1},8,["checked"])])),_:1}),s.subscribe.push?((0,te.wg)(),(0,te.j4)(h,{key:0,label:"通知方式",name:"notify",extra:"通知方式, 用于推送删种等信息, 在通知工具页面创建",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(b,{size:"small",value:s.subscribe.notify,"onUpdate:value":t[15]||(t[15]=e=>s.subscribe.notify=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(k,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(h,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Gd])),_:1}),(0,te.Wm)(d,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[16]||(t[16]=e=>i.clearSubscribe())},{default:(0,te.w5)((()=>[Jd])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])]),(0,te.Wm)(W,{visible:s.modalVisible,"onUpdate:visible":t[21]||(t[21]=e=>s.modalVisible=e),title:"推送种子",width:"1440px",footer:null},{default:(0,te.w5)((()=>[(0,te._)("div",Xd,[(0,te.Wm)(x,{labelAlign:"right",labelWrap:!0,model:s.expandCategory,size:"small",labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{wrapperCol:{span:24}},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(s.expandCategory.doubanTag),1)])),_:1}),(0,te.Wm)(h,{label:"选择规则",name:"raceRules",rules:[{required:!0,message:"${label}不可为空! "}],extra:"选择选种规则, 符合这些规则的种子才会添加, 可前往选种规则分页添加, 仅显示优先级不为 0 的规则"},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{style:{width:"100%"},value:s.expandCategory.raceRules,"onUpdate:value":t[17]||(t[17]=e=>s.expandCategory.raceRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.selectRules,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.id},["0"!==e.priority?((0,te.wg)(),(0,te.j4)(g,{key:0,span:8},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)):(0,te.kq)("",!0)],64)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"排除规则",name:"rejectRules",extra:"选择排除规则, 符合这些规则的种子都会被拒绝, 可前往选种规则分页添加, 仅显示优先级为 0 的规则"},{default:(0,te.w5)((()=>[(0,te.Wm)(v,{style:{width:"100%"},value:s.expandCategory.rejectRules,"onUpdate:value":t[18]||(t[18]=e=>s.expandCategory.rejectRules=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(y,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.selectRules,(e=>((0,te.wg)(),(0,te.iD)(te.HY,{key:e.id},["0"===e.priority?((0,te.wg)(),(0,te.j4)(g,{key:0,span:8},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)):(0,te.kq)("",!0)],64)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(h,{label:"默认集数",name:"defaultEpisodes",extra:"若豆瓣词条无集数信息，则按照默认集数处理, 仅支持剧集类型"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.expandCategory.defaultEpisodes,"onUpdate:value":t[19]||(t[19]=e=>s.expandCategory.defaultEpisodes=e)},null,8,["value"])])),_:1}),(0,te.Wm)(h,{label:"默认取消年份限制",name:"defaultrestrictYear",extra:"默认限制年份, 勾选后取消限制"},{default:(0,te.w5)((()=>[(0,te.Wm)(f,{checked:s.expandCategory.defaultrestrictYear,"onUpdate:checked":t[20]||(t[20]=e=>s.expandCategory.defaultrestrictYear=e)},{default:(0,te.w5)((()=>[Qd])),_:1},8,["checked"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])],64)}var tu={data(){const e=[{title:"ID",dataIndex:"id",width:5,fixed:!0},{title:"别名",dataIndex:"alias",width:20},{title:"操作",width:5}],t=[{title:"豆瓣标签",dataIndex:"doubanTag",width:24,fixed:!0},{title:"所属分类",dataIndex:"type",width:20},{title:"下载器分类",dataIndex:"category",width:20},{title:"资料库文件夹",dataIndex:"libraryPath",width:20},{title:"保存路径",dataIndex:"savePath",width:20},{title:"自动管理",dataIndex:"autoTMM",width:20},{title:"添加自动刷新",dataIndex:"autoSearch",width:26},{title:"排除关键词",dataIndex:"rejectKeys",width:20},{title:"规则",dataIndex:"rules",width:16},{title:"操作",dataIndex:"option",width:12}];return{columns:e,categoriesColumns:t,modalVisible:!1,subscribes:[],notifications:[],selectRules:[],downloaders:[],subscribe:{},sites:[],linkRules:[],expandCategory:{raceRules:[],rejectRules:[]},defaultSubscribe:{cron:"0 */4 * * *",sites:[],push:!0,raceRules:[],rejectRules:[],categories:[]},defaultCategory:{doubanTag:"",type:"",category:"",libraryPath:"",savePath:"",autoTMM:!1,rejectKeys:"",categoryRules:[],autoSearch:!0},loading:!0,registCode:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data;for(const t of this.subscribes)for(const e of t.categories)e.raceRules||(e.raceRules=[]),e.rejectRules||(e.rejectRules=[])}catch(e){this.$message().error(e.message)}},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data}catch(e){this.$message().error(e.message)}},async listSelectRule(){try{const e=await this.$api().selectRule.list();this.selectRules=e.data.sort(((e,t)=>t.priority-e.priority||e.alias.localeCompare(t.alias)))}catch(e){this.$message().error(e.message)}},async listSite(){try{const e=await this.$api().site.list();this.sites=e.data.siteList}catch(e){this.$message().error(e.message)}},async listLinkRule(){try{const e=await this.$api().linkRule.list();this.linkRules=e.data}catch(e){this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data}catch(e){this.$message().error(e.message)}},async modifySubscribe(){try{await this.$api().subscribe.modify((0,Jt.Z)({},this.subscribe)),this.$message().success((this.subscribe.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listSubscribe()),1e3),this.clearSubscribe()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.subscribe=(0,Jt.Z)({},e)},cloneClick(e){this.subscribe=(0,Jt.Z)((0,Jt.Z)({},e),{},{sites:[...e.sites],raceRules:[...e.raceRules],rejectRules:[...e.rejectRules],categories:[...e.categories.map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{raceRules:[...e.raceRules],rejectRules:[...e.rejectRules]})))]}),this.subscribe.id=null,this.subscribe.alias=this.subscribe.alias+"-克隆"},expandModal(e){this.modalVisible=!0,this.expandCategory=e},async deleteSubscribe(e){try{await this.$api().subscribe.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listSubscribe()}catch(t){this.$message().error(t.message)}},async refreshSubscribe(e){try{await this.$api().subscribe.refreshSubscribe(e.id),this.$message().success("已启动刷新任务"),await this.listSubscribe()}catch(t){this.$message().error(t.message)}},clearSubscribe(){this.subscribe=(0,Jt.Z)((0,Jt.Z)({},this.defaultSubscribe),{},{sites:[],raceRules:[],rejectRules:[],categories:[(0,Jt.Z)({},this.defaultCategory)]})}},async mounted(){this.clearSubscribe(),this.listSelectRule(),this.listSite(),this.listLinkRule(),this.listDownloader(),this.listNotification(),this.listSubscribe()}};const au=(0,oe.Z)(tu,[["render",eu],["__scopeId","data-v-7843e24c"]]);var lu=au;const su=e=>((0,te.dD)("data-v-f591c690"),e=e(),(0,te.Cn)(),e),iu=su((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"链接文件",-1))),ou={class:"link"},nu={style:{"text-align":"left"}},ru=su((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"链接文件",-1))),du=(0,te.Uk)("电影"),uu=(0,te.Uk)("剧集"),cu=(0,te.Uk)("正常模式"),mu=(0,te.Uk)("保留目录结构并添加顶层文件夹"),pu=(0,te.Uk)("保留目录结构并替换顶层文件夹"),wu=(0,te.Uk)("保留目录结构并不修改顶层文件夹"),hu=(0,te.Uk)("检查"),fu=(0,te.Uk)("执行"),gu=su((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"选择文件",-1))),yu=(0,te.Uk)(" 增加 "),vu=su((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"链接文件列表",-1)));function ku(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-form-item"),r=(0,te.up)("a-select-option"),d=(0,te.up)("a-select"),u=(0,te.up)("a-input"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form"),p=(0,te.up)("fa"),w=(0,te.up)("a-input-group"),h=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[iu,(0,te.Wm)(o),(0,te._)("div",ou,[(0,te._)("div",nu,[ru,(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,model:s.linkInfo,size:"small",onFinish:t[6]||(t[6]=e=>i.link("dryrun")),labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{label:"下载器"},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(this.torrentInfo.clientAlias),1)])),_:1}),(0,te.Wm)(n,{label:"种子标题"},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(this.torrentInfo.name),1)])),_:1}),(0,te.Wm)(n,{label:"种子大小"},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(e.$formatSize(this.torrentInfo.size)),1)])),_:1}),(0,te.Wm)(n,{label:"保存路径"},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(this.torrentInfo.savePath),1)])),_:1}),(0,te.Wm)(n,{label:"种子 HASH"},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(this.torrentInfo.hash),1)])),_:1}),(0,te.Wm)(n,{label:"链接规则",name:"linkRule",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.linkInfo.linkRule,"onUpdate:value":t[0]||(t[0]=e=>s.linkInfo.linkRule=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.linkRules,(e=>((0,te.wg)(),(0,te.j4)(r,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(n,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.linkInfo.type,"onUpdate:value":t[1]||(t[1]=e=>s.linkInfo.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{value:"movie"},{default:(0,te.w5)((()=>[du])),_:1}),(0,te.Wm)(r,{value:"series"},{default:(0,te.w5)((()=>[uu])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(n,{label:"资料库文件夹",name:"libraryPath",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",options:s.libraryPaths,onSearch:t[2]||(t[2]=e=>s.libraryPaths[0].value=e),showSearch:!0,value:s.linkInfo.libraryPath,"onUpdate:value":t[3]||(t[3]=e=>s.linkInfo.libraryPath=e)},null,8,["options","value"])])),_:1}),(0,te.Wm)(n,{label:"链接模式",name:"linkMode",rules:[{required:!0,message:"${label}不可为空! "}],extra:"链接模式, 正常模式需要先 检查 之后 执行!"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.linkInfo.linkMode,"onUpdate:value":t[4]||(t[4]=e=>s.linkInfo.linkMode=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{value:"normal"},{default:(0,te.w5)((()=>[cu])),_:1}),(0,te.Wm)(r,{value:"keepStruct-1"},{default:(0,te.w5)((()=>[mu])),_:1}),(0,te.Wm)(r,{value:"keepStruct-2"},{default:(0,te.w5)((()=>[pu])),_:1}),(0,te.Wm)(r,{value:"keepStruct-3"},{default:(0,te.w5)((()=>[wu])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(n,{label:"影视剧名",name:"mediaName",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.linkInfo.mediaName,"onUpdate:value":t[5]||(t[5]=e=>s.linkInfo.mediaName=e)},null,8,["value"])])),_:1}),(0,te.Wm)(n,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[hu])),_:1}),(0,te.Wm)(c,{type:"primary",danger:"",style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:i.link},{default:(0,te.w5)((()=>[fu])),_:1},8,["onClick"])])),_:1},8,["wrapperCol"])])),_:1},8,["model","class"]),(0,te.Wm)(o),gu,(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.selectFile,"onUpdate:value":t[7]||(t[7]=e=>s.selectFile=e),style:{width:"calc(100% - 80px)"}},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.fileList,(e=>((0,te.wg)(),(0,te.j4)(r,{disabled:-999!==e.episode,value:e.file,"onUpdate:value":t=>e.file=t,key:e.file},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.file),1)])),_:2},1032,["disabled","value","onUpdate:value"])))),128))])),_:1},8,["value"]),(0,te.Wm)(c,{size:"small",onClick:t[8]||(t[8]=()=>{s.fileList.filter((e=>e.file===s.selectFile))[0].episode=0,s.selectFile=""}),type:"primary",style:{width:"64px","margin-left":"16px"}},{default:(0,te.w5)((()=>[yu])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["class"]),(0,te.Wm)(o),(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:"series"===s.linkInfo.type?s.seriesColumns:s.movieColumns,size:"small","data-source":s.fileList.filter((e=>-999!==e.episode)),pagination:!1,scroll:{x:"series"===s.linkInfo.type?1200:640}},{title:(0,te.w5)((()=>[vu])),bodyCell:(0,te.w5)((({column:e,record:a})=>["seriesName"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:0,compact:""},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",onChange:t[9]||(t[9]=()=>i.refreshSeriesName()),value:a.seriesName,"onUpdate:value":e=>a.seriesName=e,style:{width:"calc(100% - 20px)"}},null,8,["value","onUpdate:value"]),(0,te.Wm)(p,{onClick:()=>{a.seriesNameUnlink=!a.seriesNameUnlink},icon:["fas",a.seriesNameUnlink?"unlink":"link"],style:(0,De.j5)({width:"16px",height:"24px","margin-left":"4px",color:a.seriesNameUnlink?"red":"blue",cursor:"pointer"})},null,8,["onClick","icon","style"])])),_:2},1024)):(0,te.kq)("",!0),"season"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:1,compact:""},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",onChange:t[10]||(t[10]=()=>i.refreshSeason()),value:a.season,"onUpdate:value":e=>a.season=e,style:{width:"calc(100% - 20px)"}},null,8,["value","onUpdate:value"]),(0,te.Wm)(p,{onClick:()=>{a.seasonUnlink=!a.seasonUnlink},icon:["fas",a.seasonUnlink?"unlink":"link"],style:(0,De.j5)({width:"16px",height:"24px","margin-left":"4px",color:a.seasonUnlink?"red":"blue",cursor:"pointer"})},null,8,["onClick","icon","style"])])),_:2},1024)):(0,te.kq)("",!0),"episode"===e.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:2,compact:""},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",onChange:t[11]||(t[11]=()=>i.refreshEpisode()),value:a.episode,"onUpdate:value":e=>a.episode=e,style:{width:"calc(100% - 20px)"}},null,8,["value","onUpdate:value"]),(0,te.Wm)(p,{onClick:()=>{a.episodeUnlink=!a.episodeUnlink},icon:["fas",a.episodeUnlink?"unlink":"link"],style:(0,De.j5)({width:"16px",height:"24px","margin-left":"4px",color:a.episodeUnlink?"red":"blue",cursor:"pointer"})},null,8,["onClick","icon","style"])])),_:2},1024)):(0,te.kq)("",!0),"linkFile"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:3},[(0,te.Uk)((0,De.zw)(a.newLinkFile||a.linkFile),1)],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.j4)(p,{key:4,icon:["fas","times"],onClick:()=>{a.episode=-999},style:{width:"20px",color:"red",cursor:"pointer"}},null,8,["onClick"])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source","scroll"])])])],64)}a(84944),a(33792),a(15306);var bu={data(){const e=[{title:"链接文件名称",dataIndex:"linkFile",width:30,fixed:!0},{title:"电影名称",dataIndex:"folderName",width:20},{title:"文件名",dataIndex:"file",width:60},{title:"操作",width:10}],t=[{title:"季",dataIndex:"season",width:16,fixed:!0},{title:"集",dataIndex:"episode",width:16,fixed:!0},{title:"剧集名称",dataIndex:"seriesName",width:25},{title:"链接文件名称",dataIndex:"linkFile",width:30},{title:"文件名",dataIndex:"file",width:120},{title:"操作",width:10}];return{movieColumns:e,seriesColumns:t,hash:"",fileList:[],subscribes:"",selectFile:"",libraryPaths:[],linkRules:[],linkInfo:{libraryPath:""},torrentInfo:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getTorrentInfo(){try{const e=await this.$api().torrent.info(this.hash);this.torrentInfo=e.data,this.torrentInfo.scrapeName&&(this.linkInfo.mediaName=this.torrentInfo.scrapeName)}catch(e){await this.$message().error(e.message)}},async listLinkRule(){try{const e=await this.$api().linkRule.list();this.linkRules=e.data}catch(e){this.$message().error(e.message)}},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data,this.libraryPaths=[{value:"手动输入"}];for(const t of this.subscribes.map((e=>e.categories)).flat())-1===this.libraryPaths.map((e=>e.value)).indexOf(t.libraryPath)&&this.libraryPaths.push({value:t.libraryPath})}catch(e){this.$message().error(e.message)}},async link(e){try{const t=(0,Jt.Z)((0,Jt.Z)({},this.linkInfo),{},{hash:this.hash,client:this.torrentInfo.client,savePath:this.torrentInfo.savePath,keepStruct:"normal"!==this.linkInfo.linkMode,replaceTopDir:"keepStruct-2"===this.linkInfo.linkMode,keepTopDir:"keepStruct-3"===this.linkInfo.linkMode});"dryrun"===e?t.dryrun=!0:"normal"===this.linkInfo.linkMode&&(t.files=this.fileList.filter((e=>-999!==e.episode)).map((e=>({season:e.season,filepath:e.file,folderName:e.folderName,seriesName:e.seriesName,linkFile:e.newLinkFile||e.linkFile}))));const a=await this.$api().torrent.link(t);if("dryrun"!==e)return void this.$message().success(a.message);if(this.fileList=a.data,"movie"===this.linkInfo.type)return}catch(a){this.$message().error(a.message)}const t=(""+Math.max(10,...(this.fileList||[]).map((e=>e.episode)))).length;this.fileList=this.fileList.sort(((e,t)=>e.file>t.file?1:-1)).map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{episodeUnlink:!1,seasonUnlink:!1,newLinkFile:e.linkFile.replace("{SEASON}","S"+"0".repeat(2-(""+e.season).length)+e.season).replace("{EPISODE}","E"+"0".repeat(Math.max(0,t-(""+e.episode).length))+e.episode).replace("{SERIESNAME}",e.seriesName)})))},refreshSeason(){const e=(""+Math.max(10,...this.fileList.map((e=>e.episode)))).length,t=this.fileList.filter((e=>-999!==e.episode));for(const[a,l]of t.entries())l.seasonUnlink||0===a?l.season=+l.season||(0===+l.season?0:1):l.season=+t[a-1].season||(0===+t[a-1].season?0:1),l.newLinkFile=l.linkFile.replace("{SEASON}","S"+"0".repeat(2-(""+l.season).length)+l.season).replace("{EPISODE}","E"+"0".repeat(Math.max(0,e-(""+l.episode).length))+l.episode).replace("{SERIESNAME}",l.seriesName)},refreshEpisode(){const e=(""+Math.max(10,...this.fileList.map((e=>e.episode)))).length,t=this.fileList.filter((e=>-999!==e.episode));for(const[a,l]of t.entries())l.episodeUnlink||0===a?l.episode=+l.episode||(0===+l.episode?0:1):l.episode=(+t[a-1].episode||(0===+t[a-1].episode?0:1))+1,l.newLinkFile=l.linkFile.replace("{SEASON}","S"+"0".repeat(2-(""+l.season).length)+l.season).replace("{EPISODE}","E"+"0".repeat(Math.max(0,e-(""+l.episode).length))+l.episode).replace("{SERIESNAME}",l.seriesName)},refreshSeriesName(){const e=(""+Math.max(10,...this.fileList.map((e=>e.episode)))).length,t=this.fileList.filter((e=>-999!==e.episode));for(const[a,l]of t.entries())l.seriesNameUnlink||0===a||(l.seriesName=t[a-1].seriesName),l.newLinkFile=l.linkFile.replace("{SEASON}","S"+"0".repeat(2-(""+l.season).length)+l.season).replace("{EPISODE}","E"+"0".repeat(Math.max(0,e-(""+l.episode).length))+l.episode).replace("{SERIESNAME}",l.seriesName)}},async mounted(){this.hash=this.$route.query.hash,this.hash?(this.listSubscribe(),this.listLinkRule(),this.getTorrentInfo()):await this.$message().error("当前页面需要从种子聚合页进入!")}};const _u=(0,oe.Z)(bu,[["render",ku],["__scopeId","data-v-f591c690"]]);var xu=_u;const Wu=e=>((0,te.dD)("data-v-b83544c6"),e=e(),(0,te.Cn)(),e),Uu=Wu((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"批量链接",-1))),Cu={class:"bulkLink"},zu={style:{"text-align":"left"}},$u=Wu((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"批量链接",-1))),Iu=(0,te.Uk)("电影"),Su=(0,te.Uk)("剧集"),Ru=(0,te.Uk)("正常模式"),Du=(0,te.Uk)("保留目录结构并添加顶层文件夹"),ju=(0,te.Uk)("保留目录结构并替换顶层文件夹"),qu=(0,te.Uk)("保留目录结构并不修改顶层文件夹"),Mu=(0,te.Uk)("检查"),Pu=(0,te.Uk)("识别"),Tu=(0,te.Uk)("执行"),Hu=Wu((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"选择文件",-1))),Au=(0,te.Uk)(" 检查 "),Ou=Wu((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"批量链接列表",-1)));function Yu(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-input"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form"),p=(0,te.up)("fa"),w=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Uu,(0,te.Wm)(o),(0,te._)("div",Cu,[(0,te._)("div",zu,[$u,(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,model:s.bulkLinkInfo,size:"small",onFinish:i.getBulkLinkList,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"下载器",name:"client",extra:"留空则选择所有下载器"},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.bulkLinkInfo.client,"onUpdate:value":t[0]||(t[0]=e=>s.bulkLinkInfo.client=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"链接规则",name:"linkRule",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.bulkLinkInfo.linkRule,"onUpdate:value":t[1]||(t[1]=e=>s.bulkLinkInfo.linkRule=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.linkRules,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"类型",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.bulkLinkInfo.type,"onUpdate:value":t[2]||(t[2]=e=>s.bulkLinkInfo.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"movie"},{default:(0,te.w5)((()=>[Iu])),_:1}),(0,te.Wm)(n,{value:"series"},{default:(0,te.w5)((()=>[Su])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"资料库文件夹",name:"libraryPath",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",options:s.libraryPaths,onSearch:t[3]||(t[3]=e=>s.libraryPaths[0].value=e),showSearch:!0,value:s.bulkLinkInfo.libraryPath,"onUpdate:value":t[4]||(t[4]=e=>s.bulkLinkInfo.libraryPath=e)},null,8,["options","value"])])),_:1}),(0,te.Wm)(d,{label:"链接模式",name:"linkMode",rules:[{required:!0,message:"${label}不可为空! "}],extra:"链接模式"},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.bulkLinkInfo.linkMode,"onUpdate:value":t[5]||(t[5]=e=>s.bulkLinkInfo.linkMode=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"normal"},{default:(0,te.w5)((()=>[Ru])),_:1}),(0,te.Wm)(n,{value:"keepStruct-1"},{default:(0,te.w5)((()=>[Du])),_:1}),(0,te.Wm)(n,{value:"keepStruct-2"},{default:(0,te.w5)((()=>[ju])),_:1}),(0,te.Wm)(n,{value:"keepStruct-3"},{default:(0,te.w5)((()=>[qu])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"关键词",name:"keyword",rules:[{required:!0,message:"${label}不可为空! "}],extra:"分类或保存路径包含的关键词"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.bulkLinkInfo.keyword,"onUpdate:value":t[6]||(t[6]=e=>s.bulkLinkInfo.keyword=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Mu])),_:1}),(0,te.Wm)(c,{type:"primary",danger:"",style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:i.doScrape},{default:(0,te.w5)((()=>[Pu])),_:1},8,["onClick"]),(0,te.Wm)(c,{type:"primary",danger:"",style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:i.doLink},{default:(0,te.w5)((()=>[Tu])),_:1},8,["onClick"])])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"]),(0,te.Wm)(o),Hu,(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.selectTorrent,"onUpdate:value":t[7]||(t[7]=e=>s.selectTorrent=e),style:{width:"calc(100% - 80px)"}},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.torrentList,(e=>((0,te.wg)(),(0,te.j4)(n,{disabled:e.visible,value:e.hash,"onUpdate:value":t=>e.hash=t,key:e.hash},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.name),1)])),_:2},1032,["disabled","value","onUpdate:value"])))),128))])),_:1},8,["value"]),(0,te.Wm)(c,{size:"small",onClick:t[8]||(t[8]=()=>{s.torrentList.filter((e=>e.hash===s.selectTorrent))[0].visible=0,s.selectTorrent=""}),type:"primary",style:{width:"64px","margin-left":"16px"}},{default:(0,te.w5)((()=>[Au])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["class"]),(0,te.Wm)(o),(0,te.Wm)(w,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.torrentList.filter((e=>e.visible)),pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[Ou])),bodyCell:(0,te.w5)((({column:e,record:t})=>["bulkLinkFile"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(t.newLinkFile||t.bulkLinkFile),1)],64)):(0,te.kq)("",!0),"scrapedName"===e.dataIndex?((0,te.wg)(),(0,te.j4)(u,{key:1,size:"small",value:t.scrapedName,"onUpdate:value":e=>t.scrapedName=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"status"===e.dataIndex?((0,te.wg)(),(0,te.iD)("span",{key:2,style:(0,De.j5)({color:"识别失败"===t.status?"red":""})},(0,De.zw)(t.status),5)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.j4)(p,{key:3,icon:["fas","times"],onClick:()=>{t.visible=!1},style:{width:"20px",color:"red",cursor:"pointer"}},null,8,["onClick"])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"])])])],64)}var Lu={data(){const e=[{title:"识别名称",dataIndex:"scrapedName",width:10,fixed:!0},{title:"状态",dataIndex:"status",width:10},{title:"种子名称",dataIndex:"name",width:60},{title:"操作",width:10}];return{columns:e,hash:"",torrentList:[],downloaders:[],subscribes:"",libraryPaths:[],selectTorrent:"",linkRules:[],bulkLinkInfo:{libraryPath:"",linkMode:"normal"},torrentInfo:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getBulkLinkList(){try{const e=await this.$api().torrent.getBulkLinkList(this.bulkLinkInfo.keyword,this.bulkLinkInfo.client);this.torrentList=e.data.map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{visible:!0,scrapedName:"",status:"待识别"})))}catch(e){await this.$message().error(e.message)}},async scrapeName(e){try{const t=await this.$api().torrent.scrapeName(e.name,this.bulkLinkInfo.type);this.torrentList.filter((t=>t.hash===e.hash))[0].scrapedName=t.data}catch(t){await this.$message().error(t.message)}},async listLinkRule(){try{const e=await this.$api().linkRule.list();this.linkRules=e.data}catch(e){this.$message().error(e.message)}},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data,this.libraryPaths=[{value:"手动输入"}];for(const t of this.subscribes.map((e=>e.categories)).flat())-1===this.libraryPaths.map((e=>e.value)).indexOf(t.libraryPath)&&this.libraryPaths.push({value:t.libraryPath})}catch(e){this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data}catch(e){this.$message().error(e.message)}},async doScrape(){for(const e of this.torrentList)e.visible&&("keepStruct-3"!==this.bulkLinkInfo.linkMode?(e.status="识别中",await this.scrapeName(e),e.status=e.scrapedName?"已识别":"识别失败"):(e.status="已识别",e.scrapedName="不需要~"))},async doLink(){for(const e of this.torrentList)""!==e.scrapedName&&(e.status="待链接");for(const e of this.torrentList){if(""===e.scrapedName||!e.visible)continue;const t=await this.$api().torrent.link({direct:"normal"===this.bulkLinkInfo.linkMode,keepStruct:"normal"!==this.bulkLinkInfo.linkMode,replaceTopDir:"keepStruct-2"===this.bulkLinkInfo.linkMode,keepTopDir:"keepStruct-3"===this.bulkLinkInfo.linkMode,hash:e.hash,type:this.bulkLinkInfo.type,mediaName:e.scrapedName,linkRule:this.bulkLinkInfo.linkRule,client:e.client,libraryPath:this.bulkLinkInfo.libraryPath,savePath:e.savePath});e.status=(t?t.data:"")||"链接失败"}}},async mounted(){this.listDownloader(),this.listSubscribe(),this.listLinkRule()}};const Ku=(0,oe.Z)(Lu,[["render",Yu],["__scopeId","data-v-b83544c6"]]);var Bu=Ku;const Nu=e=>((0,te.dD)("data-v-46ed9b46"),e=e(),(0,te.Cn)(),e),Zu=Nu((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"监控分类",-1))),Eu={class:"watch"},Fu=Nu((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"监控分类列表",-1))),Vu=(0,te.Uk)("启用"),Gu=(0,te.Uk)("禁用"),Ju={key:2},Xu=["onClick"],Qu=(0,te.Uk)("删除"),ec=Nu((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),tc=Nu((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑监控分类",-1))),ac={style:{"text-align":"left"}},lc=(0,te.Uk)("启用"),sc=(0,te.Uk)("电影"),ic=(0,te.Uk)("剧集"),oc=(0,te.Uk)("正常模式"),nc=(0,te.Uk)("保留目录结构并添加顶层文件夹"),rc=(0,te.Uk)("保留目录结构并替换顶层文件夹"),dc=(0,te.Uk)("保留目录结构并不修改顶层文件夹"),uc=["onClick"],cc=(0,te.Uk)(" 新增条目 "),mc=(0,te.Uk)("应用 | 完成"),pc=(0,te.Uk)("清空");function wc(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-tag"),r=(0,te.up)("a-button"),d=(0,te.up)("a-popover"),u=(0,te.up)("a-table"),c=(0,te.up)("a-input"),m=(0,te.up)("a-form-item"),p=(0,te.up)("a-checkbox"),w=(0,te.up)("a-select-option"),h=(0,te.up)("a-select"),f=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Zu,(0,te.Wm)(o),(0,te._)("div",Eu,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.watches,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[Fu])),bodyCell:(0,te.w5)((({column:e,record:t})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[t.enable?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[Vu])),_:1})):(0,te.kq)("",!0),t.enable?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[Gu])),_:1}))],64)):(0,te.kq)("",!0),"downloader"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)((s.downloaders.filter((e=>e.id===t.downloader))[0]||{}).alias),1)],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",Ju,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,Xu),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(d,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.deleteWatch(t),size:"small"},{default:(0,te.w5)((()=>[Qu])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[ec])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),tc,(0,te._)("div",ac,[(0,te.Wm)(f,{labelAlign:"right",labelWrap:!0,model:s.watch,size:"small",onFinish:i.modifyWatch,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{label:"别名",name:"alias",extra:"给 监控分类取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.watch.alias,"onUpdate:value":t[0]||(t[0]=e=>s.watch.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"启用",name:"enable",extra:"选择是否启用 监控分类",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{checked:s.watch.enable,"onUpdate:checked":t[1]||(t[1]=e=>s.watch.enable=e)},{default:(0,te.w5)((()=>[lc])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(m,{label:"执行周期",name:"cron",extra:"脚本的执行周期, 默认 * * * * * 一分钟执行一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.watch.cron,"onUpdate:value":t[2]||(t[2]=e=>s.watch.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"下载器",name:"downloader",extra:"所要监控的下载器",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.watch.downloader,"onUpdate:value":t[3]||(t[3]=e=>s.watch.downloader=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(w,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"通知方式",name:"notify",extra:"通知方式, 用于推送信息, 留空则不推送信息"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.watch.notify,"onUpdate:value":t[4]||(t[4]=e=>s.watch.notify=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(w,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"资源类型",name:"type",extra:"该分类下的资源类型, 选择该项目可以提高识别准确率, 如果是混合类型分类, 请不要勾选"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.watch.type,"onUpdate:value":t[5]||(t[5]=e=>s.watch.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{value:"movie"},{default:(0,te.w5)((()=>[sc])),_:1}),(0,te.Wm)(w,{value:"series"},{default:(0,te.w5)((()=>[ic])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"分类",name:"category",extra:"所要监控的分类, 也可以是保存路径, 需完全匹配",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.watch.category,"onUpdate:value":t[6]||(t[6]=e=>s.watch.category=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"资料库文件夹",name:"libraryPath",extra:"链接目标的资料库文件夹, 填写规则: 电影:剧集, 如: movie:series",rules:[{validator:async(e,t)=>{if(2!==t.split(":").length)throw"格式 电影文件夹:剧集文件夹, 例 movie:series"}}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.watch.libraryPath,"onUpdate:value":t[7]||(t[7]=e=>s.watch.libraryPath=e)},null,8,["value"])])),_:1},8,["rules"]),(0,te.Wm)(m,{label:"链接规则",name:"linkRule",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.watch.linkRule,"onUpdate:value":t[8]||(t[8]=e=>s.watch.linkRule=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.linkRules,(e=>((0,te.wg)(),(0,te.j4)(w,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"链接模式",name:"linkMode",rules:[{required:!0,message:"${label}不可为空! "}],extra:"链接模式"},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{size:"small",value:s.watch.linkMode,"onUpdate:value":t[9]||(t[9]=e=>s.watch.linkMode=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{value:"normal"},{default:(0,te.w5)((()=>[oc])),_:1}),(0,te.Wm)(w,{value:"keepStruct-1"},{default:(0,te.w5)((()=>[nc])),_:1}),(0,te.Wm)(w,{value:"keepStruct-2"},{default:(0,te.w5)((()=>[rc])),_:1}),(0,te.Wm)(w,{value:"keepStruct-3"},{default:(0,te.w5)((()=>[dc])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"强制识别",name:"forceScrape"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.scrapeColumns,size:"small","data-source":s.watch.forceScrape,pagination:!1,scroll:{x:540}},{bodyCell:(0,te.w5)((({column:e,record:t})=>["keyword"===e.dataIndex?((0,te.wg)(),(0,te.j4)(c,{key:0,size:"small",value:t.keyword,"onUpdate:value":e=>t.keyword=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"name"===e.dataIndex?((0,te.wg)(),(0,te.j4)(c,{key:1,size:"small",value:t.name,"onUpdate:value":e=>t.name=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"season"===e.dataIndex?((0,te.wg)(),(0,te.j4)(c,{key:2,size:"small",value:t.season,"onUpdate:value":e=>t.season=e},null,8,["value","onUpdate:value"])):(0,te.kq)("",!0),"option"===e.dataIndex?((0,te.wg)(),(0,te.iD)("a",{key:3,style:{color:"red"},onClick:e=>s.watch.forceScrape=s.watch.forceScrape.filter((e=>e!==t))},"删除",8,uc)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(r,{type:"primary",onClick:t[10]||(t[10]=e=>s.watch.forceScrape.push((0,Jt.Z)({},s.scrapeMap))),size:"small"},{default:(0,te.w5)((()=>[cc])),_:1})])),_:1}),(0,te.Wm)(m,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[mc])),_:1}),(0,te.Wm)(r,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[11]||(t[11]=e=>i.clearWatch())},{default:(0,te.w5)((()=>[pc])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var hc={data(){const e=[{title:"ID",dataIndex:"id",width:18,fixed:!0},{title:"别名",dataIndex:"alias",width:20},{title:"启用",dataIndex:"enable",width:15},{title:"下载器",dataIndex:"downloader",width:24},{title:"分类",dataIndex:"category",width:24},{title:"操作",width:24}],t=[{title:"关键词",dataIndex:"keyword",fixed:!0,width:24},{title:"名称",dataIndex:"name",width:24},{title:"季",dataIndex:"season",width:6},{title:"操作",dataIndex:"option",width:6}];return{columns:e,scrapeColumns:t,watches:[],downloaders:[],linkRules:[],notifications:[],watch:{},scrapeMap:{keyword:"",name:"",season:""},defaultWatch:{enable:!0,cron:"* * * * *",downlaoder:"",category:"",libraryPath:"",linkRule:"",notify:"",forceScrape:[]},loading:!0}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listWatch(){this.loading=!0;try{const e=await this.$api().watch.list();this.watches=e.data}catch(e){this.$message().error(e.message)}this.loading=!1},async listLinkRule(){try{const e=await this.$api().linkRule.list();this.linkRules=e.data}catch(e){this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data}catch(e){this.$message().error(e.message)}},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data}catch(e){this.$message().error(e.message)}},async modifyWatch(){try{await this.$api().watch.modify((0,Jt.Z)({},this.watch)),this.$message().success((this.watch.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listWatch()),1e3),this.clearWatch()}catch(e){this.$message().error(e.message)}},modifyClick(e){this.watch=(0,Jt.Z)((0,Jt.Z)({},e),{},{forceScrape:[...e.forceScrape]})},async deleteWatch(e){try{await this.$api().watch.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listWatch()}catch(t){this.$message().error(t.message)}},clearWatch(){this.watch=(0,Jt.Z)((0,Jt.Z)({},this.defaultWatch),{},{forceScrape:[]})}},async mounted(){this.clearWatch(),this.listWatch(),this.listDownloader(),this.listNotification(),this.listLinkRule()}};const fc=(0,oe.Z)(hc,[["render",wc],["__scopeId","data-v-46ed9b46"]]);var gc=fc;const yc=e=>((0,te.dD)("data-v-d7df152e"),e=e(),(0,te.Cn)(),e),vc=yc((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"定时脚本",-1))),kc={class:"script"},bc=yc((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"定时脚本列表",-1))),_c=(0,te.Uk)("启用"),xc=(0,te.Uk)("禁用"),Wc={key:1},Uc=["onClick"],Cc=(0,te.Uk)("删除"),zc=yc((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1))),$c=yc((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","padding-left":"8px"}},"新增 | 编辑定时脚本",-1))),Ic={style:{"text-align":"left"}},Sc=(0,te.Uk)("启用"),Rc=(0,te.Uk)("应用 | 完成"),Dc=(0,te.Uk)("立即执行一次"),jc=(0,te.Uk)("清空");function qc(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-tag"),r=(0,te.up)("a-button"),d=(0,te.up)("a-popover"),u=(0,te.up)("a-table"),c=(0,te.up)("a-input"),m=(0,te.up)("a-form-item"),p=(0,te.up)("a-checkbox"),w=(0,te.up)("a-textarea"),h=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[vc,(0,te.Wm)(o),(0,te._)("div",kc,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.scripts,pagination:!1,scroll:{x:640}},{title:(0,te.w5)((()=>[bc])),bodyCell:(0,te.w5)((({column:e,record:t})=>["enable"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[t.enable?((0,te.wg)(),(0,te.j4)(n,{key:0,color:"success"},{default:(0,te.w5)((()=>[_c])),_:1})):(0,te.kq)("",!0),t.enable?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(n,{key:1,color:"error"},{default:(0,te.w5)((()=>[xc])),_:1}))],64)):(0,te.kq)("",!0),"操作"===e.title?((0,te.wg)(),(0,te.iD)("span",Wc,[(0,te._)("a",{onClick:e=>i.modifyClick(t)},"编辑",8,Uc),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(d,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.deleteScript(t),size:"small"},{default:(0,te.w5)((()=>[Cc])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[zc])),_:2},1024)])):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"]),(0,te.Wm)(o),$c,(0,te._)("div",Ic,[(0,te.Wm)(h,{labelAlign:"right",labelWrap:!0,model:s.script,size:"small",onFinish:i.modifyScript,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{label:"别名",name:"alias",extra:"给 定时脚本取一个好记的名字",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.script.alias,"onUpdate:value":t[0]||(t[0]=e=>s.script.alias=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"启用",name:"enable",extra:"选择是否启用 定时脚本",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{checked:s.script.enable,"onUpdate:checked":t[1]||(t[1]=e=>s.script.enable=e)},{default:(0,te.w5)((()=>[Sc])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(m,{label:"执行周期",name:"cron",extra:"脚本的执行周期, 默认 * * * * * 一分钟执行一次",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.script.cron,"onUpdate:value":t[2]||(t[2]=e=>s.script.cron=e)},null,8,["value"])])),_:1}),(0,te.Wm)(m,{label:"Code",name:"script",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{size:"small",value:s.script.script,"onUpdate:value":t[3]||(t[3]=e=>s.script.script=e),rows:12},null,8,["value"])])),_:1}),(0,te.Wm)(m,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Rc])),_:1}),(0,te.Wm)(r,{type:"primary",onClick:i.run,style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Dc])),_:1},8,["onClick"]),(0,te.Wm)(r,{style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"},onClick:t[4]||(t[4]=e=>i.clearScript())},{default:(0,te.w5)((()=>[jc])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Mc={data(){const e=[{title:"ID",dataIndex:"id",width:18,fixed:!0},{title:"别名",dataIndex:"alias",width:20},{title:"启用",dataIndex:"enable",width:15},{title:"周期",dataIndex:"cron",width:24},{title:"操作",width:24}];return{columns:e,scripts:[],script:{},defaultScript:{enable:!0,cron:"* * * * *",script:"logger.info('VERTEX IS THE BEST!')"},loading:!0}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listScript(){this.loading=!0;try{const e=await this.$api().script.list();this.scripts=e.data}catch(e){this.$message().error(e.message)}this.loading=!1},async modifyScript(){try{await this.$api().script.modify((0,Jt.Z)({},this.script)),this.$message().success((this.script.id?"编辑":"新增")+"成功, 列表正在刷新..."),setTimeout((()=>this.listScript()),1e3),this.clearScript()}catch(e){this.$message().error(e.message)}},async run(){try{await this.$api().script.run((0,Jt.Z)({},this.script)),this.$message().success("执行成功, 执行结果或报错请查看日志"),setTimeout((()=>this.listScript()),1e3)}catch(e){this.$message().error(e.message)}},modifyClick(e){this.script=(0,Jt.Z)({},e)},async deleteScript(e){try{await this.$api().script.delete(e.id),this.$message().success("删除成功, 列表正在刷新..."),await this.listScript()}catch(t){this.$message().error(t.message)}},clearScript(){this.script=(0,Jt.Z)({},this.defaultScript)}},async mounted(){this.clearScript(),this.listScript()}};const Pc=(0,oe.Z)(Mc,[["render",qc],["__scopeId","data-v-d7df152e"]]);var Tc=Pc;const Hc={},Ac=Hc;var Oc=Ac;const Yc={},Lc=Yc;var Kc=Lc;const Bc=e=>((0,te.dD)("data-v-5dabedd8"),e=e(),(0,te.Cn)(),e),Nc=Bc((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"蜜柑番剧历史下载",-1))),Zc={class:"mikan-history"},Ec={style:{"text-align":"left"}},Fc=(0,te.Uk)("检查"),Vc=(0,te.Uk)("推送"),Gc={class:"mikan-history",style:{"text-align":"left"}},Jc=Bc((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"种子列表",-1))),Xc=(0,te.Uk)(" 选中 ");function Qc(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-input"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form"),p=(0,te.up)("a-switch"),w=(0,te.up)("a-checkbox"),h=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Nc,(0,te.Wm)(o),(0,te._)("div",Zc,[(0,te._)("div",Ec,[(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,model:s.info,size:"small",onFinish:i.doSearch,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"RSS",name:"rss",extra:"通过 RSS 任务执行规则筛选与推送操作",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.info.rss,"onUpdate:value":t[0]||(t[0]=e=>s.info.rss=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.rssList,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"番剧",name:"name",rules:[{required:!0,message:"${label}不可为空! "}],extra:"搜索的关键词，可以搜番名也可以带字幕组，例: 夏日重现 或 夏日重现 诸神"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.info.name,"onUpdate:value":t[1]||(t[1]=e=>s.info.name=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Fc])),_:1}),(0,te.Wm)(c,{type:"primary",onClick:i.doPush,style:{"margin-left":"12px","margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Vc])),_:1},8,["onClick"])])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])]),(0,te.Wm)(o),(0,te._)("div",Gc,[(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:6},wrapperCol:{span:18},autocomplete:"off"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{wrapperCol:{span:24}},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.dryrunColumns,size:"small",loading:s.loading,"data-source":s.filteredTorrents,pagination:!1,scroll:{x:960}},{title:(0,te.w5)((()=>[Jc,(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(p,{onChange:t[2]||(t[2]=t=>i.filterTorrent(e.record)),checked:s.unfilter,"onUpdate:checked":t[3]||(t[3]=e=>s.unfilter=e),"checked-children":"显示","un-checked-children":"隐藏"},null,8,["checked"])])),headerCell:(0,te.w5)((({column:e})=>["checked"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Wm)(w,{onChange:i.selectAll},null,8,["onChange"]),(0,te.Wm)(o,{type:"vertical"}),Xc],64)):(0,te.kq)("",!0)])),bodyCell:(0,te.w5)((({column:t,record:a})=>["checked"===t.dataIndex?((0,te.wg)(),(0,te.j4)(w,{key:0,checked:a.checked,"onUpdate:checked":e=>a.checked=e},null,8,["checked","onUpdate:checked"])):(0,te.kq)("",!0),"size"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.size)),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source"])])),_:1})])),_:1})])],64)}var em={data(){const e=[{title:"选中",dataIndex:"checked",width:4},{title:"种子标题",dataIndex:"name",width:288},{title:"种子大小",dataIndex:"size",width:48},{title:"结果",dataIndex:"status",width:96}];return{dryrunColumns:e,torrents:[],unfilter:!1,filteredTorrents:[],info:{},loading:!1,rssList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listRss(){try{const e=await this.$api().rss.list();this.rssList=e.data}catch(e){this.$message().error(e.message)}},async doSearch(){try{this.loading=!0;const e=await this.$api().rss.mikanSearch(this.info);this.torrents=e.data,this.filterTorrent()}catch(e){await this.$message().error(e.message)}this.loading=!1},async doPush(){try{const e=this.filteredTorrents.filter((e=>e.checked)),t={torrents:e,rss:this.info.rss},a=await this.$api().rss.mikanPush(t);this.$message().success(a.message)}catch(e){await this.$message().error(e.message)}this.loading=!1},async filterTorrent(){this.loading=!0,this.filteredTorrents=this.unfilter?this.torrents:this.torrents.filter((e=>0===e.status.indexOf("匹配到选择规则")||0===e.status.indexOf("无选择规则"))),this.filteredTorrents=this.filteredTorrents.map((e=>(0,Jt.Z)((0,Jt.Z)({},e),{},{checked:0===e.status.indexOf("匹配到选择规则")||0===e.status.indexOf("无选择规则")}))),this.loading=!1},async selectAll(e){for(const t of this.filteredTorrents)t.checked=e.target.checked}},async mounted(){this.listRss()}};const tm=(0,oe.Z)(em,[["render",Qc],["__scopeId","data-v-5dabedd8"]]);var am=tm;const lm=e=>((0,te.dD)("data-v-d996362e"),e=e(),(0,te.Cn)(),e),sm=lm((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"网络测试",-1))),im={class:"network-test"},om={style:{"text-align":"left"}},nm=(0,te.Uk)("执行");function rm(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-textarea"),c=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[sm,(0,te.Wm)(o),(0,te._)("div",im,[(0,te._)("div",om,[(0,te.Wm)(c,{labelAlign:"right",labelWrap:!0,model:s.info,size:"small",onFinish:i.doTest,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"地址",name:"address",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.info.address,"onUpdate:value":t[0]||(t[0]=e=>s.info.address=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"Cookie",name:"cookie"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.info.cookie,"onUpdate:value":t[1]||(t[1]=e=>s.info.cookie=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[nm])),_:1})])),_:1},8,["wrapperCol"]),(0,te.Wm)(r,{label:"结果"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{value:s.result,"onUpdate:value":t[2]||(t[2]=e=>s.result=e),type:"textarea",rows:20},null,8,["value"])])),_:1})])),_:1},8,["model","onFinish","class"])])])],64)}var dm={data(){return{info:{cookie:""},result:""}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async doTest(){try{const e=await this.$api().setting.networkTest(this.info);this.result=e.data}catch(e){await this.$message().error(e.message)}}},async mounted(){}};const um=(0,oe.Z)(dm,[["render",rm],["__scopeId","data-v-d996362e"]]);var cm=um;const mm=e=>((0,te.dD)("data-v-b61483e2"),e=e(),(0,te.Cn)(),e),pm=mm((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"登录 MTeam",-1))),wm={class:"mteam"},hm={style:{"text-align":"left"}},fm=(0,te.Uk)("执行");function gm(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[pm,(0,te.Wm)(o),(0,te._)("div",wm,[(0,te._)("div",hm,[(0,te.Wm)(u,{labelAlign:"right",labelWrap:!0,model:s.mteam,size:"small",onFinish:i.doLogin,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"Cookie",name:"cookie",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.mteam.cookie,"onUpdate:value":t[0]||(t[0]=e=>s.mteam.cookie=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"二步验证码",name:"otp"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.mteam.otp,"onUpdate:value":t[1]||(t[1]=e=>s.mteam.otp=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[fm])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var ym={data(){return{mteam:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async doLogin(){try{const e=await this.$api().setting.loginMTeam(this.mteam);await this.$message().success(e.message)}catch(e){await this.$message().error(e.message)}}},async mounted(){}};const vm=(0,oe.Z)(ym,[["render",gm],["__scopeId","data-v-b61483e2"]]);var km=vm;const bm=e=>((0,te.dD)("data-v-57a6b64a"),e=e(),(0,te.Cn)(),e),_m=bm((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"修改 HOSTS",-1))),xm={class:"hosts"},Wm={style:{"text-align":"left"}},Um={style:{"margin-top":"16px"}},Cm=(0,te.Uk)("保存"),zm={style:{"margin-top":"16px"}},$m=(0,te.Uk)("导出"),Im=(0,te.Uk)("导入"),Sm=bm((()=>(0,te._)("div",{style:{"margin-top":"32px"}},[(0,te.Uk)(" 说明: "),(0,te._)("br"),(0,te.Uk)(" 1. 输入框内容实时读取自文件 /etc/hosts "),(0,te._)("br"),(0,te.Uk)(" 2. 保存是指将内容保存至 /etc/hosts "),(0,te._)("br"),(0,te.Uk)(" 3. 导出是指将内容保存至 /etc/hosts 的内容复制至 vertex/data/hosts "),(0,te._)("br"),(0,te.Uk)(" 4. 导入是指将内容保存至 vertex/data/hosts 的内容复制至 /etc/hosts "),(0,te._)("br"),(0,te.Uk)(" 5. 内容格式同普通的 hosts "),(0,te._)("br"),(0,te.Uk)("    例: 127.0.0.1 localhost"),(0,te._)("br"),(0,te.Uk)(" 6. 输入框结尾至少保留一个空行 "),(0,te._)("br")],-1)));function Rm(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-textarea"),r=(0,te.up)("a-button");return(0,te.wg)(),(0,te.iD)(te.HY,null,[_m,(0,te.Wm)(o),(0,te._)("div",xm,[(0,te._)("div",Wm,[(0,te.Wm)(n,{value:s.hosts,"onUpdate:value":t[0]||(t[0]=e=>s.hosts=e),type:"textarea",rows:10},null,8,["value"]),(0,te._)("div",Um,[(0,te.Wm)(r,{type:"primary",onClick:i.save},{default:(0,te.w5)((()=>[Cm])),_:1},8,["onClick"])]),(0,te._)("div",zm,[(0,te.Wm)(r,{size:"small",type:"primary",onClick:i._export},{default:(0,te.w5)((()=>[$m])),_:1},8,["onClick"]),(0,te.Wm)(r,{size:"small",type:"primary",style:{"margin-left":"12px"},onClick:i._import},{default:(0,te.w5)((()=>[Im])),_:1},8,["onClick"])]),Sm])])],64)}var Dm={data(){return{hosts:""}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getHosts(){try{const e=await this.$api().setting.getHosts();this.hosts=e.data}catch(e){await this.$message().error(e.message)}},async save(){try{await this.$api().setting.save({hosts:this.hosts}),await this.$message().success("保存成功")}catch(e){await this.$message().error(e.message)}},async _export(){try{await this.$api().setting.export(),await this.$message().success("导出成功")}catch(e){await this.$message().error(e.message)}},async _import(){try{await this.$api().setting.import(),await this.$message().success("导入成功"),this.getHosts()}catch(e){await this.$message().error(e.message)}}},async mounted(){this.getHosts()}};const jm=(0,oe.Z)(Dm,[["render",Rm],["__scopeId","data-v-57a6b64a"]]);var qm=jm;const Mm=e=>((0,te.dD)("data-v-c3270c46"),e=e(),(0,te.Cn)(),e),Pm=Mm((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"HTTP 代理",-1))),Tm={class:"hosts"},Hm={style:{"text-align":"left"}},Am=Mm((()=>(0,te._)("div",{style:{"margin-top":"12px"}},null,-1))),Om={style:{"margin-top":"16px"}},Ym=(0,te.Uk)("保存"),Lm=Mm((()=>(0,te._)("div",{style:{"margin-top":"32px"}},[(0,te.Uk)(" 说明: "),(0,te._)("br"),(0,te.Uk)(" 1. http proxy 格式为 http://192.168.1.1:8080"),(0,te._)("br"),(0,te.Uk)(" 2. domains 指走 http proxy 的域名列表, 一行一个"),(0,te._)("br"),(0,te.Uk)(" 3. 域名需完全匹配, 例: www.baidu.com"),(0,te._)("br"),(0,te.Uk)(" 3. 代理设置不支持绕过 Cloudflare 时使用"),(0,te._)("br")],-1)));function Km(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-textarea"),d=(0,te.up)("a-button");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Pm,(0,te.Wm)(o),(0,te._)("div",Tm,[(0,te._)("div",Hm,[(0,te.Wm)(n,{size:"small",value:s.proxy,"onUpdate:value":t[0]||(t[0]=e=>s.proxy=e),placeholder:"http://192.168.1.1:8080"},null,8,["value"]),Am,(0,te.Wm)(r,{value:s.domains,"onUpdate:value":t[1]||(t[1]=e=>s.domains=e),type:"textarea",rows:10,placeholder:"www.baidu.com"},null,8,["value"]),(0,te._)("div",Om,[(0,te.Wm)(d,{type:"primary",onClick:i.save},{default:(0,te.w5)((()=>[Ym])),_:1},8,["onClick"])]),Lm])])],64)}var Bm={data(){return{proxy:"",domains:""}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getProxy(){try{const e=await this.$api().setting.getProxy();this.domains=e.data.domains,this.proxy=e.data.proxy}catch(e){await this.$message().error(e.message)}},async save(){try{await this.$api().setting.saveProxy({proxy:this.proxy,domains:this.domains}),await this.$message().success("保存成功")}catch(e){await this.$message().error(e.message)}}},async mounted(){this.getProxy()}};const Nm=(0,oe.Z)(Bm,[["render",Km],["__scopeId","data-v-c3270c46"]]);var Zm=Nm;const Em=e=>((0,te.dD)("data-v-438065cc"),e=e(),(0,te.Cn)(),e),Fm=Em((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"SHELL",-1))),Vm=Em((()=>(0,te._)("div",{class:"shell"},[(0,te._)("div",{id:"xterm",class:"xterm"})],-1)));function Gm(e,t,a,l,s,i){const o=(0,te.up)("a-divider");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Fm,(0,te.Wm)(o),Vm],64)}var Jm=a(12320),Xm=a(12617),Qm=a(3334),ep={name:"Xterm",props:{socketURI:{type:String,default:"/api/server/shell/"}},methods:{initTerm(){const e=new Jm.Terminal({fontFamily:"consolas",fontSize:16,cols:156,rows:44,cursorBlink:!0,customGlyphs:!1,cursorStyle:"bar"}),t=this.socket,a=new Qm.AttachAddon(this.socket),l=new Xm.FitAddon;e.loadAddon(a),e.loadAddon(l),e.open(document.getElementById("xterm")),e.focus(),this.term=e,setTimeout((()=>{l.fit(),t.send(`setWindow:${e.rows}:${e.cols}`)}),1e3),setTimeout((()=>{l.fit(),t.send(`setWindow:${e.rows}:${e.cols}`)}),3e3),setTimeout((()=>{l.fit(),t.send(`setWindow:${e.rows}:${e.cols}`)}),5e3),e.onResize((function(e){t.send(`setWindow:${e.rows}:${e.cols}`)})),window.onresize=function(){l.fit()}},initSocket(){const{protocol:e,host:t}=window.document.location;this.socket=new WebSocket(("http:"===e?"ws:":"wss:")+"//"+t+this.socketURI+this.$route.params.id),this.socketOnClose(),this.socketOnOpen(),this.socketOnError()},socketOnOpen(){this.socket.onopen=()=>{this.initTerm()}},socketOnClose(){this.socket.onclose=()=>{this.term.writeln("\r\n*** SSH SHELL DISCONNECTED ***\r\n")}},socketOnError(){this.socket.onerror=()=>{}}},async mounted(){this.initSocket()},beforeUnmount(){this.socket.close(),this.term.dispose()}};const tp=(0,oe.Z)(ep,[["render",Gm],["__scopeId","data-v-438065cc"]]);var ap=tp;const lp=e=>((0,te.dD)("data-v-bc663f50"),e=e(),(0,te.Cn)(),e),sp=lp((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"路径替换规则生成器",-1))),ip={class:"path-generator"},op={style:{"text-align":"left"}},np=(0,te.Uk)(" 以下路径均是针对影视资源文件本身 "),rp=(0,te.Uk)("软链接"),dp=(0,te.Uk)("硬链接"),up=(0,te.Uk)("执行");function cp(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-alert"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-select-option"),u=(0,te.up)("a-select"),c=(0,te.up)("a-input"),m=(0,te.up)("a-button"),p=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[sp,(0,te.Wm)(o),(0,te._)("div",ip,[(0,te._)("div",op,[(0,te.Wm)(p,{labelAlign:"right",labelWrap:!0,model:s.info,size:"small",onFinish:i.generate,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{message:"填写提示",type:"info"},{description:(0,te.w5)((()=>[np])),_:1})])),_:1},8,["wrapperCol"]),(0,te.Wm)(r,{label:"模式",name:"type",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.info.type,"onUpdate:value":t[0]||(t[0]=e=>s.info.type=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{value:"soft"},{default:(0,te.w5)((()=>[rp])),_:1}),(0,te.Wm)(d,{value:"hard"},{default:(0,te.w5)((()=>[dp])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(r,{label:"下载器路径关系",name:"downloader",rules:[{required:!0,message:"${label}不可为空! "}],extra:"参照自己的容器设置填写, 下载器内路径的映射关系, 主机路径:下载器路径, 例 /volume1/downloads:/downloads; 如果是套件, 可以填写 /volume1/downloads:/volume1/downloads"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.info.downloader,"onUpdate:value":t[1]||(t[1]=e=>s.info.downloader=e)},null,8,["value"])])),_:1}),"soft"===s.info.type?((0,te.wg)(),(0,te.j4)(r,{key:0,label:"媒体服务器路径关系",name:"mediaServer",rules:[{required:!0,message:"${label}不可为空! "}],extra:"参照自己的容器设置填写, 媒体服务器路径关系, 主机路径:媒体库路径, 例 /volume1/downloads:/media; 如果是套件, 可以填写 /volume1/downloads:/volume1/downloads"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.info.mediaServer,"onUpdate:value":t[2]||(t[2]=e=>s.info.mediaServer=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{type:"primary","html-type":"submit",style:{margin:"12px 0"}},{default:(0,te.w5)((()=>[up])),_:1})])),_:1},8,["wrapperCol"]),(0,te.Wm)(r,{label:"结果"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",value:s.result,"onUpdate:value":t[3]||(t[3]=e=>s.result=e)},null,8,["value"])])),_:1})])),_:1},8,["model","onFinish","class"])])])],64)}var mp={data(){return{info:{type:"soft",downloader:"",mediaServer:""},result:""}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async generate(){const{downloader:e,mediaServer:t,type:a}=this.info;if("hard"===a){const t=e.split(":")[0],a=e.split(":")[1];return a?void(this.result=`${a}##${t}`):void(this.result="填写内容格式有误, 请检查后重新填写")}const l=e.split(":")[0],s=e.split(":")[1],i=t.split(":")[0],o=t.split(":")[1];s&&o?0===l.indexOf(i)||0===i.indexOf(l)?(0===l.indexOf(i)&&(this.result=`${s}##${o}${l.replace(i,"")}`),0===i.indexOf(l)&&(this.result=`${s}${i.replace(l,"")}##${o}`)):this.result=`${l} 与 ${i} 应该存在包含或被包含关系, 请检查所填写内容`:this.result="填写内容格式有误, 请检查后重新填写"}},async mounted(){}};const pp=(0,oe.Z)(mp,[["render",cp],["__scopeId","data-v-bc663f50"]]);var wp=pp;const hp=e=>((0,te.dD)("data-v-829139a4"),e=e(),(0,te.Cn)(),e),fp=hp((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"下载器日志",-1))),gp={class:"client-log"},yp=hp((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"下载器日志",-1)));function vp(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[fp,(0,te.Wm)(o),(0,te._)("div",gp,[(0,te.Wm)(n,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small","data-source":s.logs,pagination:s.pagination,scroll:{x:640}},{title:(0,te.w5)((()=>[yp])),bodyCell:(0,te.w5)((({column:t,record:a})=>["timestamp"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$moment(a.timestamp).format("YYYY-MM-DD HH:mm:ss")),1)],64)):(0,te.kq)("",!0),"message"===t.dataIndex?((0,te.wg)(),(0,te.iD)("span",{key:1,style:(0,De.j5)(""+(4===a.type?"color: red":""))},(0,De.zw)(a.message),5)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source","pagination"])])],64)}var kp={data(){const e=[{title:"时间",dataIndex:"timestamp",width:16,fixed:!0},{title:"信息",dataIndex:"message",width:96}],t={position:["topRight","bottomRight"],total:0,pageSize:100,showSizeChanger:!1};return{pagination:t,columns:e,logs:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getLog(){try{const e=await this.$api().downloader.getLogs(this.$route.query.id);this.logs=e.data.reverse(),this.pagination.total=this.logs.length}catch(e){this.$message().error(e.message)}}},async mounted(){this.$route.query.id?await this.getLog():await this.$message().error("当前页面需要从下载器页面进入!")}};const bp=(0,oe.Z)(kp,[["render",vp],["__scopeId","data-v-829139a4"]]);var _p=bp;const xp=e=>((0,te.dD)("data-v-3056fc31"),e=e(),(0,te.Cn)(),e),Wp=xp((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"系统信息",-1))),Up={class:"info"},Cp=(0,te.Uk)("852643057"),zp=(0,te.Uk)("926921776"),$p=xp((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold"}},"微信公众号",-1))),Ip=xp((()=>(0,te._)("img",{style:{"max-height":"480px","max-width":"calc(100vw - 32px)",margin:"0 auto"},src:"/assets/images/subscription.jpg"},null,-1)));function Sp(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-descriptions-item"),r=(0,te.up)("a-descriptions");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Wp,(0,te.Wm)(o),(0,te._)("div",Up,[(0,te.Wm)(r,{title:"版本信息",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{label:"主版本"},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(s.version.version),1)])),_:1}),(0,te.Wm)(n,{label:"编译版本"},{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:t[0]||(t[0]=(...e)=>i.gotoVersion&&i.gotoVersion(...e))},(0,De.zw)(s.version.head),1)])),_:1}),(0,te.Wm)(n,{label:"发布时间"},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(s.version.updateTime),1)])),_:1}),(0,te.Wm)(n,{label:"更新信息"},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(s.version.commitInfo),1)])),_:1})])),_:1}),(0,te.Wm)(o),(0,te.Wm)(r,{title:"交流群组",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{label:"Telegram 频道"},{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:t[1]||(t[1]=(...e)=>i.gotoChannel&&i.gotoChannel(...e))},"前往")])),_:1}),(0,te.Wm)(n,{label:"Telegram 群组"},{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:t[2]||(t[2]=(...e)=>i.gotoGroup&&i.gotoGroup(...e))},"前往")])),_:1}),(0,te.Wm)(n,{label:"刷流交流群"},{default:(0,te.w5)((()=>[Cp])),_:1}),(0,te.Wm)(n,{label:"追剧交流群"},{default:(0,te.w5)((()=>[zp])),_:1})])),_:1}),(0,te.Wm)(o),(0,te.Wm)(r,{title:"开源代码",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{label:"开源代码"},{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:t[3]||(t[3]=(...e)=>i.gotoGithub&&i.gotoGithub(...e))},"GITHUB")])),_:1})])),_:1}),(0,te.Wm)(o),(0,te.Wm)(r,{title:"使用说明",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{label:"Wiki"},{default:(0,te.w5)((()=>[(0,te._)("a",{onClick:t[4]||(t[4]=(...e)=>i.gotoWiki&&i.gotoWiki(...e))},"Wiki")])),_:1})])),_:1}),(0,te.Wm)(o),$p,Ip])],64)}var Rp={data(){return{version:{},runInfo:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getRunInfo(){try{const e=await this.$api().setting.getRunInfo();this.runInfo=e.data}catch(e){await this.$message().error(e.message)}},async gotoChannel(){window.open("https://t.me/lswl_vertex")},async gotoGroup(){window.open("https://t.me/group_vertex")},async gotoWiki(){window.open("https://Wiki.vertex.icu")},async gotoVersion(){window.open("https://lswl.in/2022/01/14/vertex-changelog")},async gotoGithub(){window.open("https://github.com/vertex-app/Vertex")},async gotoGitlab(){window.open("https://gitlab.lswl.in/lswl/vertex")}},async mounted(){this.getRunInfo(),this.version={updateTime:"2023-10-18 16:25:17",head:"228c4d4a1f1b",commitInfo:"- feat: 打包体积 - fix: windows软硬链接",version:"0.0.1"}}};const Dp=(0,oe.Z)(Rp,[["render",Sp],["__scopeId","data-v-3056fc31"]]);var jp=Dp;const qp=e=>((0,te.dD)("data-v-4ec117d0"),e=e(),(0,te.Cn)(),e),Mp=qp((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"日志",-1))),Pp={class:"log"},Tp={style:{"text-align":"left",margin:"24px"}},Hp=(0,te.Uk)("信息"),Ap=(0,te.Uk)("豆瓣"),Op=(0,te.Uk)("豆瓣调试"),Yp=(0,te.Uk)("超级模式"),Lp=(0,te.Uk)("超级模式调试"),Kp=(0,te.Uk)("监控分类"),Bp=(0,te.Uk)("监控分类调试"),Np=(0,te.Uk)("定时脚本"),Zp=(0,te.Uk)("定时脚本调试"),Ep=(0,te.Uk)("错误"),Fp=(0,te.Uk)("调试"),Vp=(0,te.Uk)("跟踪"),Gp=(0,te.Uk)("查询"),Jp={style:{color:"red","font-weight":"bold"}},Xp=qp((()=>(0,te._)("p",{style:{color:"red","font-weight":"bold"}},"注意报错的 message / code / status 附近的内容",-1))),Qp=qp((()=>(0,te._)("p",{style:{color:"red","font-weight":"bold"}},"偶尔报错请直接忽略, 周期性报错需要注意。",-1)));function ew(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-button"),c=(0,te.up)("a-textarea"),m=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Mp,(0,te.Wm)(o),(0,te._)("div",Pp,[(0,te._)("div",Tp,[(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"日志等级",name:"type"},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.type,"onUpdate:value":t[0]||(t[0]=e=>s.type=e),onChange:i.getLog},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"info"},{default:(0,te.w5)((()=>[Hp])),_:1}),(0,te.Wm)(n,{value:"binge"},{default:(0,te.w5)((()=>[Ap])),_:1}),(0,te.Wm)(n,{value:"binge-debug"},{default:(0,te.w5)((()=>[Op])),_:1}),(0,te.Wm)(n,{value:"advanced"},{default:(0,te.w5)((()=>[Yp])),_:1}),(0,te.Wm)(n,{value:"advanced-debug"},{default:(0,te.w5)((()=>[Lp])),_:1}),(0,te.Wm)(n,{value:"watch"},{default:(0,te.w5)((()=>[Kp])),_:1}),(0,te.Wm)(n,{value:"watch-debug"},{default:(0,te.w5)((()=>[Bp])),_:1}),(0,te.Wm)(n,{value:"sc"},{default:(0,te.w5)((()=>[Np])),_:1}),(0,te.Wm)(n,{value:"sc-debug"},{default:(0,te.w5)((()=>[Zp])),_:1}),(0,te.Wm)(n,{value:"error"},{default:(0,te.w5)((()=>[Ep])),_:1}),(0,te.Wm)(n,{value:"debug"},{default:(0,te.w5)((()=>[Fp])),_:1}),(0,te.Wm)(n,{value:"access"},{default:(0,te.w5)((()=>[Vp])),_:1})])),_:1},8,["value","onChange"])])),_:1}),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",type:"primary",onClick:i.getLog},{default:(0,te.w5)((()=>[Gp])),_:1},8,["onClick"])])),_:1},8,["wrapperCol"]),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te._)("p",Jp,"截图日志务必把版本: "+(0,De.zw)(s.version.head)+"/"+(0,De.zw)(s.version.updateTime)+" 带上, 并注意上方的日志等级以及日志的时间",1),Xp,Qp])),_:1},8,["wrapperCol"]),(0,te.Wm)(d,{label:"日志"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{value:s.log,"onUpdate:value":t[1]||(t[1]=e=>s.log=e),type:"textarea",autoSize:""},null,8,["value"])])),_:1})])),_:1},8,["class"])])])],64)}a(24603),a(28450);var tw={data(){return{type:"error",log:"",version:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getLog(){try{const e=await this.$api().log.get(this.type);this.log=e.data,this.log=e?"[202"+e.data.split("[202").reverse().join("[202"):"",this.log=this.log.replace(new RegExp(`\\[${this.$moment().format("YYYY")}-`,"g"),"[").replace(/\[[^\d]*? console\] \d*/g,"").replace(/\[202/g,"")}catch(e){await this.$message().error(e.message)}}},async mounted(){this.version={updateTime:"2023-10-18 16:25:17",head:"228c4d4a1f1b",commitInfo:"- feat: 打包体积 - fix: windows软硬链接",version:"0.0.1"},this.getLog()}};const aw=(0,oe.Z)(tw,[["render",ew],["__scopeId","data-v-4ec117d0"]]);var lw=aw;const sw=e=>((0,te.dD)("data-v-2e3417eb"),e=e(),(0,te.Cn)(),e),iw=sw((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"关于",-1))),ow=(0,te.uE)('<div class="about" data-v-2e3417eb><div style="margin-top:32px;font-size:14px;" data-v-2e3417eb><div data-v-2e3417eb>非常感谢您使用 Vertex, 当你看到这条消息时, Vertex 本身仍然是一款<span style="color:#FFB6C1;font-weight:800;" data-v-2e3417eb>免费</span>的软件</div><div style="padding-bottom:8px;" data-v-2e3417eb></div><div data-v-2e3417eb>为了 Vertex 的稳定发展, 请不要在任何用来刷流的设备上搭建<span style="color:red;" data-v-2e3417eb>任何形式的代理工具</span>, 以免影响刷流设备与国内的网络通信</div><div style="padding-bottom:8px;" data-v-2e3417eb></div><div data-v-2e3417eb>为了能够使 Vertex 与各站点间保持友好关系, 请在使用 Vertex 考虑站点的服务压力, 请做到包括但不限于以下几点:</div><div data-v-2e3417eb> 0. 在使用 Vertex 的任何功能时, 请考虑对站点造成的影响, 包括各类网页的抓取周期等</div><div data-v-2e3417eb> 1. 在 Rss 时, 如果 Rss 的内容本身是全部免费或者无 HR 的, 请不要开启抓取免费或排除 HR 功能</div><div data-v-2e3417eb> 2. 站点数据的刷新不要过于频繁, 尽量保持一天 2 次甚至一天 1 次</div><div style="padding-bottom:8px;" data-v-2e3417eb></div><div data-v-2e3417eb>同时, 希望您不要在各大公开社交媒体平台宣传或提及本软件, 社交平台包括但不限于 B 站 / 快手 / 抖音 / 什么值得买 等</div><div style="padding-bottom:24px;" data-v-2e3417eb></div><div data-v-2e3417eb>在此，我可以肯定的告诉大家: Vertex 未来有可能会倒闭，也有可能会变质</div><div style="padding-left:300px;" data-v-2e3417eb>---- Vertex 开发者, 栗山未来</div></div></div>',1);function nw(e,t,a,l,s,i){const o=(0,te.up)("a-divider");return(0,te.wg)(),(0,te.iD)(te.HY,null,[iw,(0,te.Wm)(o),ow],64)}var rw={data(){return{}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},async mounted(){}};const dw=(0,oe.Z)(rw,[["render",nw],["__scopeId","data-v-2e3417eb"]]);var uw=dw;const cw=e=>((0,te.dD)("data-v-e20afac2"),e=e(),(0,te.Cn)(),e),mw=cw((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"基础设置",-1))),pw={class:"base-setting"},ww={style:{"text-align":"left"}},hw=(0,te.Uk)("INFO"),fw=(0,te.Uk)("DEBUG"),gw=(0,te.Uk)("TRACE"),yw=(0,te.Uk)("ALL"),vw=(0,te.Uk)("启用"),kw=(0,te.Uk)("启用"),bw=(0,te.Uk)("保存");function _w(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-select-option"),u=(0,te.up)("a-select"),c=(0,te.up)("a-checkbox"),m=(0,te.up)("a-button"),p=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[mw,(0,te.Wm)(o),(0,te._)("div",pw,[(0,te._)("div",ww,[(0,te.Wm)(p,{labelAlign:"right",labelWrap:!0,model:s.setting,size:"small",onFinish:i.modify,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"User-Agent",name:"userAgent",extra:"所有网络请求所用的 User-Agent, 默认为 Vertex"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.userAgent,"onUpdate:value":t[0]||(t[0]=e=>s.setting.userAgent=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"日志级别",name:"loggerLevel",extra:"选择日志记录的最低级别, 默认情况下建议仅选择 INFO, 重启后生效"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.loggerLevel,"onUpdate:value":t[1]||(t[1]=e=>s.setting.loggerLevel=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{value:"info"},{default:(0,te.w5)((()=>[hw])),_:1}),(0,te.Wm)(d,{value:"debug"},{default:(0,te.w5)((()=>[fw])),_:1}),(0,te.Wm)(d,{value:"trace"},{default:(0,te.w5)((()=>[gw])),_:1}),(0,te.Wm)(d,{value:"all"},{default:(0,te.w5)((()=>[yw])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(r,{label:"Telegram 代理",name:"telegramProxy",extra:"Nginx 或 Caddy 等软件反代 Telegram 域名 api.telegram.org 后的地址, 格式: http(s)://ip:port"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.telegramProxy,"onUpdate:value":t[2]||(t[2]=e=>s.setting.telegramProxy=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"企业微信代理",name:"wechatProxy",extra:"Nginx 或 Caddy 等软件反代企业微信域名 qyapi.weixin.qq.com 后的地址, 格式: http(s)://ip:port/"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.wechatProxy,"onUpdate:value":t[3]||(t[3]=e=>s.setting.wechatProxy=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"隐藏报错提示",extra:"进入首页后不提示报错信息"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.setting.ignoreError,"onUpdate:checked":t[4]||(t[4]=e=>s.setting.ignoreError=e)},{default:(0,te.w5)((()=>[vw])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"取消部分依赖检查",extra:"取消部分依赖检查，请谨慎使用"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.setting.ignoreDependCheck,"onUpdate:checked":t[5]||(t[5]=e=>s.setting.ignoreDependCheck=e)},{default:(0,te.w5)((()=>[kw])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[bw])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var xw={data(){return{setting:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async get(){try{const e=(await this.$api().setting.get()).data;this.setting={userAgent:e.userAgent,loggerLevel:e.loggerLevel,telegramProxy:e.telegramProxy,wechatProxy:e.wechatProxy,ignoreError:e.ignoreError,ignoreDependCheck:e.ignoreDependCheck}}catch(e){await this.$message().error(e.message)}},async modify(){try{await this.$api().setting.modify(this.setting),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.get()}catch(e){await this.$message().error(e.message)}}},async mounted(){await this.get()}};const Ww=(0,oe.Z)(xw,[["render",_w],["__scopeId","data-v-e20afac2"]]);var Uw=Ww;const Cw=e=>((0,te.dD)("data-v-5171409e"),e=e(),(0,te.Cn)(),e),zw=Cw((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"主题设置",-1))),$w={class:"style-setting"},Iw={style:{"text-align":"left"}},Sw=(0,te.Uk)("亮色"),Rw=(0,te.Uk)("暗色"),Dw=(0,te.Uk)("跟随系统"),jw=(0,te.Uk)("赛博"),qw=(0,te.Uk)("保存");function Mw(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-radio"),r=(0,te.up)("a-radio-group"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-input"),c=(0,te.up)("a-checkbox"),m=(0,te.up)("a-col"),p=(0,te.up)("a-row"),w=(0,te.up)("a-checkbox-group"),h=(0,te.up)("a-button"),f=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[zw,(0,te.Wm)(o),(0,te._)("div",$w,[(0,te._)("div",Iw,[(0,te.Wm)(f,{labelAlign:"right",labelWrap:!0,model:s.setting,size:"small",onFinish:i.modify,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"主题",name:"theme",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{value:s.setting.theme,"onUpdate:value":t[0]||(t[0]=e=>s.setting.theme=e),name:"theme"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"light"},{default:(0,te.w5)((()=>[Sw])),_:1}),(0,te.Wm)(n,{value:"dark"},{default:(0,te.w5)((()=>[Rw])),_:1}),(0,te.Wm)(n,{value:"follow"},{default:(0,te.w5)((()=>[Dw])),_:1}),(0,te.Wm)(n,{value:"cyber"},{default:(0,te.w5)((()=>[jw])),_:1})])),_:1},8,["value"])])),_:1}),"cyber"===s.setting.theme?((0,te.wg)(),(0,te.j4)(d,{key:0,label:"背景图片",name:"background",extra:"背景图片链接"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.background,"onUpdate:value":t[1]||(t[1]=e=>s.setting.background=e)},null,8,["value"])])),_:1})):(0,te.kq)("",!0),(0,te.Wm)(d,{label:"通知默认封面",name:"wechatCover",extra:"通知时使用的默认封面, 留空显示 Vertex Logo"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.wechatCover,"onUpdate:value":t[2]||(t[2]=e=>s.setting.wechatCover=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"Emby 通知封面",name:"embyCover",extra:"Emby 通知时使用的封面, 留空显示 Vertex Logo"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.embyCover,"onUpdate:value":t[3]||(t[3]=e=>s.setting.embyCover=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"Plex 通知封面",name:"plexCover",extra:"Plex 通知时使用的封面, 留空显示 Vertex Logo"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.plexCover,"onUpdate:value":t[4]||(t[4]=e=>s.setting.plexCover=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"Jellyfin 通知封面",name:"jellyfinCover",extra:"Jellyfin 通知时使用的封面, 留空显示 Vertex Logo"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.jellyfinCover,"onUpdate:value":t[5]||(t[5]=e=>s.setting.jellyfinCover=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"首页显示内容",name:"dashboardContent",extra:"选择首页数据展示"},{default:(0,te.w5)((()=>[(0,te.Wm)(w,{style:{width:"100%"},value:s.setting.dashboardContent,"onUpdate:value":t[6]||(t[6]=e=>s.setting.dashboardContent=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(p,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.contentType,(e=>((0,te.wg)(),(0,te.j4)(m,{span:8,key:e.key},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{value:e.key,"onUpdate:value":t=>e.key=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.text),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[qw])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Pw={data(){return{setting:{dashboardContent:[]},contentType:[{key:"downloader",text:"客户端"},{key:"server",text:"服务器"},{key:"tracker",text:"Tracker 统计"}]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async get(){try{const e=(await this.$api().setting.get()).data;this.setting={theme:e.theme||"follow",background:e.background,wechatCover:e.wechatCover,embyCover:e.embyCover,plexCover:e.plexCover,jellyfinCover:e.jellyfinCover,dashboardContent:e.dashboardContent||[]}}catch(e){await this.$message().error(e.message)}},async modify(){try{await this.$api().setting.modify(this.setting),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.get()}catch(e){await this.$message().error(e.message)}}},async mounted(){await this.get()}};const Tw=(0,oe.Z)(Pw,[["render",Mw],["__scopeId","data-v-5171409e"]]);var Hw=Tw;const Aw=e=>((0,te.dD)("data-v-0441a286"),e=e(),(0,te.Cn)(),e),Ow=Aw((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"安全设置",-1))),Yw={class:"security-setting"},Lw={style:{"text-align":"left"}},Kw=(0,te.Uk)("启用"),Bw=(0,te.Uk)("启用"),Nw=(0,te.Uk)("保存");function Zw(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-checkbox"),u=(0,te.up)("a-button"),c=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Ow,(0,te.Wm)(o),(0,te._)("div",Yw,[(0,te._)("div",Lw,[(0,te.Wm)(c,{labelAlign:"right",labelWrap:!0,model:s.setting,size:"small",onFinish:i.modify,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"用户名",name:"username",extra:"登录所用用户名"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.username,"onUpdate:value":t[0]||(t[0]=e=>s.setting.username=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"密码",name:"password",extra:"登录所用密码, 留空为不修改"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.password,"onUpdate:value":t[1]||(t[1]=e=>s.setting.password=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"二步验证",name:"otp",extra:"二步验证字符串, 请添加至 Authy 或者 Goole Authenticator, 若未设置, 此处会显示随机字符串供首次设定, 若已设置, 此处显示 ****** "},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",disabled:"",value:s.setting.otp,"onUpdate:value":t[2]||(t[2]=e=>s.setting.otp=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"二步验证验证码",name:"otpPw",extra:`二步验证验证码, 除首次设定外, 不需要填写, 服务器当前时间: ${e.$moment(1e3*s.setting.time).format("HH:mm:ss")}`},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.otpPw,"onUpdate:value":t[3]||(t[3]=e=>s.setting.otpPw=e)},null,8,["value"])])),_:1},8,["extra"]),(0,te.Wm)(r,{label:"信任不安全的 SSL 证书",extra:"默认不信任不安全的证书，勾选后信任所有 SSL 证书"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{checked:s.setting.trustAllCerts,"onUpdate:checked":t[4]||(t[4]=e=>s.setting.trustAllCerts=e)},{default:(0,te.w5)((()=>[Kw])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"信任 Vertex Panel",extra:"允许将站点数据信息提交至 Vertex Panel, 数据信息仅用于渲染图片, Vertex Panel 不会保存相关信息。"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{checked:s.setting.trustVertexPanel,"onUpdate:checked":t[5]||(t[5]=e=>s.setting.trustVertexPanel=e)},{default:(0,te.w5)((()=>[Bw])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"ApiKey",name:"apiKey",extra:"ApiKey 用于 Vertex 对外的接口请求鉴权, 第一次保存设置后生成"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{disabled:"",size:"small",value:s.setting.apiKey,"onUpdate:value":t[6]||(t[6]=e=>s.setting.apiKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"TMDB Api",name:"tmdbApiKey",extra:"The Movie Database Api Key, 用于从文件名提取影视剧名称, 请确保 Vertex 可以正常请求 api.themoviedb.org"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.tmdbApiKey,"onUpdate:value":t[7]||(t[7]=e=>s.setting.tmdbApiKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"PanelKey",name:"panelKey",extra:"在 Vertex Panel 注册账号得到的 ApiKey, 用于与 Vertex Panel 通信"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.panelKey,"onUpdate:value":t[8]||(t[8]=e=>s.setting.panelKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[Nw])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var Ew={data(){return{setting:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async get(){try{const e=(await this.$api().setting.get()).data;this.setting={apiKey:e.apiKey,username:e.username,password:"",panelKey:e.panelKey,tmdbApiKey:e.tmdbApiKey,otp:e.otp?"******":new Array(16).fill(1).map((()=>"234567ABCDEFGHIJKLMNOPQRSTUVWXYZ"[parseInt(31*Math.random())])).join(""),otpPw:"",time:e.time,trustAllCerts:e.trustAllCerts,trustVertexPanel:e.trustVertexPanel}}catch(e){await this.$message().error(e.message)}},async modify(){try{const e=(0,Jt.Z)({},this.setting);e.password&&(e.password=this.$md5(e.password)),await this.$api().setting.modify(e),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.get()}catch(e){await this.$message().error(e.message)}}},async mounted(){await this.get()}};const Fw=(0,oe.Z)(Ew,[["render",Zw],["__scopeId","data-v-0441a286"]]);var Vw=Fw;const Gw=e=>((0,te.dD)("data-v-dc514986"),e=e(),(0,te.Cn)(),e),Jw=Gw((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"交互设置",-1))),Xw={class:"interaction-setting"},Qw={style:{"text-align":"left"}},eh=(0,te.Uk)("保存");function th(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-select-option"),u=(0,te.up)("a-select"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Jw,(0,te.Wm)(o),(0,te._)("div",Xw,[(0,te._)("div",Qw,[(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,model:s.setting,size:"small",onFinish:i.modify,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"微信 Token",name:"wechatToken",extra:"微信 Token, 在企业微信接收消息设置内获取"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.wechatToken,"onUpdate:value":t[0]||(t[0]=e=>s.setting.wechatToken=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"微信 AesKey",name:"wechatAesKey",extra:"微信 AesKey, 在企业微信接收消息设置内获取"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{size:"small",value:s.setting.wechatAesKey,"onUpdate:value":t[1]||(t[1]=e=>s.setting.wechatAesKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"交互方式",name:"doubanPush",extra:"微信内交互时使用的通知方式"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.doubanPush,"onUpdate:value":t[2]||(t[2]=e=>s.setting.doubanPush=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(d,{key:e.id,value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(r,{label:"媒体服务通知",name:"webhookPushTo",extra:"Plex 等信息的通知方式"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.setting.webhookPushTo,"onUpdate:value":t[3]||(t[3]=e=>s.setting.webhookPushTo=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.notifications,(e=>((0,te.wg)(),(0,te.j4)(d,{key:e.id,value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[eh])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var ah={data(){return{setting:{},notifications:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async get(){try{const e=(await this.$api().setting.get()).data;this.setting={wechatAesKey:e.wechatAesKey,wechatToken:e.wechatToken,doubanPush:e.doubanPush,webhookPushTo:e.webhookPushTo}}catch(e){await this.$message().error(e.message)}},async modify(){try{await this.$api().setting.modify(this.setting),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.get()}catch(e){await this.$message().error(e.message)}},async listNotification(){try{const e=await this.$api().notification.list();this.notifications=e.data}catch(e){this.$message().error(e.message)}}},async mounted(){await this.get(),this.listNotification()}};const lh=(0,oe.Z)(ah,[["render",th],["__scopeId","data-v-dc514986"]]);var sh=lh;const ih=e=>((0,te.dD)("data-v-45e1e5e4"),e=e(),(0,te.Cn)(),e),oh=ih((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"菜单设置",-1))),nh={class:"menu-setting"},rh={style:{"text-align":"left"}},dh=(0,te.Uk)("保存");function uh(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-tree"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[oh,(0,te.Wm)(o),(0,te._)("div",nh,[(0,te._)("div",rh,[(0,te.Wm)(u,{labelAlign:"right",labelWrap:!0,model:s.setting,size:"small",onFinish:i.modify,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"选中页面",name:"selectPage"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{selectedKeys:s.menuSelected,"onUpdate:selectedKeys":t[0]||(t[0]=e=>s.menuSelected=e),expandedKeys:s.menuExpanded,"onUpdate:expandedKeys":t[1]||(t[1]=e=>s.menuExpanded=e),checkedKeys:s.menuChecked,"onUpdate:checkedKeys":t[2]||(t[2]=e=>s.menuChecked=e),size:"small",checkable:"",checkStrictly:!0,autoExpandParent:!0,"tree-data":s.treeData},null,8,["selectedKeys","expandedKeys","checkedKeys","tree-data"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[dh])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var ch={data(){return{setting:{},treeData:[],allKeys:[],menuSelected:[],menuExpanded:[],menuChecked:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async get(){try{const e=await this.$api().user.get(),t=e.data.menu;for(const a of t){const e={title:a.title,key:a.path};if(a.sub){e.children=[];for(const t of a.sub)e.children.push({title:t.title,key:t.path})}this.treeData.push(e)}for(const a of t)if(this.menuExpanded.push(a.path),this.allKeys.push(a.path),a.hidden||this.menuChecked.push(a.path),a.sub)for(const e of a.sub)this.allKeys.push(e.path),e.hidden||this.menuChecked.push(e.path)}catch(e){this.$message().error(e.message)}},async modify(){try{this.setting.menu=this.allKeys.filter((e=>-1===this.menuChecked.checked.indexOf(e))),await this.$api().setting.modify(this.setting),await this.$message().success("修改成功, 部分设置可能需要刷新页面生效."),this.get()}catch(e){await this.$message().error(e.message)}}},async mounted(){await this.get()}};const mh=(0,oe.Z)(ch,[["render",uh],["__scopeId","data-v-45e1e5e4"]]);var ph=mh;const wh=e=>((0,te.dD)("data-v-c2309b84"),e=e(),(0,te.Cn)(),e),hh=wh((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"备份还原",-1))),fh={class:"backup"},gh={style:{"text-align":"left"}},yh=(0,te.Uk)("启用"),vh=(0,te.Uk)("下载备份"),kh=(0,te.Uk)(" 点击选择文件 ");function bh(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-checkbox"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-button"),u=(0,te.up)("a-upload"),c=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[hh,(0,te.Wm)(o),(0,te._)("div",fh,[(0,te._)("div",gh,[(0,te.Wm)(c,{labelAlign:"right",labelWrap:!0,size:"small",labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"种子文件",extra:"备份时是否备份种子文件, 如不备份, 恢复时将清空所有已有种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{checked:s.setting.backupTorrent,"onUpdate:checked":t[0]||(t[0]=e=>s.setting.backupTorrent=e)},{default:(0,te.w5)((()=>[yh])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"备份"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",type:"primary",onClick:i.backupVertex},{default:(0,te.w5)((()=>[vh])),_:1},8,["onClick"])])),_:1}),(0,te.Wm)(r,{label:"恢复"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{capture:null,accept:null,action:"/api/setting/restoreVertex",showUploadList:!0,onChange:i.handleChange},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",type:"primary",danger:""},{default:(0,te.w5)((()=>[kh])),_:1})])),_:1},8,["onChange"])])),_:1})])),_:1},8,["class"])])])],64)}var _h={data(){return{setting:{backupTorrent:!1}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async backupVertex(){this.setting.backupTorrent?window.open("/api/setting/backupVertex?bt=true"):window.open("/api/setting/backupVertex")},async handleChange({file:e}){"done"===e.status&&await this.$notification().open({message:"恢复备份成功",description:"恢复备份成功, 重启后生效",duration:0}),"error"===e.status&&await this.$notification().open({message:"恢复备份失败",description:"恢复备份失败",duration:0})}}};const xh=(0,oe.Z)(_h,[["render",bh],["__scopeId","data-v-c2309b84"]]);var Wh=xh;const Uh=e=>((0,te.dD)("data-v-7aae226d"),e=e(),(0,te.Cn)(),e),Ch=Uh((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"订阅列表",-1))),zh=Uh((()=>(0,te._)("span",null,"类型",-1))),$h=(0,te.Uk)("全部"),Ih=(0,te.Uk)("电影"),Sh=(0,te.Uk)("剧集"),Rh=Uh((()=>(0,te._)("span",null,"状态",-1))),Dh=(0,te.Uk)("全部"),jh=(0,te.Uk)("已完成"),qh=(0,te.Uk)("未完成"),Mh={class:"subscribe-list"},Ph=["onClick"],Th={style:{color:"lightpink",bottom:"0px",width:"100%",position:"absolute","background-color":"rgba(0,0,0,0.3)","backdrop-filter":"blur(4px)"}},Hh=(0,te.Uk)("刷新"),Ah=(0,te.Uk)("删除"),Oh={key:0,style:{margin:"6px auto","max-width":"100%"}},Yh={style:{height:"48px"}},Lh={key:1,style:{margin:"6px auto"}},Kh={style:{height:"48px"}};function Bh(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-space"),u=(0,te.up)("a-button"),c=(0,te.up)("fa"),m=(0,te.up)("a-popover"),p=(0,te.Q2)("lazy");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Ch,(0,te.Wm)(o),(0,te._)("div",null,[(0,te.Wm)(d,null,{default:(0,te.w5)((()=>[zh,(0,te.Wm)(r,{value:s.type,"onUpdate:value":t[0]||(t[0]=e=>s.type=e),style:{width:"96px"},size:"small",onChange:i.doFilte},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"all"},{default:(0,te.w5)((()=>[$h])),_:1}),(0,te.Wm)(n,{value:"movie"},{default:(0,te.w5)((()=>[Ih])),_:1}),(0,te.Wm)(n,{value:"series"},{default:(0,te.w5)((()=>[Sh])),_:1})])),_:1},8,["value","onChange"]),Rh,(0,te.Wm)(r,{value:s.status,"onUpdate:value":t[1]||(t[1]=e=>s.status=e),style:{width:"96px"},size:"small",onChange:i.doFilte},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:"all"},{default:(0,te.w5)((()=>[Dh])),_:1}),(0,te.Wm)(n,{value:"complete"},{default:(0,te.w5)((()=>[jh])),_:1}),(0,te.Wm)(n,{value:"uncomplete"},{default:(0,te.w5)((()=>[qh])),_:1})])),_:1},8,["value","onChange"])])),_:1})]),(0,te.Wm)(o),(0,te._)("div",Mh,[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.filteredItems,(e=>((0,te.wg)(),(0,te.iD)("div",{key:""+e.id+e.doubanId,style:(0,De.j5)(`display: inline-block; margin: 12px; text-align: center; width: ${i.isMobile()?"160px":"200px"}; vertical-align: top;`)},[(0,te._)("div",{class:(0,De.C_)(i.isMobile()?"item-class-mobile":"item-class-pc")},[(0,te.wy)((0,te._)("img",{onClick:t=>i.gotoDetail(e),style:{cursor:"pointer",width:"100%",height:"100%"}},null,8,Ph),[[p,e.poster]]),(0,te._)("div",Th,[(0,te.Wm)(m,{title:"刷新?",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(u,{type:"primary",onClick:t=>i.refreshItem(e),size:"small"},{default:(0,te.w5)((()=>[Hh])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[(0,te.Wm)(c,{style:{position:"absolute",left:"6px","font-size":"14px",color:"cyan",bottom:"3px",cursor:"pointer"},icon:["fas","arrow-rotate-right"]})])),_:2},1024),(0,te._)("span",null,"["+(0,De.zw)(e.tag)+"]",1),(0,te._)("span",null,"["+(0,De.zw)(0===+e.episodeNow?0:e.episodeNow||"1")+"/"+(0,De.zw)(0===+e.episodes?0:e.episodes||"1")+"]",1),(0,te.Wm)(m,{title:"删除?",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(u,{type:"primary",danger:"",onClick:t=>i.del(e),size:"small"},{default:(0,te.w5)((()=>[Ah])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[(0,te.Wm)(c,{style:{position:"absolute",right:"6px","font-size":"14px",color:"red",bottom:"3px",cursor:"pointer"},icon:["fas","times"]})])),_:2},1024)])],2),i.isMobile()?((0,te.wg)(),(0,te.iD)("div",Oh,[(0,te._)("div",Yh,[e.downloaded?((0,te.wg)(),(0,te.j4)(c,{key:0,style:{"font-size":"16px",color:"green"},icon:["fas","check"]})):(0,te.kq)("",!0),(0,te.Uk)(" "+(0,De.zw)(e.name.split("/")[0]),1)])])):(0,te.kq)("",!0),i.isMobile()?(0,te.kq)("",!0):((0,te.wg)(),(0,te.iD)("div",Lh,[(0,te._)("div",Kh,[e.downloaded?((0,te.wg)(),(0,te.j4)(c,{key:0,style:{"font-size":"16px",color:"green"},icon:["fas","check"]})):(0,te.kq)("",!0),(0,te.Uk)(" "+(0,De.zw)(e.name.split("/")[0])+" · "+(0,De.zw)(e.year),1)])]))],4)))),128))])],64)}var Nh={data(){return{items:[],status:"uncomplete",type:"all",filteredItems:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},doFilte(){let e=this.items;"movie"===this.type&&(e=e.filter((e=>!e.episodes))),"series"===this.type&&(e=e.filter((e=>e.episodes))),"complete"===this.status&&(e=e.filter((e=>e.downloaded))),"uncomplete"===this.status&&(e=e.filter((e=>!e.downloaded))),this.filteredItems=e},async list(){try{this.items=(await this.$api().subscribe.listSubscribeItem()).data.wishes,this.doFilte()}catch(e){this.$message().error(e.message)}},async gotoDetail(e){this.$goto(`/subscribe/detail/${e.doubanId}/${e.id}`,this.$router)},async del(e){try{await this.$api().subscribe.deleteItem(e.id,e.doubanId),this.$message().success("删除成功!"),this.list()}catch(t){await this.$message().error(t.message)}},async refreshItem(e){try{await this.$api().subscribe.refreshItem(e.id,e.doubanId),await this.$message().success("刷新成功!")}catch(t){await this.$message().error(t.message)}}},async mounted(){this.list()}};const Zh=(0,oe.Z)(Nh,[["render",Bh],["__scopeId","data-v-7aae226d"]]);var Eh=Zh;const Fh=e=>((0,te.dD)("data-v-63ef1cbd"),e=e(),(0,te.Cn)(),e),Vh=Fh((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"订阅详情",-1))),Gh={class:"subscribe-detail"},Jh={style:{"text-align":"left"}},Xh=(0,te.Uk)("刷新"),Qh=(0,te.Uk)("删除"),ef=(0,te.Uk)("返回"),tf=(0,te.Uk)("已完成"),af=(0,te.Uk)("取消限制年份"),lf=(0,te.Uk)("禁止下载全集"),sf=(0,te.Uk)("忽略集数识别"),of=(0,te.Uk)("取消链接"),nf=(0,te.Uk)("保存");function rf(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-button"),r=(0,te.up)("a-form-item"),d=(0,te.up)("a-input"),u=(0,te.up)("a-checkbox"),c=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Vh,(0,te.Wm)(o),(0,te._)("div",Gh,[(0,te._)("div",Jh,[(0,te.Wm)(c,{labelAlign:"right",labelWrap:!0,model:s.item,size:"small",onFinish:i.editItem,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{label:"操作"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary",onClick:t[0]||(t[0]=e=>i.refreshItem())},{default:(0,te.w5)((()=>[Xh])),_:1}),(0,te.Wm)(n,{type:"primary",danger:"",style:{"margin-left":"12px"},onClick:t[1]||(t[1]=e=>i.deleteItem())},{default:(0,te.w5)((()=>[Qh])),_:1}),(0,te.Wm)(n,{style:{"margin-left":"12px"},onClick:t[2]||(t[2]=t=>{e.$goto("/subscribe/list",e.$router)})},{default:(0,te.w5)((()=>[ef])),_:1})])),_:1}),(0,te.Wm)(o),(0,te.Wm)(r,{label:"影视剧名",name:"name",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.name,"onUpdate:value":t[3]||(t[3]=e=>s.item.name=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"标签",name:"tag",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.tag,"onUpdate:value":t[4]||(t[4]=e=>s.item.tag=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"年份",name:"year",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.year,"onUpdate:value":t[5]||(t[5]=e=>s.item.year=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"上映日期",name:"releaseAt",extra:"格式为 2022-06-03"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.releaseAt,"onUpdate:value":t[6]||(t[6]=e=>s.item.releaseAt=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"总集数",name:"episodes"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.episodes,"onUpdate:value":t[7]||(t[7]=e=>s.item.episodes=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"当前集",name:"episodeNow"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.episodeNow,"onUpdate:value":t[8]||(t[8]=e=>s.item.episodeNow=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"已完成",name:"downloaded",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.item.downloaded,"onUpdate:checked":t[9]||(t[9]=e=>s.item.downloaded=e)},{default:(0,te.w5)((()=>[tf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"搜索使用的关键词",name:"searchKey",extra:"搜索种子时使用的关键词, 留空不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.searchKey,"onUpdate:value":t[10]||(t[10]=e=>s.item.searchKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"包含关键词",name:"acceptKeys",extra:"以 , 为分割, 各个关键词间为 且 的关系"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.acceptKeys,"onUpdate:value":t[11]||(t[11]=e=>s.item.acceptKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"排除关键词",name:"rejectKeys",extra:"以 , 为分割, 各个关键词间为 或 的关系"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.rejectKeys,"onUpdate:value":t[12]||(t[12]=e=>s.item.rejectKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"过滤关键词",name:"removeKeyword",extra:"识别集数时用于去除副标题内的特定关键词, 正则表达式, 例: 总第\\d+集 表示去除掉 总第60集这类表达"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.removeKeyword,"onUpdate:value":t[13]||(t[13]=e=>s.item.removeKeyword=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"固定季",name:"fixedSeason",extra:"适用于特别篇等内容, 设置固定季后按照设置项软链接, 如 特别篇, 此处填 0"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.fixedSeason,"onUpdate:value":t[14]||(t[14]=e=>s.item.fixedSeason=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"自动链接集数偏移",name:"episodeOffset",extra:"自动链接时在识别集数的基础上做加减运算, 允许 -2, -1, 1, 2 等数值, 正值为加, 负值为减"},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{size:"small",value:s.item.episodeOffset,"onUpdate:value":t[15]||(t[15]=e=>s.item.episodeOffset=e)},null,8,["value"])])),_:1}),(0,te.Wm)(r,{label:"取消限制年份",name:"restrictYear",extra:"默认限制年份, 勾选后取消限制"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.item.restrictYear,"onUpdate:checked":t[16]||(t[16]=e=>s.item.restrictYear=e)},{default:(0,te.w5)((()=>[af])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"禁止下载全集",name:"rejectCompleteTorrent",extra:"如果当前集不为零, 且勾选禁止下载全集, 则在选择种子时排除全集种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.item.rejectCompleteTorrent,"onUpdate:checked":t[17]||(t[17]=e=>s.item.rejectCompleteTorrent=e)},{default:(0,te.w5)((()=>[lf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"忽略集数识别",name:"ignoreEpisodes",extra:"当种子未识别到集数时, 直接认为本种是全集"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.item.ignoreEpisodes,"onUpdate:checked":t[18]||(t[18]=e=>s.item.ignoreEpisodes=e)},{default:(0,te.w5)((()=>[sf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{label:"取消链接",name:"cancelLink",extra:"当勾选取消链接时, 该项目在种子完成后不会执行链接操作"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.item.cancelLink,"onUpdate:checked":t[19]||(t[19]=e=>s.item.cancelLink=e)},{default:(0,te.w5)((()=>[of])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(r,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[nf])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var df={data(){return{item:{}}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async getItem(){try{this.item=(await this.$api().subscribe.getItem(this.$route.params.id,this.$route.params.douban)).data,this.item.downloaded=this.item.downloaded||!1}catch(e){await this.$message().error(e.message)}},async refreshItem(){try{await this.$api().subscribe.refreshItem(this.$route.params.id,this.$route.params.douban),await this.$message().success("刷新成功!")}catch(e){await this.$message().error(e.message)}},async deleteItem(){try{await this.$api().subscribe.deleteItem(this.$route.params.id,this.$route.params.douban),await this.$message().success("删除成功!"),this.$goto("/subscribe/list",this.$router)}catch(e){await this.$message().error(e.message)}},async editItem(){try{await this.$api().subscribe.editItem(this.item),await this.$message().success("编辑成功!"),this.$goto("/subscribe/list",this.$router)}catch(e){await this.$message().error(e.message)}}},async mounted(){await this.getItem()}};const uf=(0,oe.Z)(df,[["render",rf],["__scopeId","data-v-63ef1cbd"]]);var cf=uf;const mf=e=>((0,te.dD)("data-v-1d63ad77"),e=e(),(0,te.Cn)(),e),pf=mf((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"订阅详情",-1))),wf={class:"subscribe-add"},hf={style:{"text-align":"left"}},ff=(0,te.Uk)("已完成"),gf=(0,te.Uk)("取消限制年份"),yf=(0,te.Uk)("禁止下载全集"),vf=(0,te.Uk)("忽略集数识别"),kf=(0,te.Uk)("取消链接"),bf=(0,te.Uk)("保存");function _f(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-input"),c=(0,te.up)("a-checkbox"),m=(0,te.up)("a-button"),p=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)(te.HY,null,[pf,(0,te.Wm)(o),(0,te._)("div",wf,[(0,te._)("div",hf,[(0,te.Wm)(p,{labelAlign:"right",labelWrap:!0,model:s.item,size:"small",onFinish:i.editItem,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"订阅任务",name:"doubanId",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.item.doubanId,"onUpdate:value":t[0]||(t[0]=e=>s.item.doubanId=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.subscribes,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"影视剧名",name:"name",extra:"添加完成后不会自动启动任务, 需要手动在订阅列表编辑一次, 或重启 Vertex 才启动追剧任务",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.name,"onUpdate:value":t[1]||(t[1]=e=>s.item.name=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"标签",name:"tag",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[s.item.doubanId?((0,te.wg)(),(0,te.j4)(r,{key:0,size:"small",value:s.item.tag,"onUpdate:value":t[2]||(t[2]=e=>s.item.tag=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.subscribes.filter((e=>e.id===s.item.doubanId))[0].categories,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.doubanTag,"onUpdate:value":t=>e.doubanTag=t,key:e.doubanTag},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.doubanTag),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])):(0,te.kq)("",!0)])),_:1}),(0,te.Wm)(d,{label:"年份",name:"year",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.year,"onUpdate:value":t[3]||(t[3]=e=>s.item.year=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"上映日期",name:"releaseAt",extra:"格式为 2022-06-03, 若确认已上映, 可随意填写过去时间",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.releaseAt,"onUpdate:value":t[4]||(t[4]=e=>s.item.releaseAt=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"总集数",name:"episodes",extra:"电影类资源务必留空"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.episodes,"onUpdate:value":t[5]||(t[5]=e=>s.item.episodes=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"当前集",name:"episodeNow"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.episodeNow,"onUpdate:value":t[6]||(t[6]=e=>s.item.episodeNow=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"已完成",name:"downloaded",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.item.downloaded,"onUpdate:checked":t[7]||(t[7]=e=>s.item.downloaded=e)},{default:(0,te.w5)((()=>[ff])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(d,{label:"搜索使用的关键词",name:"searchKey",extra:"搜索种子时使用的关键词, 留空不启用"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.searchKey,"onUpdate:value":t[8]||(t[8]=e=>s.item.searchKey=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"包含关键词",name:"acceptKeys",extra:"以 , 为分割, 各个关键词间为 且 的关系"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.acceptKeys,"onUpdate:value":t[9]||(t[9]=e=>s.item.acceptKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"排除关键词",name:"rejectKeys",extra:"以 , 为分割, 各个关键词间为 或 的关系"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.rejectKeys,"onUpdate:value":t[10]||(t[10]=e=>s.item.rejectKeys=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"固定季",name:"fixedSeason",extra:"适用于特别篇等内容, 设置固定季后按照设置项软链接, 如 特别篇, 此处填 0"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.fixedSeason,"onUpdate:value":t[11]||(t[11]=e=>s.item.fixedSeason=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"自动链接集数偏移",name:"episodeOffset",extra:"自动链接时在识别集数的基础上做加减运算, 允许 -2, -1, 1, 2 等数值, 正值为加, 负值为减"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.item.episodeOffset,"onUpdate:value":t[12]||(t[12]=e=>s.item.episodeOffset=e)},null,8,["value"])])),_:1}),(0,te.Wm)(d,{label:"取消限制年份",name:"restrictYear",extra:"默认限制年份, 勾选后取消限制"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.item.restrictYear,"onUpdate:checked":t[13]||(t[13]=e=>s.item.restrictYear=e)},{default:(0,te.w5)((()=>[gf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(d,{label:"禁止下载全集",name:"rejectCompleteTorrent",extra:"如果当前集不为零, 且勾选禁止下载全集, 则在选择种子时排除全集种子"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.item.rejectCompleteTorrent,"onUpdate:checked":t[14]||(t[14]=e=>s.item.rejectCompleteTorrent=e)},{default:(0,te.w5)((()=>[yf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(d,{label:"忽略集数识别",name:"ignoreEpisodes",extra:"当种子未识别到集数时, 直接认为本种是全集"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.item.ignoreEpisodes,"onUpdate:checked":t[15]||(t[15]=e=>s.item.ignoreEpisodes=e)},{default:(0,te.w5)((()=>[vf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(d,{label:"取消链接",name:"cancelLink",extra:"当勾选取消链接时, 该项目在种子完成后不会执行链接操作"},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{checked:s.item.cancelLink,"onUpdate:checked":t[16]||(t[16]=e=>s.item.cancelLink=e)},{default:(0,te.w5)((()=>[kf])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(d,{wrapperCol:i.isMobile()?{span:24}:{span:21,offset:3}},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{type:"primary","html-type":"submit",style:{"margin-top":"24px","margin-bottom":"48px"}},{default:(0,te.w5)((()=>[bf])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish","class"])])])],64)}var xf={data(){return{item:{name:"",tag:"",year:"",releaseAt:"",episodes:"",episodeNow:"",downloaded:!1,searchKey:"",rejectKeys:"",fixedSeason:"",episodeOffset:"",restrictYear:!1,rejectCompleteTorrent:!1,ignoreEpisodes:!1,cancelLink:!1},subscribes:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async editItem(){try{const e=await this.$api().subscribe.editItem(this.item);await this.$message().success(e.message),this.$goto("/subscribe/list",this.$router)}catch(e){await this.$message().error(e.message)}},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data}catch(e){this.$message().error(e.message)}}},async mounted(){await this.listSubscribe()}};const Wf=(0,oe.Z)(xf,[["render",_f],["__scopeId","data-v-1d63ad77"]]);var Uf=Wf;const Cf=e=>((0,te.dD)("data-v-56a0938b"),e=e(),(0,te.Cn)(),e),zf=Cf((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"影视搜索",-1))),$f={class:"subscribe-search"},If={style:{"text-align":"left"}},Sf=(0,te.Uk)("搜索"),Rf=(0,te.Uk)("刷新想看列表"),Df=(0,te.Uk)("刷新想看列表"),jf=Cf((()=>(0,te._)("div",{style:{"font-size":"16px","font-weight":"bold","text-align":"left"}},"搜索结果",-1))),qf=["onClick"],Mf=["onClick"],Pf={key:0,style:{margin:"6px auto","max-width":"100%"}},Tf={style:{height:"48px"}},Hf={key:1,style:{margin:"6px auto"}},Af={style:{height:"48px"}};function Of(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-select-option"),r=(0,te.up)("a-select"),d=(0,te.up)("a-form-item"),u=(0,te.up)("a-input"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form"),p=(0,te.Q2)("lazy");return(0,te.wg)(),(0,te.iD)(te.HY,null,[zf,(0,te.Wm)(o),(0,te._)("div",$f,[(0,te._)("div",If,[(0,te.Wm)(m,{labelAlign:"right",labelWrap:!0,model:s.qs,size:"small",onFinish:i.search,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{label:"豆瓣账号",name:"subscribe",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.qs.subscribe,"onUpdate:value":t[0]||(t[0]=e=>s.qs.subscribe=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.subscribes,(e=>((0,te.wg)(),(0,te.j4)(n,{value:e.id,"onUpdate:value":t=>e.id=t,key:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(d,{label:"分类标签",name:"tag",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{size:"small",value:s.qs.tag,"onUpdate:value":t[1]||(t[1]=e=>s.qs.tag=e),options:(s.subscribes.filter((e=>e.id===s.qs.subscribe))[0]||{categories:[]}).categories.map((e=>({text:e.doubanTag,value:e.doubanTag})))},null,8,["value","options"])])),_:1}),(0,te.Wm)(d,{label:"搜索关键词",name:"keyword",rules:[{required:!0,message:"${label}不可为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{size:"small",value:s.qs.keyword,"onUpdate:value":t[2]||(t[2]=e=>s.qs.keyword=e),style:{width:"240px"}},null,8,["value"]),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},"html-type":"submit"},{default:(0,te.w5)((()=>[Sf])),_:1}),i.isMobile()?(0,te.kq)("",!0):((0,te.wg)(),(0,te.j4)(c,{key:0,size:"small",type:"primary",style:{"margin-left":"24px"},onClick:t[3]||(t[3]=e=>i.refreshSubscribe(s.qs.subscribe)),disabled:s.refreshed||!s.isAdded},{default:(0,te.w5)((()=>[Rf])),_:1},8,["disabled"]))])),_:1}),i.isMobile()?((0,te.wg)(),(0,te.j4)(d,{key:0},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",type:"primary",onClick:t[4]||(t[4]=e=>i.refreshSubscribe(s.qs.subscribe)),disabled:s.refreshed||!s.isAdded},{default:(0,te.w5)((()=>[Df])),_:1},8,["disabled"])])),_:1})):(0,te.kq)("",!0)])),_:1},8,["model","onFinish","class"])]),(0,te.Wm)(o),jf,((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.results,(e=>((0,te.wg)(),(0,te.iD)("div",{key:e.id,style:(0,De.j5)(`display: inline-block; margin: 12px; text-align: center; width: ${i.isMobile()?"160px":"200px"}; vertical-align: top;`)},[(0,te._)("div",{class:(0,De.C_)(i.isMobile()?"item-class-mobile":"item-class-pc")},[(0,te.wy)((0,te._)("img",{onClick:t=>i.gotoDetail(e),style:{cursor:"pointer",width:"100%",height:"100%"}},null,8,qf),[[p,e.poster]]),(0,te._)("div",{onClick:t=>i.addWish(e),style:{cursor:"pointer",color:"lightpink",bottom:"0px",width:"100%",position:"absolute","background-color":"rgba(0,0,0,0.3)","backdrop-filter":"blur(4px)"}},[(0,te._)("span",null,"["+(0,De.zw)(s.added[e.id]?"已订阅":"点击订阅")+"]",1)],8,Mf)],2),i.isMobile()?((0,te.wg)(),(0,te.iD)("div",Pf,[(0,te._)("div",Tf,(0,De.zw)(e.title)+" · "+(0,De.zw)(e.year),1)])):(0,te.kq)("",!0),i.isMobile()?(0,te.kq)("",!0):((0,te.wg)(),(0,te.iD)("div",Hf,[(0,te._)("div",Af,(0,De.zw)(e.title)+" · "+(0,De.zw)(e.year),1)]))],4)))),128))])],64)}var Yf={data(){const e=[{title:"标题",dataIndex:"title",width:32,fixed:!0},{title:"年份",dataIndex:"year",width:8},{title:"集数",dataIndex:"episode",width:8},{title:"操作",width:8}],t=[{title:"海报",dataIndex:"poster",width:8,fixed:!0},{title:"标题",dataIndex:"title",width:32},{title:"年份",dataIndex:"year",width:8},{title:"集数",dataIndex:"episode",width:8},{title:"操作",width:8}],a={subscribe:"",keyword:"",tag:""};return{loading:!1,subscribes:[],results:[],columns:e,added:{},isAdded:!1,refreshed:!1,columnsWithPoster:t,showPoster:!0,qs:a}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data}catch(e){this.$message().error(e.message)}},async search(){try{const e={douban:this.qs.subscribe,keyword:this.qs.keyword},t=await this.$api().subscribe.search(e);this.results=t.data}catch(e){this.$message().error(e.message)}},async addWish(e){try{if(this.added[e.id])return;const t={douban:this.qs.subscribe,id:e.id,tag:this.qs.tag};await this.$api().subscribe.addWish(t),this.added[e.id]=1,this.isAdded=!0,await this.$message().success("添加成功!")}catch(t){this.$message().error(t.message)}},async gotoDetail(e){window.open(e.link)},async refreshSubscribe(e){try{await this.$api().subscribe.refreshSubscribe(e),this.refreshed=!0,this.$message().success("已启动刷新任务"),await this.listSubscribe()}catch(t){this.$message().error(t.message)}}},async mounted(){await this.listSubscribe()}};const Lf=(0,oe.Z)(Yf,[["render",Of],["__scopeId","data-v-56a0938b"]]);var Kf=Lf;const Bf=e=>((0,te.dD)("data-v-69c754de"),e=e(),(0,te.Cn)(),e),Nf=Bf((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"RSS 历史",-1))),Zf={class:"rss"},Ef=Bf((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"RSS 历史",-1))),Ff=Bf((()=>(0,te._)("span",{style:{"font-size":"14px","font-weight":"bold",color:"red","margin-left":"12px"}},"遇到问题先去看 Wiki，特别是 Wiki 里的常见问题, 实在找不到再去交流群问, 别 TM Wiki 不看直接在群里问。",-1))),Vf=(0,te.Uk)(" 种子名称 "),Gf=(0,te.Uk)("筛选"),Jf={key:3},Xf=["onClick"],Qf=(0,te.Uk)("删除"),eg=Bf((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1)));function tg(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-button"),d=(0,te.up)("a-popover"),u=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Nf,(0,te.Wm)(o),(0,te._)("div",Zf,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.torrents,pagination:s.pagination,onChange:i.handleChange,scroll:{x:960}},{title:(0,te.w5)((()=>[Ef,Ff])),headerCell:(0,te.w5)((({column:e})=>["name"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[Vf,(0,te.Wm)(n,{style:{"margin-left":"14px",width:"140px"},size:"small",placeholder:"筛选关键词",value:s.qs.key,"onUpdate:value":t[0]||(t[0]=e=>s.qs.key=e)},null,8,["value"]),(0,te.Wm)(r,{onClick:t[1]||(t[1]=()=>{s.qs.page=1,i.listHistory()}),style:{"margin-left":"4px"},size:"small"},{default:(0,te.w5)((()=>[Gf])),_:1})],64)):(0,te.kq)("",!0)])),bodyCell:(0,te.w5)((({column:t,record:a})=>["rssId"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)((s.rssList.filter((e=>e.id===a.rssId))[0]||{alias:"已删除"}).alias),1)],64)):(0,te.kq)("",!0),-1!==["size","upload","download"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0),-1!==["recordTime","deleteTime"].indexOf(t.dataIndex)&&a[t.dataIndex]?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)(e.$moment(1e3*a[t.dataIndex]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):(0,te.kq)("",!0),"recordNote"===t.dataIndex?((0,te.wg)(),(0,te.iD)("span",Jf,(0,De.zw)(-1!==a.recordNote.indexOf("wish")?"豆瓣":a.recordNote),1)):(0,te.kq)("",!0),"操作"===t.title?((0,te.wg)(),(0,te.iD)(te.HY,{key:4},[(0,te._)("a",{onClick:e=>i.gotoDetail(a)},"打开",8,Xf),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(d,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.delRecord(a),size:"small"},{default:(0,te.w5)((()=>[Qf])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[eg])),_:2},1024)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","pagination","onChange"])])],64)}var ag={data(){const e=[{title:"RSS",dataIndex:"rssId",width:18,filterMultiple:!1,fixed:!0},{title:"种子名称",dataIndex:"name",width:120},{title:"种子大小",dataIndex:"size",width:24},{title:"上传流量",dataIndex:"upload",width:24},{title:"下载流量",dataIndex:"download",width:24},{title:"记录时间",dataIndex:"recordTime",width:32},{title:"删除时间",dataIndex:"deleteTime",width:32},{title:"种子状态",dataIndex:"recordNote",width:32},{title:"操作",dataIndex:"option",width:32}],t={page:1,length:20,type:"rss",rss:"",key:""},a={position:["topRight","bottomRight"],total:0,pageSize:t.length,showSizeChanger:!1};return{loading:!0,pagination:a,columns:e,qs:t,torrents:[],rssList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listHistory(){this.loading=!0;try{const e=(await this.$api().torrent.listHistory(this.qs)).data;this.torrents=e.torrents,this.pagination.total=e.total}catch(e){await this.$message().error(e.message)}this.loading=!1},async listRss(){try{const e=await this.$api().rss.list();this.rssList=e.data,this.columns[0].filters=[...this.rssList.map((e=>({text:e.alias,value:e.id}))),{text:"已删除",value:"deleted"}]}catch(e){this.$message().error(e.message)}},async gotoDetail(e){if(!e.link)return await this.$message().error("链接不存在");window.open(e.link)},async handleChange(e,t){this.qs.page=e.current,t.rssId?this.qs.rss=t.rssId[0]:this.qs.rss="",this.listHistory()},async delRecord(e){try{await this.$api().rss.delRecord({id:e.id}),this.$message().success("删除成功, 列表刷新中...."),this.listHistory()}catch(t){await this.$message().error(t.message)}}},async mounted(){this.listHistory(),this.listRss()}};const lg=(0,oe.Z)(ag,[["render",tg],["__scopeId","data-v-69c754de"]]);var sg=lg;const ig=e=>((0,te.dD)("data-v-31df77e3"),e=e(),(0,te.Cn)(),e),og=ig((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"订阅历史",-1))),ng={class:"rss"},rg=ig((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"订阅历史",-1))),dg=(0,te.Uk)(" 种子名称 "),ug=(0,te.Uk)("筛选"),cg=(0,te.Uk)(" 种子推送 "),mg=["onClick"],pg=ig((()=>(0,te._)("br",null,null,-1))),wg={style:{"font-size":"12px"}},hg=["onClick"],fg={key:0},gg=(0,te.Uk)("/ "),yg=(0,te.Uk)("重新链接"),vg=ig((()=>(0,te._)("a",null,"已完成",-1))),kg={key:1},bg=["onClick"],_g=(0,te.Uk)("删除"),xg=ig((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1)));function Wg(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-input"),r=(0,te.up)("a-button"),d=(0,te.up)("a-popover"),u=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[og,(0,te.Wm)(o),(0,te._)("div",ng,[(0,te.Wm)(u,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.torrents,pagination:s.pagination,onChange:i.handleChange,scroll:{x:1440}},{title:(0,te.w5)((()=>[rg])),headerCell:(0,te.w5)((({column:e})=>["name"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[dg,(0,te.Wm)(n,{style:{"margin-left":"14px",width:"140px"},size:"small",placeholder:"筛选关键词",value:s.qs.key,"onUpdate:value":t[0]||(t[0]=e=>s.qs.key=e)},null,8,["value"]),(0,te.Wm)(r,{onClick:t[1]||(t[1]=()=>{s.qs.page=1,i.listHistory()}),style:{"margin-left":"4px"},size:"small"},{default:(0,te.w5)((()=>[ug])),_:1})],64)):(0,te.kq)("",!0)])),bodyCell:(0,te.w5)((({column:t,record:a})=>["mediaName"===t.dataIndex&&-1!==[6,99].indexOf(a.recordType)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(JSON.parse(a.recordNote).wish.name),1)],64)):(0,te.kq)("",!0),"mediaName"===t.dataIndex&&-1===[6,99].indexOf(a.recordType)?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[cg],64)):(0,te.kq)("",!0),"name"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te._)("a",{onClick:e=>i.gotoDetail(a)},(0,De.zw)(a.name),9,mg),-1!==[6,99].indexOf(a.recordType)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[pg,(0,te._)("span",wg,(0,De.zw)(JSON.parse(a.recordNote).torrent.subtitle),1)],64)):(0,te.kq)("",!0),(0,te._)("a",{style:{"font-size":"12px"},onClick:e=>i.gotoDetail(a,!0)},"[代理打开]",8,hg)],64)):(0,te.kq)("",!0),-1!==["size","upload","download"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:3},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0),-1!==["recordTime","deleteTime"].indexOf(t.dataIndex)&&a[t.dataIndex]?((0,te.wg)(),(0,te.iD)(te.HY,{key:4},[(0,te.Uk)((0,De.zw)(e.$moment(1e3*a[t.dataIndex]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):(0,te.kq)("",!0),"recordNote"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:5},[(0,te._)("span",null,(0,De.zw)(-1!==a.recordNote.indexOf("wish")?"豆瓣":a.recordNote),1),99===a.recordType?((0,te.wg)(),(0,te.iD)("span",fg,[gg,(0,te.Wm)(d,{title:"重新链接?",trigger:"click",overlayStyle:{width:"96px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.relink(a),size:"small"},{default:(0,te.w5)((()=>[yg])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[vg])),_:2},1024)])):(0,te.kq)("",!0),6===a.recordType?((0,te.wg)(),(0,te.iD)("span",kg,"/未完成")):(0,te.kq)("",!0)],64)):(0,te.kq)("",!0),"操作"===t.title?((0,te.wg)(),(0,te.iD)(te.HY,{key:6},[(0,te._)("a",{onClick:e=>i.gotoLink(a)},"软/硬链接",8,bg),(0,te.Wm)(o,{type:"vertical"}),(0,te.Wm)(d,{title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(r,{type:"primary",danger:"",onClick:e=>i.delRecord(a),size:"small"},{default:(0,te.w5)((()=>[_g])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[xg])),_:2},1024)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","pagination","onChange"])])],64)}var Ug={data(){const e=[{title:"剧集",dataIndex:"mediaName",width:24,fixed:!0},{title:"种子名称",dataIndex:"name",width:120},{title:"种子大小",dataIndex:"size",width:24},{title:"记录时间",dataIndex:"recordTime",width:32},{title:"种子状态",dataIndex:"recordNote",width:24},{title:"操作",dataIndex:"option",width:24}],t={page:1,length:20,type:"bingewatching",rss:"",key:""},a={position:["topRight","bottomRight"],total:0,pageSize:t.length,showSizeChanger:!1};return{loading:!0,pagination:a,columns:e,qs:t,torrents:[],rssList:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listHistory(){this.loading=!0;try{const e=(await this.$api().torrent.listHistory(this.qs)).data;this.torrents=e.torrents,this.pagination.total=e.total}catch(e){await this.$message().error(e.message)}this.loading=!1},async delRecord(e){try{await this.$api().subscribe.delRecord({id:e.id}),await this.$message().success("删除成功, 列表刷新中...."),this.listHistory()}catch(t){await this.$message().error(t.message)}},async relink(e){try{await this.$api().subscribe.relink({id:e.id,doubanId:JSON.parse(e.recordNote).wish.doubanId}),await this.$message().success("已重新启动链接任务, 列表刷新中...."),this.listHistory()}catch(t){await this.$message().error(t.message)}},async gotoDetail(e,t){if(!e.link)return await this.$message().error("链接不存在");window.open(t?e.link.replace(/https:\/\/.*?\//,`/proxy/site/${e.rssId}/`):e.link)},async handleChange(e,t){this.qs.page=e.current,this.listHistory()},async gotoLink(e){window.open("/task/link?hash="+e.hash)}},async mounted(){this.listHistory()}};const Cg=(0,oe.Z)(Ug,[["render",Wg],["__scopeId","data-v-31df77e3"]]);var zg=Cg;const $g=e=>((0,te.dD)("data-v-57f37956"),e=e(),(0,te.Cn)(),e),Ig=$g((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"监控分类任务历史",-1))),Sg={class:"rss"},Rg=$g((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"监控分类任务历史",-1))),Dg=(0,te.Uk)("删除"),jg=$g((()=>(0,te._)("a",{style:{color:"red"}},"删除",-1)));function qg(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-button"),r=(0,te.up)("a-popover"),d=(0,te.up)("a-table");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Ig,(0,te.Wm)(o),(0,te._)("div",Sg,[(0,te.Wm)(d,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.history,pagination:s.pagination,scroll:{x:960}},{title:(0,te.w5)((()=>[Rg])),bodyCell:(0,te.w5)((({column:t,record:a})=>["size"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a.size)),1)],64)):(0,te.kq)("",!0),"操作"===t.title?((0,te.wg)(),(0,te.j4)(r,{key:1,title:"删除?",trigger:"click",overlayStyle:{width:"84px",overflow:"hidden"}},{content:(0,te.w5)((()=>[(0,te.Wm)(n,{type:"primary",danger:"",onClick:e=>i.delRecord(a),size:"small"},{default:(0,te.w5)((()=>[Dg])),_:2},1032,["onClick"])])),default:(0,te.w5)((()=>[jg])),_:2},1024)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","pagination"])])],64)}var Mg={data(){const e=[{title:"识别名称",dataIndex:"scrapedName",width:24,fixed:!0},{title:"种子名称",dataIndex:"name",width:120},{title:"年份",dataIndex:"year",width:24},{title:"类型",dataIndex:"type",width:24},{title:"种子大小",dataIndex:"size",width:24},{title:"所属任务",dataIndex:"task",width:24},{title:"操作",dataIndex:"option",width:16}],t={page:1,length:20,type:"rss",rss:""},a={position:["topRight","bottomRight"],total:0,pageSize:t.length,showSizeChanger:!1};return{loading:!0,pagination:a,columns:e,qs:t,history:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listHistory(){this.loading=!0;try{const e=(await this.$api().watch.listHistory(this.qs)).data;this.history=e,this.pagination.total=e.length}catch(e){await this.$message().error(e.message)}this.loading=!1},async delRecord(e){try{const t=await this.$api().watch.delRecord({hash:e.hash,taskId:e.taskId});this.$message().success(t.message),this.listHistory()}catch(t){await this.$message().error(t.message)}}},async mounted(){this.listHistory()}};const Pg=(0,oe.Z)(Mg,[["render",qg],["__scopeId","data-v-57f37956"]]);var Tg=Pg;const Hg=e=>((0,te.dD)("data-v-670f27c6"),e=e(),(0,te.Cn)(),e),Ag=Hg((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"种子搜索",-1))),Og={class:"mix-search"},Yg={style:{"text-align":"left"}},Lg={style:{"margin-top":"12px"}},Kg=(0,te.Uk)("全部选中"),Bg=(0,te.Uk)("取消选中"),Ng=(0,te.Uk)("搜索"),Zg=(0,te.Uk)("筛选"),Eg=Hg((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"种子搜索",-1))),Fg=["onClick"],Vg=Hg((()=>(0,te._)("br",null,null,-1))),Gg={style:{"font-size":"12px"}},Jg=["onClick"],Xg=Hg((()=>(0,te._)("br",null,null,-1))),Qg={style:{"font-size":"12px",color:"red"}},ey={key:3,style:{"text-align":"center"}},ty=Hg((()=>(0,te._)("br",null,null,-1))),ay=["onClick"],ly={style:{"text-align":"left"}},sy=(0,te.Uk)("自动管理"),iy=(0,te.Uk)("取消"),oy=(0,te.Uk)("推送");function ny(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-checkbox"),r=(0,te.up)("a-col"),d=(0,te.up)("a-row"),u=(0,te.up)("a-checkbox-group"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form-item"),p=(0,te.up)("a-input"),w=(0,te.up)("a-form"),h=(0,te.up)("a-table"),f=(0,te.up)("a-select-option"),g=(0,te.up)("a-select"),y=(0,te.up)("a-modal");return(0,te.wg)(),(0,te.iD)(te.HY,null,[Ag,(0,te.Wm)(o),(0,te._)("div",Og,[(0,te._)("div",Yg,[(0,te.Wm)(w,{labelAlign:"right",labelWrap:!0,model:s.qs,size:"small",onFinish:i.search,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{label:"指定站点",name:"sites"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{style:{width:"100%"},value:s.qs.sites,"onUpdate:value":t[0]||(t[0]=e=>s.qs.sites=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(d,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.sites,(e=>((0,te.wg)(),(0,te.j4)(r,{span:i.isMobile()?8:6,key:e.name},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:e.name,"onUpdate:value":t=>e.name=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.text),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["span"])))),128))])),_:1})])),_:1},8,["value"]),(0,te._)("div",Lg,[(0,te.Wm)(c,{size:"small",type:"primary",onClick:t[1]||(t[1]=e=>{s.qs.sites=s.sites.map((e=>e.name))})},{default:(0,te.w5)((()=>[Kg])),_:1}),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},onClick:t[2]||(t[2]=e=>{s.qs.sites=[]})},{default:(0,te.w5)((()=>[Bg])),_:1})])])),_:1}),(0,te.Wm)(m,{label:"搜索关键词",name:"keword"},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.qs.keyword,"onUpdate:value":t[3]||(t[3]=e=>s.qs.keyword=e),style:{width:"240px"}},null,8,["value"]),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},"html-type":"submit"},{default:(0,te.w5)((()=>[Ng])),_:1})])),_:1}),(0,te.Wm)(m,{label:"二次筛选"},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.filterKey,"onUpdate:value":t[4]||(t[4]=e=>s.filterKey=e),style:{width:"240px"}},null,8,["value"]),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},onClick:i.filterTorrent},{default:(0,te.w5)((()=>[Zg])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","onFinish","class"])]),(0,te.Wm)(o),(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.torrents,pagination:s.pagination,onChange:i.handleChange,scroll:{x:960}},{title:(0,te.w5)((()=>[Eg])),bodyCell:(0,te.w5)((({column:t,record:a})=>[-1!==["size"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0),"title"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te._)("a",{onClick:e=>i.gotoDetail(a)},(0,De.zw)(a.title),9,Fg),Vg,(0,te._)("span",Gg,(0,De.zw)(a.subtitle),1),(0,te._)("a",{style:{"font-size":"12px"},onClick:e=>i.gotoDetail(a,!0)},"[代理打开]",8,Jg),Xg,(0,te._)("span",Qg,(0,De.zw)(a.tags.map((e=>`[${e}]`)).join("")),1)],64)):(0,te.kq)("",!0),"seeder"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)([a.seeders,a.leechers,a.snatches].join(" / ")),1)],64)):(0,te.kq)("",!0),"time"===t.dataIndex?((0,te.wg)(),(0,te.iD)("div",ey,[(0,te.Uk)((0,De.zw)(e.$moment(1e3*a.time).format("YYYY-MM-DD"))+" ",1),ty,(0,te.Uk)(" "+(0,De.zw)(e.$moment(1e3*a.time).format("HH:mm:ss")),1)])):(0,te.kq)("",!0),"操作"===t.title?((0,te.wg)(),(0,te.iD)("a",{key:4,onClick:e=>i.openModal(a)},"推送",8,ay)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","pagination","onChange"])]),(0,te.Wm)(y,{visible:s.modalVisible,"onUpdate:visible":t[12]||(t[12]=e=>s.modalVisible=e),title:"推送种子",footer:null},{default:(0,te.w5)((()=>[(0,te._)("div",ly,[(0,te.Wm)(w,{labelAlign:"right",labelWrap:!0,model:s.modalInfo,size:"small",onFinish:i.push,labelCol:{span:6},wrapperCol:{span:18},autocomplete:"off"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{wrapperCol:{span:24}},{default:(0,te.w5)((()=>[(0,te._)("span",null,(0,De.zw)(s.torrent.title),1)])),_:1}),(0,te.Wm)(m,{label:"下载器",name:"client"},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{size:"small",value:s.modalInfo.client,"onUpdate:value":t[5]||(t[5]=e=>s.modalInfo.client=e)},{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(f,{key:e.id,value:e.id},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(0,te.Wm)(m,{label:"分类",name:"category"},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{size:"small",onSearch:t[6]||(t[6]=e=>s.categories[0].value=e),showSearch:!0,value:s.modalInfo.category,"onUpdate:value":t[7]||(t[7]=e=>s.modalInfo.category=e),options:s.categories},null,8,["value","options"])])),_:1}),(0,te.Wm)(m,{label:"保存路径",name:"savePath"},{default:(0,te.w5)((()=>[(0,te.Wm)(g,{size:"small",onSearch:t[8]||(t[8]=e=>s.savePaths[0].value=e),showSearch:!0,value:s.modalInfo.savePath,"onUpdate:value":t[9]||(t[9]=e=>s.modalInfo.savePath=e),options:s.savePaths},null,8,["value","options"])])),_:1}),(0,te.Wm)(m,{label:"自动管理",name:"autoTMM"},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{checked:s.modalInfo.autoTMM,"onUpdate:checked":t[10]||(t[10]=e=>s.modalInfo.autoTMM=e)},{default:(0,te.w5)((()=>[sy])),_:1},8,["checked"])])),_:1}),(0,te.Wm)(m,{wrapperCol:i.isMobile()?{span:24}:{span:18,offset:6}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",onClick:t[11]||(t[11]=()=>s.modalVisible=!1)},{default:(0,te.w5)((()=>[iy])),_:1}),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},"html-type":"submit"},{default:(0,te.w5)((()=>[oy])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish"])])])),_:1},8,["visible"])],64)}var ry={data(){const e=[{title:"站点",dataIndex:"site",width:32,filters:[],filterSearch:!0,fixed:!0},{title:"种子名称",dataIndex:"title",resizable:!0,width:180},{title:"分类",dataIndex:"category",width:32},{title:"种子大小",dataIndex:"size",sorter:(e,t)=>e.size-t.size,width:32},{title:"做种 / 下载 / 完成",dataIndex:"seeder",sorter:(e,t)=>e.seeders-t.seeders,width:44},{title:"发布时间",dataIndex:"time",sorter:(e,t)=>e.time-t.time,width:32},{title:"操作",width:24}],t={page:1,length:20,sites:[],keyword:""},a={position:["topRight","bottomRight"],total:0,current:1,pageSize:t.length,showSizeChanger:!1};return{modalVisible:!1,loading:!1,pagination:a,categories:[],savePaths:[],columns:e,qs:t,torrents:[],torrentsOri:[],subscribes:[],downloaders:[],torrent:{},filterKey:"",modalInfo:{category:"",savePath:"",client:"",autoTMM:!1},sites:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async searchSingleSite(e){try{this.sites.filter((t=>t.name===e))[0].text=e+" 搜索中...";const t=(await this.$api().site.search(this.qs.keyword,[e])).data;this.torrentsOri=this.torrentsOri.concat(t.map((e=>[...e.torrentList.map((t=>(0,Jt.Z)((0,Jt.Z)({},t),{},{site:e.site})))])).flat()),this.torrents=[...this.torrentsOri],this.pagination.total=this.torrents.length,sessionStorage.setItem("search-mix-torrents",JSON.stringify({torrents:this.torrents,keyword:this.keyword})),this.loading=!1,this.sites.filter((t=>t.name===e))[0].text=e+` [${t[0].torrentList.length}]`}catch(t){await this.$message().error(t.message),this.sites.filter((t=>t.name===e))[0].text=e+" 搜索失败",this.loading=!1}},async search(){this.loading=!0,this.torrentsOri=[],this.torrents=[];for(const e of this.qs.sites)this.searchSingleSite(e)},async push(){try{const e=(0,Jt.Z)((0,Jt.Z)({},this.modalInfo),{},{id:this.torrent.id,link:this.torrent.link,site:this.torrent.site}),t=(await this.$api().site.pushTorrent(e)).message;await this.$message().success(t),this.modalVisible=!1}catch(e){await this.$message().error(e.message)}},async listSite(){try{const e=await this.$api().site.listSite({search:1});this.qs.sites=e.data,this.sites=e.data.map((e=>({text:e,name:e}))),this.columns[0].filters=this.qs.sites.map((e=>({text:e,value:e})))}catch(e){this.$message().error(e.message)}},async gotoDetail(e,t){if(!e.link)return await this.$message().error("链接不存在");window.open(t?e.link.replace(/https:\/\/.*?\//,`/proxy/site/${e.site}/`):e.link)},async handleChange(e,t){this.qs.page=e.current,this.pagination.current=e.current,t.site&&t.site[0]?(this.torrents=this.torrents.filter((e=>-1!==t.site.indexOf(e.site))),this.pagination.total=this.torrents.length):(this.torrents=[...this.torrents],this.pagination.total=this.torrents.length)},async filterTorrent(){this.torrents=this.torrentsOri.filter((e=>-1!==e.title.toLowerCase().indexOf(this.filterKey.toLowerCase())||-1!==e.subtitle.toLowerCase().indexOf(this.filterKey.toLowerCase()))),this.pagination.current=1,this.pagination.total=this.torrents.length},async listSubscribe(){try{const e=await this.$api().subscribe.list();this.subscribes=e.data,this.categories=[{value:"手动输入"}];for(const t of this.subscribes.map((e=>e.categories)).flat())-1===this.categories.map((e=>e.value)).indexOf(t.category)&&this.categories.push({value:t.category});this.savePaths=[{value:"手动输入"}];for(const t of this.subscribes.map((e=>e.categories)).flat())-1===this.savePaths.map((e=>e.value)).indexOf(t.savePath)&&this.savePaths.push({value:t.savePath})}catch(e){this.$message().error(e.message)}},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data}catch(e){this.$message().error(e.message)}},openModal(e){this.torrent=(0,Jt.Z)({},e),this.modalVisible=!0}},async mounted(){this.listSite(),this.listSubscribe(),this.listDownloader();const e=sessionStorage.getItem("search-mix-torrents");if(e){const t=JSON.parse(e);this.torrentsOri=t.torrents,this.torrents=[...this.torrentsOri],this.qs.keyword=t.keyword,this.pagination.total=this.torrents.length}}};const dy=(0,oe.Z)(ry,[["render",ny],["__scopeId","data-v-670f27c6"]]);var uy=dy;const cy=e=>((0,te.dD)("data-v-970027f0"),e=e(),(0,te.Cn)(),e),my=cy((()=>(0,te._)("div",{style:{"font-size":"24px","font-weight":"bold"}},"种子聚合",-1))),py={class:"mix-torrent"},wy={style:{"text-align":"left"}},hy={style:{"margin-top":"12px"}},fy=(0,te.Uk)("全部选中"),gy=(0,te.Uk)("取消选中"),yy=(0,te.Uk)("搜索"),vy=cy((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"种子聚合",-1))),ky=["onClick"],by=["onClick"],_y=["onClick"],xy=["onClick"],Wy={style:{"text-align":"left"}},Uy=(0,te.Uk)(" 执行删除操作后, 会通过列出的服务器删除对应的链接文件, 并且删除下载器内的种子以及该种子的文件, 请谨慎操作。 目前仅支持 qBittorrent "),Cy=cy((()=>(0,te._)("br",null,null,-1))),zy=cy((()=>(0,te._)("br",null,null,-1))),$y=cy((()=>(0,te._)("span",{style:{"font-size":"16px","font-weight":"bold"}},"文件列表",-1))),Iy=(0,te.Uk)("取消"),Sy=(0,te.Uk)("删除");function Ry(e,t,a,l,s,i){const o=(0,te.up)("a-divider"),n=(0,te.up)("a-checkbox"),r=(0,te.up)("a-col"),d=(0,te.up)("a-row"),u=(0,te.up)("a-checkbox-group"),c=(0,te.up)("a-button"),m=(0,te.up)("a-form-item"),p=(0,te.up)("a-input"),w=(0,te.up)("a-form"),h=(0,te.up)("a-table"),f=(0,te.up)("a-alert"),g=(0,te.up)("a-modal");return(0,te.wg)(),(0,te.iD)(te.HY,null,[my,(0,te.Wm)(o),(0,te._)("div",py,[(0,te._)("div",wy,[(0,te.Wm)(w,{labelAlign:"right",labelWrap:!0,model:s.qs,size:"small",onFinish:i.listTorrent,labelCol:{span:3},wrapperCol:{span:21},autocomplete:"off",class:(0,De.C_)("container-form-"+(i.isMobile()?"mobile":"pc"))},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{label:"指定客户端",name:"downloaders"},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{style:{width:"100%"},value:s.qs.downloaders,"onUpdate:value":t[0]||(t[0]=e=>s.qs.downloaders=e)},{default:(0,te.w5)((()=>[(0,te.Wm)(d,null,{default:(0,te.w5)((()=>[((0,te.wg)(!0),(0,te.iD)(te.HY,null,(0,te.Ko)(s.downloaders,(e=>((0,te.wg)(),(0,te.j4)(r,{span:i.isMobile()?8:6,key:e.id},{default:(0,te.w5)((()=>[(0,te.Wm)(n,{value:e.id,"onUpdate:value":t=>e.id=t},{default:(0,te.w5)((()=>[(0,te.Uk)((0,De.zw)(e.alias),1)])),_:2},1032,["value","onUpdate:value"])])),_:2},1032,["span"])))),128))])),_:1})])),_:1},8,["value"]),(0,te._)("div",hy,[(0,te.Wm)(c,{size:"small",type:"primary",onClick:t[1]||(t[1]=e=>{s.qs.downloaders=s.downloaders.map((e=>e.id))})},{default:(0,te.w5)((()=>[fy])),_:1}),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},onClick:t[2]||(t[2]=e=>{s.qs.downloaders=[]})},{default:(0,te.w5)((()=>[gy])),_:1})])])),_:1}),(0,te.Wm)(m,{label:"搜索关键词",name:"keword"},{default:(0,te.w5)((()=>[(0,te.Wm)(p,{size:"small",value:s.qs.keyword,"onUpdate:value":t[3]||(t[3]=e=>s.qs.keyword=e),style:{width:"240px"}},null,8,["value"]),(0,te.Wm)(c,{size:"small",type:"primary",style:{"margin-left":"24px"},"html-type":"submit"},{default:(0,te.w5)((()=>[yy])),_:1})])),_:1})])),_:1},8,["model","onFinish","class"])]),(0,te.Wm)(o),(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.columns,size:"small",loading:s.loading,"data-source":s.torrents,pagination:s.pagination,onChange:i.handleChange,scroll:{x:1440}},{title:(0,te.w5)((()=>[vy])),bodyCell:(0,te.w5)((({column:t,record:a})=>[-1!==["size","uploaded","downloaded"].indexOf(t.dataIndex)?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)(e.$formatSize(a[t.dataIndex])),1)],64)):(0,te.kq)("",!0),"ratio"===t.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:1},[(0,te.Uk)((0,De.zw)(a.ratio.toFixed(3)),1)],64)):(0,te.kq)("",!0),-1!==["recordTime","deleteTime","addedTime"].indexOf(t.dataIndex)&&a[t.dataIndex]?((0,te.wg)(),(0,te.iD)(te.HY,{key:2},[(0,te.Uk)((0,De.zw)(e.$moment(1e3*a[t.dataIndex]).format("YYYY-MM-DD HH:mm:ss")),1)],64)):(0,te.kq)("",!0),"操作"===t.title?((0,te.wg)(),(0,te.iD)(te.HY,{key:3},[(0,te._)("a",{onClick:e=>i.gotoDetail(a)},"打开",8,ky),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{onClick:e=>i.gotoDetail(a)},"代理",8,by),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{onClick:e=>i.gotoLink(a)},"软/硬链接",8,_y),(0,te.Wm)(o,{type:"vertical"}),(0,te._)("a",{style:{color:"red"},onClick:e=>i.expandDel(a)},"删除",8,xy)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","loading","data-source","pagination","onChange"])]),(0,te.Wm)(g,{visible:s.modalVisible,"onUpdate:visible":t[5]||(t[5]=e=>s.modalVisible=e),title:"删除种子",width:"1440px",footer:null},{default:(0,te.w5)((()=>[(0,te._)("div",Wy,[(0,te.Wm)(f,{message:"注意事项",type:"info"},{description:(0,te.w5)((()=>[Uy,Cy,zy,(0,te.Uk)(" 种子标题: "+(0,De.zw)(s.delInfo.title),1)])),_:1}),(0,te.Wm)(w,{labelAlign:"right",labelWrap:!0,model:s.delInfo,size:"small",onFinish:i.deleteTorrent,labelCol:{span:6},wrapperCol:{span:18},autocomplete:"off"},{default:(0,te.w5)((()=>[(0,te.Wm)(m,{wrapperCol:{span:24}},{default:(0,te.w5)((()=>[(0,te.Wm)(h,{style:(0,De.j5)(`font-size: ${i.isMobile()?"12px":"14px"};`),columns:s.delFilesColumns,size:"small","data-source":s.delInfo.files,pagination:!1,scroll:{x:960}},{title:(0,te.w5)((()=>[$y])),bodyCell:(0,te.w5)((({column:e,record:t})=>["server"===e.dataIndex?((0,te.wg)(),(0,te.iD)(te.HY,{key:0},[(0,te.Uk)((0,De.zw)("$local$"===t.server?"本地":(s.servers.filter((e=>e.id===t.server))[0]||{}).alias||"已删除"),1)],64)):(0,te.kq)("",!0)])),_:1},8,["style","columns","data-source"])])),_:1}),(0,te.Wm)(m,{wrapperCol:i.isMobile()?{span:24}:{span:18,offset:6}},{default:(0,te.w5)((()=>[(0,te.Wm)(c,{size:"small",onClick:t[4]||(t[4]=()=>s.modalVisible=!1)},{default:(0,te.w5)((()=>[Iy])),_:1}),(0,te.Wm)(c,{size:"small",type:"primary",danger:"",style:{"margin-left":"24px"},"html-type":"submit"},{default:(0,te.w5)((()=>[Sy])),_:1})])),_:1},8,["wrapperCol"])])),_:1},8,["model","onFinish"])])])),_:1},8,["visible"])],64)}var Dy={data(){const e=[{title:"客户端",dataIndex:"clientAlias",sorter:(e,t)=>0,width:32,fixed:!0},{title:"种子名称",dataIndex:"name",sorter:(e,t)=>0,defaultSortOrder:"ascend",resizable:!0,width:144},{title:"分类",dataIndex:"category",sorter:(e,t)=>0,width:42},{title:"标签",dataIndex:"tags",sorter:(e,t)=>0,width:32},{title:"种子大小",dataIndex:"size",sorter:(e,t)=>0,width:32},{title:"上传流量",dataIndex:"uploaded",sorter:(e,t)=>0,width:32},{title:"下载流量",dataIndex:"downloaded",sorter:(e,t)=>0,width:32},{title:"分享率",dataIndex:"ratio",sorter:(e,t)=>0,width:28},{title:"添加时间",dataIndex:"addedTime",sorter:(e,t)=>0,width:36},{title:"操作",width:this.isMobile()?96:72}],t=[{title:"服务器",dataIndex:"server",width:4},{title:"文件路径",dataIndex:"filepath",width:32}],a={page:1,length:20,downloaders:[],keyword:"",sortKey:"addedTime",sortType:"desc"},l={position:["topRight","bottomRight"],total:0,current:1,pageSize:a.length,showSizeChanger:!1};return{loading:!0,pagination:l,modalVisible:!1,columns:e,servers:[],delFilesColumns:t,delInfo:{files:[]},qs:a,torrents:[],downloaders:[]}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async listTorrent(){this.loading=!0;try{const e={clientList:JSON.stringify(this.qs.downloaders),page:this.qs.page,length:this.qs.length,searchKey:this.qs.keyword,sortKey:this.qs.sortKey,sortType:this.qs.sortType},t=(await this.$api().torrent.list(e)).data;this.torrents=t.torrents,this.pagination.total=t.total}catch(e){await this.$message().error(e.message)}this.loading=!1},async listDownloader(){try{const e=await this.$api().downloader.list();this.downloaders=e.data,this.qs.downloaders=this.downloaders.map((e=>e.id))}catch(e){this.$message().error(e.message)}},async listServer(){try{const e=await this.$api().server.list();this.servers=e.data}catch(e){this.$message().error(e.message)}},async gotoDetail(e){if(!e.link)return await this.$message().error("链接不存在");window.open(e.link)},async gotoLink(e){window.open("/task/link?hash="+e.hash)},async expandDel(e){this.modalVisible=!0;try{this.delInfo.files=(await this.$api().torrent.getDelInfo({hash:e.hash})).data.map((e=>({server:e.split("####")[0],filepath:e.split("####")[1]}))),this.delInfo.hash=e.hash,this.delInfo.title=e.name,this.delInfo.clientId=e.client}catch(t){this.$message().error(t.message)}},async deleteTorrent(){this.modalVisible=!0;try{const e=await this.$api().torrent.deleteTorrent(this.delInfo);this.$message().success(e.message)}catch(e){this.$message().error(e.message)}},async handleChange(e,t,a){a&&(this.qs.sortKey=a.field,this.qs.sortType="ascend"===a.order?"asc":"desc"),this.pagination.current=e.current,this.qs.page=e.current,this.listTorrent()}},async mounted(){await this.listDownloader(),this.listServer(),this.listTorrent()}};const jy=(0,oe.Z)(Dy,[["render",Ry],["__scopeId","data-v-970027f0"]]);var qy=jy;const My=e=>((0,te.dD)("data-v-6f013a92"),e=e(),(0,te.Cn)(),e),Py={class:"login"},Ty=My((()=>(0,te._)("div",{class:"left-rect"},[(0,te._)("div",{class:"logo"},[(0,te._)("img",{src:"/assets/images/logo.svg"})])],-1))),Hy={class:"right-rect"},Ay=My((()=>(0,te._)("div",{class:"logo"},[(0,te._)("img",{src:"/assets/images/logo.svg"})],-1))),Oy=My((()=>(0,te._)("div",{style:{margin:"12px auto 6px","font-size":"32px",width:"fit-content","font-weight":"bold"}},[(0,te._)("span",null,"Vertex")],-1))),Yy=My((()=>(0,te._)("div",{style:{margin:"6px auto 12px","font-size":"16px",width:"fit-content",color:"grey"}},[(0,te._)("span",null,"追剧刷流一体化工具")],-1))),Ly=(0,te.Uk)("登录"),Ky=(0,te.Uk)(" 我已阅读 "),By=My((()=>(0,te._)("br",null,null,-1))),Ny=(0,te.Uk)(" 并且知道遇到问题先去看 "),Zy=My((()=>(0,te._)("br",null,null,-1))),Ey=(0,te.Uk)(" 否则在交流群提问可能被 "),Fy=My((()=>(0,te._)("span",{style:{color:"red"}},"禁言",-1)));function Vy(e,t,a,l,s,i){const o=(0,te.up)("a-input"),n=(0,te.up)("a-form-item"),r=(0,te.up)("a-input-password"),d=(0,te.up)("a-button"),u=(0,te.up)("a-checkbox"),c=(0,te.up)("a-form");return(0,te.wg)(),(0,te.iD)("div",Py,[Ty,(0,te._)("div",Hy,[Ay,(0,te.Wm)(c,{labelAlign:"right",labelWrap:!0,model:s.user,onFinish:i.login,labelCol:{span:6},wrapperCol:{span:16},autocomplete:"off",class:"login-form login-layout"},{default:(0,te.w5)((()=>[Oy,Yy,(0,te.Wm)(n,{label:"用户名",name:"username",rules:[{required:!0,message:"用户名不能为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(o,{value:s.user.username,"onUpdate:value":t[0]||(t[0]=e=>s.user.username=e)},null,8,["value"])])),_:1}),(0,te.Wm)(n,{label:"密码",name:"password",rules:[{required:!0,message:"密码不能为空! "}]},{default:(0,te.w5)((()=>[(0,te.Wm)(r,{value:s.user.password,"onUpdate:value":t[1]||(t[1]=e=>s.user.password=e)},null,8,["value"])])),_:1}),(0,te.Wm)(n,{label:"二步验证",name:"otpPw"},{default:(0,te.w5)((()=>[(0,te.Wm)(o,{value:s.user.otpPw,"onUpdate:value":t[2]||(t[2]=e=>s.user.otpPw=e)},null,8,["value"])])),_:1}),(0,te.Wm)(n,{wrapperCol:i.isMobile()?{span:22}:{offset:2,span:20}},{default:(0,te.w5)((()=>[(0,te.Wm)(d,{type:"primary","html-type":"submit",block:"",style:{width:"100%","margin-top":"24px"}},{default:(0,te.w5)((()=>[Ly])),_:1})])),_:1},8,["wrapperCol"]),(0,te.Wm)(n,{name:"checked",rules:[{validator:async(e,t)=>{if(!t)throw"需勾选我已阅读使用须知!"}}],wrapperCol:i.isMobile()?{span:22}:{offset:2,span:20}},{default:(0,te.w5)((()=>[(0,te.Wm)(u,{checked:s.user.checked,"onUpdate:checked":t[5]||(t[5]=e=>s.user.checked=e)},{default:(0,te.w5)((()=>[Ky,(0,te._)("a",{color:"warning",onClick:t[3]||(t[3]=(...e)=>i.openRegulation&&i.openRegulation(...e))},"《使用须知》"),By,Ny,(0,te._)("a",{color:"warning",onClick:t[4]||(t[4]=(...e)=>i.openWiki&&i.openWiki(...e))},"Wiki"),Zy,Ey,Fy])),_:1},8,["checked"])])),_:1},8,["rules","wrapperCol"])])),_:1},8,["model","onFinish"])])])}var Gy={data(){const e={username:"",password:"",otpPw:""};return{user:e}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},async login(e){try{await this.$api().user.login(this.user.username,this.user.password,this.user.otpPw),this.$goto("/index",this.$router)}catch(t){this.$message().error(t.message)}},openRegulation(){window.open("https://wiki.vertex.icu/zh/misc/regulations")},openWiki(){window.open("https://wiki.vertex.icu/zh/misc/faq")}}};const Jy=(0,oe.Z)(Gy,[["render",Vy],["__scopeId","data-v-6f013a92"]]);var Xy=Jy;const Qy={path:"user",component:Re,children:[{path:"login",component:Xy,meta:{title:"用户登录"}}]},ev={path:"index",component:Le,redirect:"/index",children:[{path:"",component:ea,meta:{title:"首页"}}]},tv={path:"metric",component:Le,redirect:"/metric/server",children:[{path:"server",component:Rs,meta:{title:"服务器 - 数据监控"}},{path:"downloader",component:Ys,meta:{title:"下载器 - 数据监控"}},{path:"site",component:eo,meta:{title:"站点 - 数据监控"}}]},av={path:"rule",component:Le,redirect:"/rule/delete",children:[{path:"delete",component:ln,meta:{title:"删种规则 - 规则组件"}},{path:"rss",component:Qn,meta:{title:"RSS 规则 - 规则组件"}},{path:"select",component:$r,meta:{title:"选种规则 - 规则组件"}},{path:"link",component:Wn,meta:{title:"链接规则 - 规则组件"}}]},lv={path:"base",component:Le,redirect:"/base/server",children:[{path:"server",component:Wa,meta:{title:"服务器 - 基础组件"}},{path:"downloader",component:hl,meta:{title:"下载器 - 基础组件"}},{path:"site",component:Fl,meta:{title:"站点 - 基础组件"}},{path:"notification",component:gs,meta:{title:"通知工具 - 基础组件"}}]},sv={path:"info",component:Le,redirect:"/info/about",children:[{path:"info",component:jp,meta:{title:"系统信息 - 系统信息"}},{path:"log",component:lw,meta:{title:"系统日志 - 系统信息"}},{path:"about",component:uw,meta:{title:"关于 - 系统信息"}}]},iv={path:"setting",component:Le,redirect:"/setting/base",children:[{path:"base",component:Uw,meta:{title:"基础设置 - 系统设置"}},{path:"style",component:Hw,meta:{title:"主题设置 - 系统设置"}},{path:"security",component:Vw,meta:{title:"安全设置 - 系统设置"}},{path:"interaction",component:sh,meta:{title:"交互设置 - 系统设置"}},{path:"menu",component:ph,meta:{title:"菜单设置 - 系统设置"}},{path:"backup",component:Wh,meta:{title:"备份还原 - 系统设置"}}]},ov={path:"task",component:Le,redirect:"/task/rss",children:[{path:"rss",component:Ud,meta:{title:"Rss 任务 - 任务配置"}},{path:"subscribe",component:lu,meta:{title:"订阅任务 - 任务配置"}},{path:"link",component:xu,meta:{title:"链接文件 - 任务配置"}},{path:"bulkLink",component:Bu,meta:{title:"批量链接 - 任务配置"}},{path:"watchCategory",component:gc,meta:{title:"监控分类 - 任务配置"}},{path:"script",component:Tc,meta:{title:"定时脚本 - 任务配置"}}]},nv={path:"history",component:Le,redirect:"/history/rss",children:[{path:"rss",component:sg,meta:{title:"RSS 历史 - 任务历史"}},{path:"subscribe",component:zg,meta:{title:"订阅历史 - 任务历史"}},{path:"watchCategory",component:Tg,meta:{title:"监控分类历史 - 任务历史"}}]},rv={path:"mix",component:Le,redirect:"/mix/search",children:[{path:"search",component:uy,meta:{title:"种子搜索 - 聚合操作"}},{path:"downloader",component:qy,meta:{title:"种子聚合 - 聚合操作"}}]},dv={path:"guide",component:Le,redirect:"/guide/rss",children:[{path:"rss",component:Oc,meta:{title:"RSS 引导 - 任务引导"}},{path:"subscribe",component:Kc,meta:{title:"订阅引导 - 任务引导"}}]},uv={path:"tool",component:Le,redirect:"/tool/networkTest",children:[{path:"mikanHistory",component:am,meta:{title:"蜜柑番剧历史 - 常用工具"}},{path:"networkTest",component:cm,meta:{title:"网络测试 - 常用工具"}},{path:"mteamLogin",component:km,meta:{title:"MTEAM 登录 - 常用工具"}},{path:"hosts",component:qm,meta:{title:"修改 HOSTS - 常用工具"}},{path:"proxy",component:Zm,meta:{title:"HTTP 代理 - 常用工具"}},{path:"pathGenerator",component:wp,meta:{title:"路径生成器 - 常用工具"}},{path:"shell/:id",component:ap,meta:{title:"Shell - 常用工具"}},{path:"clientLog",component:_p,meta:{title:"下载器日志 - 常用工具"}}]},cv={path:"subscribe",component:Le,redirect:"/subscribe/list",children:[{path:"list",component:Eh,meta:{title:"订阅列表 - 影视订阅"}},{path:"detail/:douban/:id",component:cf,meta:{title:"详情 - 影视订阅"}},{path:"search",component:Kf,meta:{title:"影视搜索 - 影视订阅"}},{path:"add",component:Uf,meta:{title:"手动添加 - 影视订阅"}}]},mv=[{path:"/",component:Re,redirect:"/index",children:[Qy,ev,tv,av,lv,ov,uv,sv,dv,cv,iv,nv,rv]}];var pv=(0,ze.p7)({history:(0,ze.PO)(),routes:mv}),wv=a(95205);"serviceWorker"in window.navigator&&(0,wv.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),de.vI.add(ue.mRB),de.vI.add(ce.vnX),(0,pe.D)([we.N,he.N,fe.N,ge.N,ye.N,ve.N,ke.N,be.N,_e.N,xe.N,We.N]);const hv=(0,ee.ri)(re),fv=[z.Z,C.ZP,U.ZP,W.ZP,x.ZP,_.Z,b.ZP,k.Z,v.ZP,y.Z,g.Z,f.ZP,h.ZP,w.ZP,p.ZP,m.ZP,c.Z,u.Z,d.ZP,r.Z,n.ZP,o.Z,i.Z];for(const kv of fv)hv.use(kv);hv.use(Ce.Z,{loading:"/assets/images/loading.gif"}),hv.component("v-chart",Ue.ZP),hv.component("v-nodes",((e,{attrs:t})=>t.vnodes)),hv.component("fa",me.GN),pv.beforeEach(((e,t)=>{e.meta.title&&(document.title=e.meta.title+" :: Vertex")})),hv.use(pv);const gv=()=>s.ZP,yv=()=>l.Z,vv=e=>{const t=e<0,a=Math.abs(e);return a<1024?(t?"-":"")+`${a.toFixed(2)} Byte`:a<1048576?(t?"-":"")+`${(a/1024).toFixed(2)} KiB`:a<1073741824?(t?"-":"")+`${(a/1024/1024).toFixed(2)} MiB`:a<1099511627776?(t?"-":"")+`${(a/1024/1024/1024).toFixed(2)} GiB`:a<0x4000000000000?(t?"-":"")+`${(a/1024/1024/1024/1024).toFixed(2)} TiB`:a<0x1000000000000000?(t?"-":"")+`${(a/1024/1024/1024/1024/1024).toFixed(3)} PiB`:"0 Byte"};hv.mixin({methods:{$goto:(e,t)=>{t.push(e)},$api:J,$moment:Q(),$message:gv,$notification:yv,$defineComponent:te.aZ,$formatSize:vv,$ref:ae.iH,$md5:j()}}),hv.mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var i=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,i){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],i=e[u][2];for(var n=!0,r=0;r<l.length;r++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(n=!1,i<o&&(o=i));if(n){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,i,o=l[0],n=l[1],r=l[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(r)var u=r(a)}for(t&&t(l);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},l=self["webpackChunkvertex"]=self["webpackChunkvertex"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(69405)}));l=a.O(l)})();
//# sourceMappingURL=app.933cf738.js.map